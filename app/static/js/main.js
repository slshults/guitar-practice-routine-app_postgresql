function o0(n,r){for(var s=0;s<r.length;s++){const l=r[s];if(typeof l!="string"&&!Array.isArray(l)){for(const c in l)if(c!=="default"&&!(c in n)){const d=Object.getOwnPropertyDescriptor(l,c);d&&Object.defineProperty(n,c,d.get?d:{enumerable:!0,get:()=>l[c]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}function Kd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ed={exports:{}},ta={},td={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp;function s0(){if(Hp)return lt;Hp=1;var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.iterator;function N(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,S={};function j(D,J,Se){this.props=D,this.context=J,this.refs=S,this.updater=Se||b}j.prototype.isReactComponent={},j.prototype.setState=function(D,J){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,J,"setState")},j.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function A(){}A.prototype=j.prototype;function T(D,J,Se){this.props=D,this.context=J,this.refs=S,this.updater=Se||b}var L=T.prototype=new A;L.constructor=T,E(L,j.prototype),L.isPureReactComponent=!0;var F=Array.isArray,M=Object.prototype.hasOwnProperty,H={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function q(D,J,Se){var Me,Pe={},Le=null,se=null;if(J!=null)for(Me in J.ref!==void 0&&(se=J.ref),J.key!==void 0&&(Le=""+J.key),J)M.call(J,Me)&&!z.hasOwnProperty(Me)&&(Pe[Me]=J[Me]);var Re=arguments.length-2;if(Re===1)Pe.children=Se;else if(1<Re){for(var K=Array(Re),ee=0;ee<Re;ee++)K[ee]=arguments[ee+2];Pe.children=K}if(D&&D.defaultProps)for(Me in Re=D.defaultProps,Re)Pe[Me]===void 0&&(Pe[Me]=Re[Me]);return{$$typeof:n,type:D,key:Le,ref:se,props:Pe,_owner:H.current}}function we(D,J){return{$$typeof:n,type:D.type,key:J,ref:D.ref,props:D.props,_owner:D._owner}}function ae(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function ye(D){var J={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Se){return J[Se]})}var xe=/\/+/g;function oe(D,J){return typeof D=="object"&&D!==null&&D.key!=null?ye(""+D.key):J.toString(36)}function be(D,J,Se,Me,Pe){var Le=typeof D;(Le==="undefined"||Le==="boolean")&&(D=null);var se=!1;if(D===null)se=!0;else switch(Le){case"string":case"number":se=!0;break;case"object":switch(D.$$typeof){case n:case r:se=!0}}if(se)return se=D,Pe=Pe(se),D=Me===""?"."+oe(se,0):Me,F(Pe)?(Se="",D!=null&&(Se=D.replace(xe,"$&/")+"/"),be(Pe,J,Se,"",function(ee){return ee})):Pe!=null&&(ae(Pe)&&(Pe=we(Pe,Se+(!Pe.key||se&&se.key===Pe.key?"":(""+Pe.key).replace(xe,"$&/")+"/")+D)),J.push(Pe)),1;if(se=0,Me=Me===""?".":Me+":",F(D))for(var Re=0;Re<D.length;Re++){Le=D[Re];var K=Me+oe(Le,Re);se+=be(Le,J,Se,K,Pe)}else if(K=N(D),typeof K=="function")for(D=K.call(D),Re=0;!(Le=D.next()).done;)Le=Le.value,K=Me+oe(Le,Re++),se+=be(Le,J,Se,K,Pe);else if(Le==="object")throw J=String(D),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return se}function Te(D,J,Se){if(D==null)return D;var Me=[],Pe=0;return be(D,Me,"","",function(Le){return J.call(Se,Le,Pe++)}),Me}function je(D){if(D._status===-1){var J=D._result;J=J(),J.then(function(Se){(D._status===0||D._status===-1)&&(D._status=1,D._result=Se)},function(Se){(D._status===0||D._status===-1)&&(D._status=2,D._result=Se)}),D._status===-1&&(D._status=0,D._result=J)}if(D._status===1)return D._result.default;throw D._result}var me={current:null},Q={transition:null},ce={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:Q,ReactCurrentOwner:H};function ue(){throw Error("act(...) is not supported in production builds of React.")}return lt.Children={map:Te,forEach:function(D,J,Se){Te(D,function(){J.apply(this,arguments)},Se)},count:function(D){var J=0;return Te(D,function(){J++}),J},toArray:function(D){return Te(D,function(J){return J})||[]},only:function(D){if(!ae(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},lt.Component=j,lt.Fragment=s,lt.Profiler=c,lt.PureComponent=T,lt.StrictMode=l,lt.Suspense=g,lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,lt.act=ue,lt.cloneElement=function(D,J,Se){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var Me=E({},D.props),Pe=D.key,Le=D.ref,se=D._owner;if(J!=null){if(J.ref!==void 0&&(Le=J.ref,se=H.current),J.key!==void 0&&(Pe=""+J.key),D.type&&D.type.defaultProps)var Re=D.type.defaultProps;for(K in J)M.call(J,K)&&!z.hasOwnProperty(K)&&(Me[K]=J[K]===void 0&&Re!==void 0?Re[K]:J[K])}var K=arguments.length-2;if(K===1)Me.children=Se;else if(1<K){Re=Array(K);for(var ee=0;ee<K;ee++)Re[ee]=arguments[ee+2];Me.children=Re}return{$$typeof:n,type:D.type,key:Pe,ref:Le,props:Me,_owner:se}},lt.createContext=function(D){return D={$$typeof:h,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:d,_context:D},D.Consumer=D},lt.createElement=q,lt.createFactory=function(D){var J=q.bind(null,D);return J.type=D,J},lt.createRef=function(){return{current:null}},lt.forwardRef=function(D){return{$$typeof:m,render:D}},lt.isValidElement=ae,lt.lazy=function(D){return{$$typeof:x,_payload:{_status:-1,_result:D},_init:je}},lt.memo=function(D,J){return{$$typeof:v,type:D,compare:J===void 0?null:J}},lt.startTransition=function(D){var J=Q.transition;Q.transition={};try{D()}finally{Q.transition=J}},lt.unstable_act=ue,lt.useCallback=function(D,J){return me.current.useCallback(D,J)},lt.useContext=function(D){return me.current.useContext(D)},lt.useDebugValue=function(){},lt.useDeferredValue=function(D){return me.current.useDeferredValue(D)},lt.useEffect=function(D,J){return me.current.useEffect(D,J)},lt.useId=function(){return me.current.useId()},lt.useImperativeHandle=function(D,J,Se){return me.current.useImperativeHandle(D,J,Se)},lt.useInsertionEffect=function(D,J){return me.current.useInsertionEffect(D,J)},lt.useLayoutEffect=function(D,J){return me.current.useLayoutEffect(D,J)},lt.useMemo=function(D,J){return me.current.useMemo(D,J)},lt.useReducer=function(D,J,Se){return me.current.useReducer(D,J,Se)},lt.useRef=function(D){return me.current.useRef(D)},lt.useState=function(D){return me.current.useState(D)},lt.useSyncExternalStore=function(D,J,Se){return me.current.useSyncExternalStore(D,J,Se)},lt.useTransition=function(){return me.current.useTransition()},lt.version="18.3.1",lt}var Gp;function Qd(){return Gp||(Gp=1,td.exports=s0()),td.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function i0(){if(Yp)return ta;Yp=1;var n=Qd(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,v){var x,y={},N=null,b=null;v!==void 0&&(N=""+v),g.key!==void 0&&(N=""+g.key),g.ref!==void 0&&(b=g.ref);for(x in g)l.call(g,x)&&!d.hasOwnProperty(x)&&(y[x]=g[x]);if(m&&m.defaultProps)for(x in g=m.defaultProps,g)y[x]===void 0&&(y[x]=g[x]);return{$$typeof:r,type:m,key:N,ref:b,props:y,_owner:c.current}}return ta.Fragment=s,ta.jsx=h,ta.jsxs=h,ta}var Kp;function a0(){return Kp||(Kp=1,ed.exports=i0()),ed.exports}var i=a0(),f=Qd();const Ct=Kd(f),l0=o0({__proto__:null,default:Ct},[f]);var Al={},nd={exports:{}},An={},rd={exports:{}},od={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp;function c0(){return Qp||(Qp=1,(function(n){function r(Q,ce){var ue=Q.length;Q.push(ce);e:for(;0<ue;){var D=ue-1>>>1,J=Q[D];if(0<c(J,ce))Q[D]=ce,Q[ue]=J,ue=D;else break e}}function s(Q){return Q.length===0?null:Q[0]}function l(Q){if(Q.length===0)return null;var ce=Q[0],ue=Q.pop();if(ue!==ce){Q[0]=ue;e:for(var D=0,J=Q.length,Se=J>>>1;D<Se;){var Me=2*(D+1)-1,Pe=Q[Me],Le=Me+1,se=Q[Le];if(0>c(Pe,ue))Le<J&&0>c(se,Pe)?(Q[D]=se,Q[Le]=ue,D=Le):(Q[D]=Pe,Q[Me]=ue,D=Me);else if(Le<J&&0>c(se,ue))Q[D]=se,Q[Le]=ue,D=Le;else break e}}return ce}function c(Q,ce){var ue=Q.sortIndex-ce.sortIndex;return ue!==0?ue:Q.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var h=Date,m=h.now();n.unstable_now=function(){return h.now()-m}}var g=[],v=[],x=1,y=null,N=3,b=!1,E=!1,S=!1,j=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(Q){for(var ce=s(v);ce!==null;){if(ce.callback===null)l(v);else if(ce.startTime<=Q)l(v),ce.sortIndex=ce.expirationTime,r(g,ce);else break;ce=s(v)}}function F(Q){if(S=!1,L(Q),!E)if(s(g)!==null)E=!0,je(M);else{var ce=s(v);ce!==null&&me(F,ce.startTime-Q)}}function M(Q,ce){E=!1,S&&(S=!1,A(q),q=-1),b=!0;var ue=N;try{for(L(ce),y=s(g);y!==null&&(!(y.expirationTime>ce)||Q&&!ye());){var D=y.callback;if(typeof D=="function"){y.callback=null,N=y.priorityLevel;var J=D(y.expirationTime<=ce);ce=n.unstable_now(),typeof J=="function"?y.callback=J:y===s(g)&&l(g),L(ce)}else l(g);y=s(g)}if(y!==null)var Se=!0;else{var Me=s(v);Me!==null&&me(F,Me.startTime-ce),Se=!1}return Se}finally{y=null,N=ue,b=!1}}var H=!1,z=null,q=-1,we=5,ae=-1;function ye(){return!(n.unstable_now()-ae<we)}function xe(){if(z!==null){var Q=n.unstable_now();ae=Q;var ce=!0;try{ce=z(!0,Q)}finally{ce?oe():(H=!1,z=null)}}else H=!1}var oe;if(typeof T=="function")oe=function(){T(xe)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,Te=be.port2;be.port1.onmessage=xe,oe=function(){Te.postMessage(null)}}else oe=function(){j(xe,0)};function je(Q){z=Q,H||(H=!0,oe())}function me(Q,ce){q=j(function(){Q(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){E||b||(E=!0,je(M))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_getFirstCallbackNode=function(){return s(g)},n.unstable_next=function(Q){switch(N){case 1:case 2:case 3:var ce=3;break;default:ce=N}var ue=N;N=ce;try{return Q()}finally{N=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,ce){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ue=N;N=Q;try{return ce()}finally{N=ue}},n.unstable_scheduleCallback=function(Q,ce,ue){var D=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?D+ue:D):ue=D,Q){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ue+J,Q={id:x++,callback:ce,priorityLevel:Q,startTime:ue,expirationTime:J,sortIndex:-1},ue>D?(Q.sortIndex=ue,r(v,Q),s(g)===null&&Q===s(v)&&(S?(A(q),q=-1):S=!0,me(F,ue-D))):(Q.sortIndex=J,r(g,Q),E||b||(E=!0,je(M))),Q},n.unstable_shouldYield=ye,n.unstable_wrapCallback=function(Q){var ce=N;return function(){var ue=N;N=ce;try{return Q.apply(this,arguments)}finally{N=ue}}}})(od)),od}var Xp;function u0(){return Xp||(Xp=1,rd.exports=c0()),rd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp;function d0(){if(Jp)return An;Jp=1;var n=Qd(),r=u0();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,c={};function d(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(c[e]=t,e=0;e<t.length;e++)l.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},y={};function N(e){return g.call(y,e)?!0:g.call(x,e)?!1:v.test(e)?y[e]=!0:(x[e]=!0,!1)}function b(e,t,o,a){if(o!==null&&o.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function E(e,t,o,a){if(t===null||typeof t>"u"||b(e,t,o,a))return!0;if(a)return!1;if(o!==null)switch(o.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function S(e,t,o,a,u,p,C){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=u,this.mustUseProperty=o,this.propertyName=e,this.type=t,this.sanitizeURL=p,this.removeEmptyString=C}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){j[e]=new S(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];j[t]=new S(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){j[e]=new S(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){j[e]=new S(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){j[e]=new S(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){j[e]=new S(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){j[e]=new S(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){j[e]=new S(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){j[e]=new S(e,5,!1,e.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function T(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(A,T);j[t]=new S(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(A,T);j[t]=new S(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(A,T);j[t]=new S(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){j[e]=new S(e,1,!1,e.toLowerCase(),null,!1,!1)}),j.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){j[e]=new S(e,1,!1,e.toLowerCase(),null,!0,!0)});function L(e,t,o,a){var u=j.hasOwnProperty(t)?j[t]:null;(u!==null?u.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(E(t,o,u,a)&&(o=null),a||u===null?N(t)&&(o===null?e.removeAttribute(t):e.setAttribute(t,""+o)):u.mustUseProperty?e[u.propertyName]=o===null?u.type===3?!1:"":o:(t=u.attributeName,a=u.attributeNamespace,o===null?e.removeAttribute(t):(u=u.type,o=u===3||u===4&&o===!0?"":""+o,a?e.setAttributeNS(a,t,o):e.setAttribute(t,o))))}var F=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),H=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),we=Symbol.for("react.profiler"),ae=Symbol.for("react.provider"),ye=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),Te=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),Q=Symbol.iterator;function ce(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var ue=Object.assign,D;function J(e){if(D===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return`
`+D+e}var Se=!1;function Me(e,t){if(!e||Se)return"";Se=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(Y){var a=Y}Reflect.construct(e,[],t)}else{try{t.call()}catch(Y){a=Y}e.call(t.prototype)}else{try{throw Error()}catch(Y){a=Y}e()}}catch(Y){if(Y&&a&&typeof Y.stack=="string"){for(var u=Y.stack.split(`
`),p=a.stack.split(`
`),C=u.length-1,k=p.length-1;1<=C&&0<=k&&u[C]!==p[k];)k--;for(;1<=C&&0<=k;C--,k--)if(u[C]!==p[k]){if(C!==1||k!==1)do if(C--,k--,0>k||u[C]!==p[k]){var O=`
`+u[C].replace(" at new "," at ");return e.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",e.displayName)),O}while(1<=C&&0<=k);break}}}finally{Se=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?J(e):""}function Pe(e){switch(e.tag){case 5:return J(e.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return e=Me(e.type,!1),e;case 11:return e=Me(e.type.render,!1),e;case 1:return e=Me(e.type,!0),e;default:return""}}function Le(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case H:return"Portal";case we:return"Profiler";case q:return"StrictMode";case oe:return"Suspense";case be:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ye:return(e.displayName||"Context")+".Consumer";case ae:return(e._context.displayName||"Context")+".Provider";case xe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Te:return t=e.displayName||null,t!==null?t:Le(e.type)||"Memo";case je:t=e._payload,e=e._init;try{return Le(e(t))}catch{}}return null}function se(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(t);case 8:return t===q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Re(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ee(e){var t=K(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,p=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(C){a=""+C,p.call(this,C)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(C){a=""+C},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ke(e){e._valueTracker||(e._valueTracker=ee(e))}function Qe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),a="";return e&&(a=K(e)?e.checked?"true":"false":e.value),e=a,e!==o?(t.setValue(e),!0):!1}function Be(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function it(e,t){var o=t.checked;return ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function ut(e,t){var o=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;o=Re(t.value!=null?t.value:o),e._wrapperState={initialChecked:a,initialValue:o,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Z(e,t){t=t.checked,t!=null&&L(e,"checked",t,!1)}function Ie(e,t){Z(e,t);var o=Re(t.value),a=t.type;if(o!=null)a==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ge(e,t.type,o):t.hasOwnProperty("defaultValue")&&ge(e,t.type,Re(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Je(e,t,o){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,o||t===e.value||(e.value=t),e.defaultValue=t}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function ge(e,t,o){(t!=="number"||Be(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var ke=Array.isArray;function He(e,t,o,a){if(e=e.options,t){t={};for(var u=0;u<o.length;u++)t["$"+o[u]]=!0;for(o=0;o<e.length;o++)u=t.hasOwnProperty("$"+e[o].value),e[o].selected!==u&&(e[o].selected=u),u&&a&&(e[o].defaultSelected=!0)}else{for(o=""+Re(o),t=null,u=0;u<e.length;u++){if(e[u].value===o){e[u].selected=!0,a&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function tt(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xt(e,t){var o=t.value;if(o==null){if(o=t.children,t=t.defaultValue,o!=null){if(t!=null)throw Error(s(92));if(ke(o)){if(1<o.length)throw Error(s(93));o=o[0]}t=o}t==null&&(t=""),o=t}e._wrapperState={initialValue:Re(o)}}function Ue(e,t){var o=Re(t.value),a=Re(t.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),t.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),a!=null&&(e.defaultValue=""+a)}function ot(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Vt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nt(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Vt(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wt,$t=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,o,a,u){MSApp.execUnsafeLocalFunction(function(){return e(t,o,a,u)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wt=wt||document.createElement("div"),wt.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function It(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var Wt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cn=["Webkit","ms","Moz","O"];Object.keys(Wt).forEach(function(e){Cn.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wt[t]=Wt[e]})});function hr(e,t,o){return t==null||typeof t=="boolean"||t===""?"":o||typeof t!="number"||t===0||Wt.hasOwnProperty(e)&&Wt[e]?(""+t).trim():t+"px"}function bn(e,t){e=e.style;for(var o in t)if(t.hasOwnProperty(o)){var a=o.indexOf("--")===0,u=hr(o,t[o],a);o==="float"&&(o="cssFloat"),a?e.setProperty(o,u):e[o]=u}}var zn=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function en(e,t){if(t){if(zn[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function Sn(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=null;function an(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qn=null,Et=null,yt=null;function zt(e){if(e=zi(e)){if(typeof Qn!="function")throw Error(s(280));var t=e.stateNode;t&&(t=Ha(t),Qn(e.stateNode,e.type,t))}}function Ot(e){Et?yt?yt.push(e):yt=[e]:Et=e}function Ne(){if(Et){var e=Et,t=yt;if(yt=Et=null,zt(e),t)for(e=0;e<t.length;e++)zt(t[e])}}function $(e,t){return e(t)}function te(){}var ie=!1;function Ee(e,t,o){if(ie)return e(t,o);ie=!0;try{return $(e,t,o)}finally{ie=!1,(Et!==null||yt!==null)&&(te(),Ne())}}function he(e,t){var o=e.stateNode;if(o===null)return null;var a=Ha(o);if(a===null)return null;o=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(s(231,t,typeof o));return o}var ze=!1;if(m)try{var de={};Object.defineProperty(de,"passive",{get:function(){ze=!0}}),window.addEventListener("test",de,de),window.removeEventListener("test",de,de)}catch{ze=!1}function Ae(e,t,o,a,u,p,C,k,O){var Y=Array.prototype.slice.call(arguments,3);try{t.apply(o,Y)}catch(pe){this.onError(pe)}}var Oe=!1,nt=null,et=!1,at=null,Ht={onError:function(e){Oe=!0,nt=e}};function no(e,t,o,a,u,p,C,k,O){Oe=!1,nt=null,Ae.apply(Ht,arguments)}function mn(e,t,o,a,u,p,C,k,O){if(no.apply(this,arguments),Oe){if(Oe){var Y=nt;Oe=!1,nt=null}else throw Error(s(198));et||(et=!0,at=Y)}}function On(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function vi(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fs(e){if(On(e)!==e)throw Error(s(188))}function hs(e){var t=e.alternate;if(!t){if(t=On(e),t===null)throw Error(s(188));return t!==e?null:e}for(var o=e,a=t;;){var u=o.return;if(u===null)break;var p=u.alternate;if(p===null){if(a=u.return,a!==null){o=a;continue}break}if(u.child===p.child){for(p=u.child;p;){if(p===o)return fs(u),e;if(p===a)return fs(u),t;p=p.sibling}throw Error(s(188))}if(o.return!==a.return)o=u,a=p;else{for(var C=!1,k=u.child;k;){if(k===o){C=!0,o=u,a=p;break}if(k===a){C=!0,a=u,o=p;break}k=k.sibling}if(!C){for(k=p.child;k;){if(k===o){C=!0,o=p,a=u;break}if(k===a){C=!0,a=p,o=u;break}k=k.sibling}if(!C)throw Error(s(189))}}if(o.alternate!==a)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?e:t}function ps(e){return e=hs(e),e!==null?ms(e):null}function ms(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ms(e);if(t!==null)return t;e=e.sibling}return null}var ja=r.unstable_scheduleCallback,gs=r.unstable_cancelCallback,ro=r.unstable_shouldYield,vs=r.unstable_requestPaint,Tt=r.unstable_now,ys=r.unstable_getCurrentPriorityLevel,oo=r.unstable_ImmediatePriority,yi=r.unstable_UserBlockingPriority,_o=r.unstable_NormalPriority,Tc=r.unstable_LowPriority,ka=r.unstable_IdlePriority,Mo=null,Bn=null;function Ta(e){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(Mo,e,void 0,(e.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:xi,Ra=Math.log,xs=Math.LN2;function xi(e){return e>>>=0,e===0?32:31-(Ra(e)/xs|0)|0}var _n=64,Ar=4194304;function Qt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function so(e,t){var o=e.pendingLanes;if(o===0)return 0;var a=0,u=e.suspendedLanes,p=e.pingedLanes,C=o&268435455;if(C!==0){var k=C&~u;k!==0?a=Qt(k):(p&=C,p!==0&&(a=Qt(p)))}else C=o&~u,C!==0?a=Qt(C):p!==0&&(a=Qt(p));if(a===0)return 0;if(t!==0&&t!==a&&(t&u)===0&&(u=a&-a,p=t&-t,u>=p||u===16&&(p&4194240)!==0))return t;if((a&4)!==0&&(a|=o&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)o=31-Nn(t),u=1<<o,a|=e[o],t&=~u;return a}function wi(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ci(e,t){for(var o=e.suspendedLanes,a=e.pingedLanes,u=e.expirationTimes,p=e.pendingLanes;0<p;){var C=31-Nn(p),k=1<<C,O=u[C];O===-1?((k&o)===0||(k&a)!==0)&&(u[C]=wi(k,t)):O<=t&&(e.expiredLanes|=k),p&=~k}}function ws(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cs(){var e=_n;return _n<<=1,(_n&4194240)===0&&(_n=64),e}function bs(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function Xn(e,t,o){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nn(t),e[t]=o}function Aa(e,t){var o=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<o;){var u=31-Nn(o),p=1<<u;t[u]=0,a[u]=-1,e[u]=-1,o&=~p}}function bi(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var a=31-Nn(o),u=1<<a;u&t|e[a]&t&&(e[a]|=t),o&=~u}}var ht=0;function Da(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Si,Ss,Ni,Pa,Oa,Ei=!1,Ns=[],pr=null,Jn=null,mr=null,Io=new Map,Lo=new Map,qn=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _a(e,t){switch(e){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Io.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lo.delete(t.pointerId)}}function Fo(e,t,o,a,u,p){return e===null||e.nativeEvent!==p?(e={blockedOn:t,domEventName:o,eventSystemFlags:a,nativeEvent:p,targetContainers:[u]},t!==null&&(t=zi(t),t!==null&&Ss(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Ac(e,t,o,a,u){switch(t){case"focusin":return pr=Fo(pr,e,t,o,a,u),!0;case"dragenter":return Jn=Fo(Jn,e,t,o,a,u),!0;case"mouseover":return mr=Fo(mr,e,t,o,a,u),!0;case"pointerover":var p=u.pointerId;return Io.set(p,Fo(Io.get(p)||null,e,t,o,a,u)),!0;case"gotpointercapture":return p=u.pointerId,Lo.set(p,Fo(Lo.get(p)||null,e,t,o,a,u)),!0}return!1}function $o(e){var t=Vo(e.target);if(t!==null){var o=On(t);if(o!==null){if(t=o.tag,t===13){if(t=vi(o),t!==null){e.blockedOn=t,Oa(e.priority,function(){Ni(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Es(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=Ti(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var a=new o.constructor(o.type,o);sn=a,o.target.dispatchEvent(a),sn=null}else return t=zi(o),t!==null&&Ss(t),e.blockedOn=o,!1;t.shift()}return!0}function ji(e,t,o){Es(e)&&o.delete(t)}function Dc(){Ei=!1,pr!==null&&Es(pr)&&(pr=null),Jn!==null&&Es(Jn)&&(Jn=null),mr!==null&&Es(mr)&&(mr=null),Io.forEach(ji),Lo.forEach(ji)}function zo(e,t){e.blockedOn===t&&(e.blockedOn=null,Ei||(Ei=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Dc)))}function Bo(e){function t(u){return zo(u,e)}if(0<Ns.length){zo(Ns[0],e);for(var o=1;o<Ns.length;o++){var a=Ns[o];a.blockedOn===e&&(a.blockedOn=null)}}for(pr!==null&&zo(pr,e),Jn!==null&&zo(Jn,e),mr!==null&&zo(mr,e),Io.forEach(t),Lo.forEach(t),o=0;o<qn.length;o++)a=qn[o],a.blockedOn===e&&(a.blockedOn=null);for(;0<qn.length&&(o=qn[0],o.blockedOn===null);)$o(o),o.blockedOn===null&&qn.shift()}var gr=F.ReactCurrentBatchConfig,js=!0;function Pc(e,t,o,a){var u=ht,p=gr.transition;gr.transition=null;try{ht=1,ki(e,t,o,a)}finally{ht=u,gr.transition=p}}function Oc(e,t,o,a){var u=ht,p=gr.transition;gr.transition=null;try{ht=4,ki(e,t,o,a)}finally{ht=u,gr.transition=p}}function ki(e,t,o,a){if(js){var u=Ti(e,t,o,a);if(u===null)Wc(e,t,a,vr,o),_a(e,a);else if(Ac(u,e,t,o,a))a.stopPropagation();else if(_a(e,a),t&4&&-1<Rc.indexOf(e)){for(;u!==null;){var p=zi(u);if(p!==null&&Si(p),p=Ti(e,t,o,a),p===null&&Wc(e,t,a,vr,o),p===u)break;u=p}u!==null&&a.stopPropagation()}else Wc(e,t,a,null,o)}}var vr=null;function Ti(e,t,o,a){if(vr=null,e=an(a),e=Vo(e),e!==null)if(t=On(e),t===null)e=null;else if(o=t.tag,o===13){if(e=vi(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vr=e,null}function Ma(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ys()){case oo:return 1;case yi:return 4;case _o:case Tc:return 16;case ka:return 536870912;default:return 16}default:return 16}}var Zn=null,ks=null,Ts=null;function Ia(){if(Ts)return Ts;var e,t=ks,o=t.length,a,u="value"in Zn?Zn.value:Zn.textContent,p=u.length;for(e=0;e<o&&t[e]===u[e];e++);var C=o-e;for(a=1;a<=C&&t[o-a]===u[p-a];a++);return Ts=u.slice(e,1<a?1-a:void 0)}function Rs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Uo(){return!0}function Ri(){return!1}function gn(e){function t(o,a,u,p,C){this._reactName=o,this._targetInst=u,this.type=a,this.nativeEvent=p,this.target=C,this.currentTarget=null;for(var k in e)e.hasOwnProperty(k)&&(o=e[k],this[k]=o?o(p):p[k]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Uo:Ri,this.isPropagationStopped=Ri,this}return ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Uo)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Uo)},persist:function(){},isPersistent:Uo}),t}var w={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},P=gn(w),_=ue({},w,{view:0,detail:0}),R=gn(_),B,G,X,ne=ue({},_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==X&&(X&&e.type==="mousemove"?(B=e.screenX-X.screenX,G=e.screenY-X.screenY):G=B=0,X=e),B)},movementY:function(e){return"movementY"in e?e.movementY:G}}),Ge=gn(ne),le=ue({},ne,{dataTransfer:0}),re=gn(le),U=ue({},_,{relatedTarget:0}),Fe=gn(U),Xe=ue({},w,{animationName:0,elapsedTime:0,pseudoElement:0}),Xt=gn(Xe),bt=ue({},w,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),st=gn(bt),_t=ue({},w,{data:0}),Yt=gn(_t),ft={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},St={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function La(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dr[e])?!!t[e]:!1}function Pr(){return La}var Ai=ue({},_,{key:function(e){if(e.key){var t=ft[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?St[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pr,charCode:function(e){return e.type==="keypress"?Rs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hy=gn(Ai),Gy=ue({},ne,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),If=gn(Gy),Yy=ue({},_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pr}),Ky=gn(Yy),Qy=ue({},w,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xy=gn(Qy),Jy=ue({},ne,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qy=gn(Jy),Zy=[9,13,27,32],_c=m&&"CompositionEvent"in window,Di=null;m&&"documentMode"in document&&(Di=document.documentMode);var ex=m&&"TextEvent"in window&&!Di,Lf=m&&(!_c||Di&&8<Di&&11>=Di),Ff=" ",$f=!1;function zf(e,t){switch(e){case"keyup":return Zy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var As=!1;function tx(e,t){switch(e){case"compositionend":return Bf(t);case"keypress":return t.which!==32?null:($f=!0,Ff);case"textInput":return e=t.data,e===Ff&&$f?null:e;default:return null}}function nx(e,t){if(As)return e==="compositionend"||!_c&&zf(e,t)?(e=Ia(),Ts=ks=Zn=null,As=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lf&&t.locale!=="ko"?null:t.data;default:return null}}var rx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rx[e.type]:t==="textarea"}function Vf(e,t,o,a){Ot(a),t=Ua(t,"onChange"),0<t.length&&(o=new P("onChange","change",null,o,a),e.push({event:o,listeners:t}))}var Pi=null,Oi=null;function ox(e){ah(e,0)}function Fa(e){var t=Ms(e);if(Qe(t))return e}function sx(e,t){if(e==="change")return t}var Wf=!1;if(m){var Mc;if(m){var Ic="oninput"in document;if(!Ic){var Hf=document.createElement("div");Hf.setAttribute("oninput","return;"),Ic=typeof Hf.oninput=="function"}Mc=Ic}else Mc=!1;Wf=Mc&&(!document.documentMode||9<document.documentMode)}function Gf(){Pi&&(Pi.detachEvent("onpropertychange",Yf),Oi=Pi=null)}function Yf(e){if(e.propertyName==="value"&&Fa(Oi)){var t=[];Vf(t,Oi,e,an(e)),Ee(ox,t)}}function ix(e,t,o){e==="focusin"?(Gf(),Pi=t,Oi=o,Pi.attachEvent("onpropertychange",Yf)):e==="focusout"&&Gf()}function ax(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fa(Oi)}function lx(e,t){if(e==="click")return Fa(t)}function cx(e,t){if(e==="input"||e==="change")return Fa(t)}function ux(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var er=typeof Object.is=="function"?Object.is:ux;function _i(e,t){if(er(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++){var u=o[a];if(!g.call(t,u)||!er(e[u],t[u]))return!1}return!0}function Kf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qf(e,t){var o=Kf(e);e=0;for(var a;o;){if(o.nodeType===3){if(a=e+o.textContent.length,e<=t&&a>=t)return{node:o,offset:t-e};e=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Kf(o)}}function Xf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Xf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jf(){for(var e=window,t=Be();t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=Be(e.document)}return t}function Lc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function dx(e){var t=Jf(),o=e.focusedElem,a=e.selectionRange;if(t!==o&&o&&o.ownerDocument&&Xf(o.ownerDocument.documentElement,o)){if(a!==null&&Lc(o)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in o)o.selectionStart=t,o.selectionEnd=Math.min(e,o.value.length);else if(e=(t=o.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=o.textContent.length,p=Math.min(a.start,u);a=a.end===void 0?p:Math.min(a.end,u),!e.extend&&p>a&&(u=a,a=p,p=u),u=Qf(o,p);var C=Qf(o,a);u&&C&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==C.node||e.focusOffset!==C.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),p>a?(e.addRange(t),e.extend(C.node,C.offset)):(t.setEnd(C.node,C.offset),e.addRange(t)))}}for(t=[],e=o;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<t.length;o++)e=t[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fx=m&&"documentMode"in document&&11>=document.documentMode,Ds=null,Fc=null,Mi=null,$c=!1;function qf(e,t,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;$c||Ds==null||Ds!==Be(a)||(a=Ds,"selectionStart"in a&&Lc(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Mi&&_i(Mi,a)||(Mi=a,a=Ua(Fc,"onSelect"),0<a.length&&(t=new P("onSelect","select",null,t,o),e.push({event:t,listeners:a}),t.target=Ds)))}function $a(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var Ps={animationend:$a("Animation","AnimationEnd"),animationiteration:$a("Animation","AnimationIteration"),animationstart:$a("Animation","AnimationStart"),transitionend:$a("Transition","TransitionEnd")},zc={},Zf={};m&&(Zf=document.createElement("div").style,"AnimationEvent"in window||(delete Ps.animationend.animation,delete Ps.animationiteration.animation,delete Ps.animationstart.animation),"TransitionEvent"in window||delete Ps.transitionend.transition);function za(e){if(zc[e])return zc[e];if(!Ps[e])return e;var t=Ps[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in Zf)return zc[e]=t[o];return e}var eh=za("animationend"),th=za("animationiteration"),nh=za("animationstart"),rh=za("transitionend"),oh=new Map,sh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function io(e,t){oh.set(e,t),d(t,[e])}for(var Bc=0;Bc<sh.length;Bc++){var Uc=sh[Bc],hx=Uc.toLowerCase(),px=Uc[0].toUpperCase()+Uc.slice(1);io(hx,"on"+px)}io(eh,"onAnimationEnd"),io(th,"onAnimationIteration"),io(nh,"onAnimationStart"),io("dblclick","onDoubleClick"),io("focusin","onFocus"),io("focusout","onBlur"),io(rh,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ii));function ih(e,t,o){var a=e.type||"unknown-event";e.currentTarget=o,mn(a,t,void 0,e),e.currentTarget=null}function ah(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var a=e[o],u=a.event;a=a.listeners;e:{var p=void 0;if(t)for(var C=a.length-1;0<=C;C--){var k=a[C],O=k.instance,Y=k.currentTarget;if(k=k.listener,O!==p&&u.isPropagationStopped())break e;ih(u,k,Y),p=O}else for(C=0;C<a.length;C++){if(k=a[C],O=k.instance,Y=k.currentTarget,k=k.listener,O!==p&&u.isPropagationStopped())break e;ih(u,k,Y),p=O}}}if(et)throw e=at,et=!1,at=null,e}function Rt(e,t){var o=t[Xc];o===void 0&&(o=t[Xc]=new Set);var a=e+"__bubble";o.has(a)||(lh(t,e,2,!1),o.add(a))}function Vc(e,t,o){var a=0;t&&(a|=4),lh(o,e,a,t)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function Li(e){if(!e[Ba]){e[Ba]=!0,l.forEach(function(o){o!=="selectionchange"&&(mx.has(o)||Vc(o,!1,e),Vc(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ba]||(t[Ba]=!0,Vc("selectionchange",!1,t))}}function lh(e,t,o,a){switch(Ma(t)){case 1:var u=Pc;break;case 4:u=Oc;break;default:u=ki}o=u.bind(null,t,o,e),u=void 0,!ze||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),a?u!==void 0?e.addEventListener(t,o,{capture:!0,passive:u}):e.addEventListener(t,o,!0):u!==void 0?e.addEventListener(t,o,{passive:u}):e.addEventListener(t,o,!1)}function Wc(e,t,o,a,u){var p=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var C=a.tag;if(C===3||C===4){var k=a.stateNode.containerInfo;if(k===u||k.nodeType===8&&k.parentNode===u)break;if(C===4)for(C=a.return;C!==null;){var O=C.tag;if((O===3||O===4)&&(O=C.stateNode.containerInfo,O===u||O.nodeType===8&&O.parentNode===u))return;C=C.return}for(;k!==null;){if(C=Vo(k),C===null)return;if(O=C.tag,O===5||O===6){a=p=C;continue e}k=k.parentNode}}a=a.return}Ee(function(){var Y=p,pe=an(o),ve=[];e:{var fe=oh.get(e);if(fe!==void 0){var _e=P,Ve=e;switch(e){case"keypress":if(Rs(o)===0)break e;case"keydown":case"keyup":_e=Hy;break;case"focusin":Ve="focus",_e=Fe;break;case"focusout":Ve="blur",_e=Fe;break;case"beforeblur":case"afterblur":_e=Fe;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=Ge;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=re;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=Ky;break;case eh:case th:case nh:_e=Xt;break;case rh:_e=Xy;break;case"scroll":_e=R;break;case"wheel":_e=qy;break;case"copy":case"cut":case"paste":_e=st;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=If}var We=(t&4)!==0,Gt=!We&&e==="scroll",V=We?fe!==null?fe+"Capture":null:fe;We=[];for(var I=Y,W;I!==null;){W=I;var Ce=W.stateNode;if(W.tag===5&&Ce!==null&&(W=Ce,V!==null&&(Ce=he(I,V),Ce!=null&&We.push(Fi(I,Ce,W)))),Gt)break;I=I.return}0<We.length&&(fe=new _e(fe,Ve,null,o,pe),ve.push({event:fe,listeners:We}))}}if((t&7)===0){e:{if(fe=e==="mouseover"||e==="pointerover",_e=e==="mouseout"||e==="pointerout",fe&&o!==sn&&(Ve=o.relatedTarget||o.fromElement)&&(Vo(Ve)||Ve[Or]))break e;if((_e||fe)&&(fe=pe.window===pe?pe:(fe=pe.ownerDocument)?fe.defaultView||fe.parentWindow:window,_e?(Ve=o.relatedTarget||o.toElement,_e=Y,Ve=Ve?Vo(Ve):null,Ve!==null&&(Gt=On(Ve),Ve!==Gt||Ve.tag!==5&&Ve.tag!==6)&&(Ve=null)):(_e=null,Ve=Y),_e!==Ve)){if(We=Ge,Ce="onMouseLeave",V="onMouseEnter",I="mouse",(e==="pointerout"||e==="pointerover")&&(We=If,Ce="onPointerLeave",V="onPointerEnter",I="pointer"),Gt=_e==null?fe:Ms(_e),W=Ve==null?fe:Ms(Ve),fe=new We(Ce,I+"leave",_e,o,pe),fe.target=Gt,fe.relatedTarget=W,Ce=null,Vo(pe)===Y&&(We=new We(V,I+"enter",Ve,o,pe),We.target=W,We.relatedTarget=Gt,Ce=We),Gt=Ce,_e&&Ve)t:{for(We=_e,V=Ve,I=0,W=We;W;W=Os(W))I++;for(W=0,Ce=V;Ce;Ce=Os(Ce))W++;for(;0<I-W;)We=Os(We),I--;for(;0<W-I;)V=Os(V),W--;for(;I--;){if(We===V||V!==null&&We===V.alternate)break t;We=Os(We),V=Os(V)}We=null}else We=null;_e!==null&&ch(ve,fe,_e,We,!1),Ve!==null&&Gt!==null&&ch(ve,Gt,Ve,We,!0)}}e:{if(fe=Y?Ms(Y):window,_e=fe.nodeName&&fe.nodeName.toLowerCase(),_e==="select"||_e==="input"&&fe.type==="file")var Ye=sx;else if(Uf(fe))if(Wf)Ye=cx;else{Ye=ax;var qe=ix}else(_e=fe.nodeName)&&_e.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Ye=lx);if(Ye&&(Ye=Ye(e,Y))){Vf(ve,Ye,o,pe);break e}qe&&qe(e,fe,Y),e==="focusout"&&(qe=fe._wrapperState)&&qe.controlled&&fe.type==="number"&&ge(fe,"number",fe.value)}switch(qe=Y?Ms(Y):window,e){case"focusin":(Uf(qe)||qe.contentEditable==="true")&&(Ds=qe,Fc=Y,Mi=null);break;case"focusout":Mi=Fc=Ds=null;break;case"mousedown":$c=!0;break;case"contextmenu":case"mouseup":case"dragend":$c=!1,qf(ve,o,pe);break;case"selectionchange":if(fx)break;case"keydown":case"keyup":qf(ve,o,pe)}var Ze;if(_c)e:{switch(e){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else As?zf(e,o)&&(rt="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(rt="onCompositionStart");rt&&(Lf&&o.locale!=="ko"&&(As||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&As&&(Ze=Ia()):(Zn=pe,ks="value"in Zn?Zn.value:Zn.textContent,As=!0)),qe=Ua(Y,rt),0<qe.length&&(rt=new Yt(rt,e,null,o,pe),ve.push({event:rt,listeners:qe}),Ze?rt.data=Ze:(Ze=Bf(o),Ze!==null&&(rt.data=Ze)))),(Ze=ex?tx(e,o):nx(e,o))&&(Y=Ua(Y,"onBeforeInput"),0<Y.length&&(pe=new Yt("onBeforeInput","beforeinput",null,o,pe),ve.push({event:pe,listeners:Y}),pe.data=Ze))}ah(ve,t)})}function Fi(e,t,o){return{instance:e,listener:t,currentTarget:o}}function Ua(e,t){for(var o=t+"Capture",a=[];e!==null;){var u=e,p=u.stateNode;u.tag===5&&p!==null&&(u=p,p=he(e,o),p!=null&&a.unshift(Fi(e,p,u)),p=he(e,t),p!=null&&a.push(Fi(e,p,u))),e=e.return}return a}function Os(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ch(e,t,o,a,u){for(var p=t._reactName,C=[];o!==null&&o!==a;){var k=o,O=k.alternate,Y=k.stateNode;if(O!==null&&O===a)break;k.tag===5&&Y!==null&&(k=Y,u?(O=he(o,p),O!=null&&C.unshift(Fi(o,O,k))):u||(O=he(o,p),O!=null&&C.push(Fi(o,O,k)))),o=o.return}C.length!==0&&e.push({event:t,listeners:C})}var gx=/\r\n?/g,vx=/\u0000|\uFFFD/g;function uh(e){return(typeof e=="string"?e:""+e).replace(gx,`
`).replace(vx,"")}function Va(e,t,o){if(t=uh(t),uh(e)!==t&&o)throw Error(s(425))}function Wa(){}var Hc=null,Gc=null;function Yc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Kc=typeof setTimeout=="function"?setTimeout:void 0,yx=typeof clearTimeout=="function"?clearTimeout:void 0,dh=typeof Promise=="function"?Promise:void 0,xx=typeof queueMicrotask=="function"?queueMicrotask:typeof dh<"u"?function(e){return dh.resolve(null).then(e).catch(wx)}:Kc;function wx(e){setTimeout(function(){throw e})}function Qc(e,t){var o=t,a=0;do{var u=o.nextSibling;if(e.removeChild(o),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(a===0){e.removeChild(u),Bo(t);return}a--}else o!=="$"&&o!=="$?"&&o!=="$!"||a++;o=u}while(o);Bo(t)}function ao(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function fh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(t===0)return e;t--}else o==="/$"&&t++}e=e.previousSibling}return null}var _s=Math.random().toString(36).slice(2),yr="__reactFiber$"+_s,$i="__reactProps$"+_s,Or="__reactContainer$"+_s,Xc="__reactEvents$"+_s,Cx="__reactListeners$"+_s,bx="__reactHandles$"+_s;function Vo(e){var t=e[yr];if(t)return t;for(var o=e.parentNode;o;){if(t=o[Or]||o[yr]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=fh(e);e!==null;){if(o=e[yr])return o;e=fh(e)}return t}e=o,o=e.parentNode}return null}function zi(e){return e=e[yr]||e[Or],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ms(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function Ha(e){return e[$i]||null}var Jc=[],Is=-1;function lo(e){return{current:e}}function At(e){0>Is||(e.current=Jc[Is],Jc[Is]=null,Is--)}function jt(e,t){Is++,Jc[Is]=e.current,e.current=t}var co={},dn=lo(co),En=lo(!1),Wo=co;function Ls(e,t){var o=e.type.contextTypes;if(!o)return co;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var u={},p;for(p in o)u[p]=t[p];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function jn(e){return e=e.childContextTypes,e!=null}function Ga(){At(En),At(dn)}function hh(e,t,o){if(dn.current!==co)throw Error(s(168));jt(dn,t),jt(En,o)}function ph(e,t,o){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return o;a=a.getChildContext();for(var u in a)if(!(u in t))throw Error(s(108,se(e)||"Unknown",u));return ue({},o,a)}function Ya(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||co,Wo=dn.current,jt(dn,e),jt(En,En.current),!0}function mh(e,t,o){var a=e.stateNode;if(!a)throw Error(s(169));o?(e=ph(e,t,Wo),a.__reactInternalMemoizedMergedChildContext=e,At(En),At(dn),jt(dn,e)):At(En),jt(En,o)}var _r=null,Ka=!1,qc=!1;function gh(e){_r===null?_r=[e]:_r.push(e)}function Sx(e){Ka=!0,gh(e)}function uo(){if(!qc&&_r!==null){qc=!0;var e=0,t=ht;try{var o=_r;for(ht=1;e<o.length;e++){var a=o[e];do a=a(!0);while(a!==null)}_r=null,Ka=!1}catch(u){throw _r!==null&&(_r=_r.slice(e+1)),ja(oo,uo),u}finally{ht=t,qc=!1}}return null}var Fs=[],$s=0,Qa=null,Xa=0,Un=[],Vn=0,Ho=null,Mr=1,Ir="";function Go(e,t){Fs[$s++]=Xa,Fs[$s++]=Qa,Qa=e,Xa=t}function vh(e,t,o){Un[Vn++]=Mr,Un[Vn++]=Ir,Un[Vn++]=Ho,Ho=e;var a=Mr;e=Ir;var u=32-Nn(a)-1;a&=~(1<<u),o+=1;var p=32-Nn(t)+u;if(30<p){var C=u-u%5;p=(a&(1<<C)-1).toString(32),a>>=C,u-=C,Mr=1<<32-Nn(t)+u|o<<u|a,Ir=p+e}else Mr=1<<p|o<<u|a,Ir=e}function Zc(e){e.return!==null&&(Go(e,1),vh(e,1,0))}function eu(e){for(;e===Qa;)Qa=Fs[--$s],Fs[$s]=null,Xa=Fs[--$s],Fs[$s]=null;for(;e===Ho;)Ho=Un[--Vn],Un[Vn]=null,Ir=Un[--Vn],Un[Vn]=null,Mr=Un[--Vn],Un[Vn]=null}var Mn=null,In=null,Mt=!1,tr=null;function yh(e,t){var o=Yn(5,null,null,0);o.elementType="DELETED",o.stateNode=t,o.return=e,t=e.deletions,t===null?(e.deletions=[o],e.flags|=16):t.push(o)}function xh(e,t){switch(e.tag){case 5:var o=e.type;return t=t.nodeType!==1||o.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mn=e,In=ao(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mn=e,In=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(o=Ho!==null?{id:Mr,overflow:Ir}:null,e.memoizedState={dehydrated:t,treeContext:o,retryLane:1073741824},o=Yn(18,null,null,0),o.stateNode=t,o.return=e,e.child=o,Mn=e,In=null,!0):!1;default:return!1}}function tu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function nu(e){if(Mt){var t=In;if(t){var o=t;if(!xh(e,t)){if(tu(e))throw Error(s(418));t=ao(o.nextSibling);var a=Mn;t&&xh(e,t)?yh(a,o):(e.flags=e.flags&-4097|2,Mt=!1,Mn=e)}}else{if(tu(e))throw Error(s(418));e.flags=e.flags&-4097|2,Mt=!1,Mn=e}}}function wh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mn=e}function Ja(e){if(e!==Mn)return!1;if(!Mt)return wh(e),Mt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yc(e.type,e.memoizedProps)),t&&(t=In)){if(tu(e))throw Ch(),Error(s(418));for(;t;)yh(e,t),t=ao(t.nextSibling)}if(wh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(t===0){In=ao(e.nextSibling);break e}t--}else o!=="$"&&o!=="$!"&&o!=="$?"||t++}e=e.nextSibling}In=null}}else In=Mn?ao(e.stateNode.nextSibling):null;return!0}function Ch(){for(var e=In;e;)e=ao(e.nextSibling)}function zs(){In=Mn=null,Mt=!1}function ru(e){tr===null?tr=[e]:tr.push(e)}var Nx=F.ReactCurrentBatchConfig;function Bi(e,t,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(s(309));var a=o.stateNode}if(!a)throw Error(s(147,e));var u=a,p=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===p?t.ref:(t=function(C){var k=u.refs;C===null?delete k[p]:k[p]=C},t._stringRef=p,t)}if(typeof e!="string")throw Error(s(284));if(!o._owner)throw Error(s(290,e))}return e}function qa(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bh(e){var t=e._init;return t(e._payload)}function Sh(e){function t(V,I){if(e){var W=V.deletions;W===null?(V.deletions=[I],V.flags|=16):W.push(I)}}function o(V,I){if(!e)return null;for(;I!==null;)t(V,I),I=I.sibling;return null}function a(V,I){for(V=new Map;I!==null;)I.key!==null?V.set(I.key,I):V.set(I.index,I),I=I.sibling;return V}function u(V,I){return V=xo(V,I),V.index=0,V.sibling=null,V}function p(V,I,W){return V.index=W,e?(W=V.alternate,W!==null?(W=W.index,W<I?(V.flags|=2,I):W):(V.flags|=2,I)):(V.flags|=1048576,I)}function C(V){return e&&V.alternate===null&&(V.flags|=2),V}function k(V,I,W,Ce){return I===null||I.tag!==6?(I=Ku(W,V.mode,Ce),I.return=V,I):(I=u(I,W),I.return=V,I)}function O(V,I,W,Ce){var Ye=W.type;return Ye===z?pe(V,I,W.props.children,Ce,W.key):I!==null&&(I.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===je&&bh(Ye)===I.type)?(Ce=u(I,W.props),Ce.ref=Bi(V,I,W),Ce.return=V,Ce):(Ce=bl(W.type,W.key,W.props,null,V.mode,Ce),Ce.ref=Bi(V,I,W),Ce.return=V,Ce)}function Y(V,I,W,Ce){return I===null||I.tag!==4||I.stateNode.containerInfo!==W.containerInfo||I.stateNode.implementation!==W.implementation?(I=Qu(W,V.mode,Ce),I.return=V,I):(I=u(I,W.children||[]),I.return=V,I)}function pe(V,I,W,Ce,Ye){return I===null||I.tag!==7?(I=es(W,V.mode,Ce,Ye),I.return=V,I):(I=u(I,W),I.return=V,I)}function ve(V,I,W){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Ku(""+I,V.mode,W),I.return=V,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case M:return W=bl(I.type,I.key,I.props,null,V.mode,W),W.ref=Bi(V,null,I),W.return=V,W;case H:return I=Qu(I,V.mode,W),I.return=V,I;case je:var Ce=I._init;return ve(V,Ce(I._payload),W)}if(ke(I)||ce(I))return I=es(I,V.mode,W,null),I.return=V,I;qa(V,I)}return null}function fe(V,I,W,Ce){var Ye=I!==null?I.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Ye!==null?null:k(V,I,""+W,Ce);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case M:return W.key===Ye?O(V,I,W,Ce):null;case H:return W.key===Ye?Y(V,I,W,Ce):null;case je:return Ye=W._init,fe(V,I,Ye(W._payload),Ce)}if(ke(W)||ce(W))return Ye!==null?null:pe(V,I,W,Ce,null);qa(V,W)}return null}function _e(V,I,W,Ce,Ye){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return V=V.get(W)||null,k(I,V,""+Ce,Ye);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case M:return V=V.get(Ce.key===null?W:Ce.key)||null,O(I,V,Ce,Ye);case H:return V=V.get(Ce.key===null?W:Ce.key)||null,Y(I,V,Ce,Ye);case je:var qe=Ce._init;return _e(V,I,W,qe(Ce._payload),Ye)}if(ke(Ce)||ce(Ce))return V=V.get(W)||null,pe(I,V,Ce,Ye,null);qa(I,Ce)}return null}function Ve(V,I,W,Ce){for(var Ye=null,qe=null,Ze=I,rt=I=0,rn=null;Ze!==null&&rt<W.length;rt++){Ze.index>rt?(rn=Ze,Ze=null):rn=Ze.sibling;var mt=fe(V,Ze,W[rt],Ce);if(mt===null){Ze===null&&(Ze=rn);break}e&&Ze&&mt.alternate===null&&t(V,Ze),I=p(mt,I,rt),qe===null?Ye=mt:qe.sibling=mt,qe=mt,Ze=rn}if(rt===W.length)return o(V,Ze),Mt&&Go(V,rt),Ye;if(Ze===null){for(;rt<W.length;rt++)Ze=ve(V,W[rt],Ce),Ze!==null&&(I=p(Ze,I,rt),qe===null?Ye=Ze:qe.sibling=Ze,qe=Ze);return Mt&&Go(V,rt),Ye}for(Ze=a(V,Ze);rt<W.length;rt++)rn=_e(Ze,V,rt,W[rt],Ce),rn!==null&&(e&&rn.alternate!==null&&Ze.delete(rn.key===null?rt:rn.key),I=p(rn,I,rt),qe===null?Ye=rn:qe.sibling=rn,qe=rn);return e&&Ze.forEach(function(wo){return t(V,wo)}),Mt&&Go(V,rt),Ye}function We(V,I,W,Ce){var Ye=ce(W);if(typeof Ye!="function")throw Error(s(150));if(W=Ye.call(W),W==null)throw Error(s(151));for(var qe=Ye=null,Ze=I,rt=I=0,rn=null,mt=W.next();Ze!==null&&!mt.done;rt++,mt=W.next()){Ze.index>rt?(rn=Ze,Ze=null):rn=Ze.sibling;var wo=fe(V,Ze,mt.value,Ce);if(wo===null){Ze===null&&(Ze=rn);break}e&&Ze&&wo.alternate===null&&t(V,Ze),I=p(wo,I,rt),qe===null?Ye=wo:qe.sibling=wo,qe=wo,Ze=rn}if(mt.done)return o(V,Ze),Mt&&Go(V,rt),Ye;if(Ze===null){for(;!mt.done;rt++,mt=W.next())mt=ve(V,mt.value,Ce),mt!==null&&(I=p(mt,I,rt),qe===null?Ye=mt:qe.sibling=mt,qe=mt);return Mt&&Go(V,rt),Ye}for(Ze=a(V,Ze);!mt.done;rt++,mt=W.next())mt=_e(Ze,V,rt,mt.value,Ce),mt!==null&&(e&&mt.alternate!==null&&Ze.delete(mt.key===null?rt:mt.key),I=p(mt,I,rt),qe===null?Ye=mt:qe.sibling=mt,qe=mt);return e&&Ze.forEach(function(r0){return t(V,r0)}),Mt&&Go(V,rt),Ye}function Gt(V,I,W,Ce){if(typeof W=="object"&&W!==null&&W.type===z&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case M:e:{for(var Ye=W.key,qe=I;qe!==null;){if(qe.key===Ye){if(Ye=W.type,Ye===z){if(qe.tag===7){o(V,qe.sibling),I=u(qe,W.props.children),I.return=V,V=I;break e}}else if(qe.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===je&&bh(Ye)===qe.type){o(V,qe.sibling),I=u(qe,W.props),I.ref=Bi(V,qe,W),I.return=V,V=I;break e}o(V,qe);break}else t(V,qe);qe=qe.sibling}W.type===z?(I=es(W.props.children,V.mode,Ce,W.key),I.return=V,V=I):(Ce=bl(W.type,W.key,W.props,null,V.mode,Ce),Ce.ref=Bi(V,I,W),Ce.return=V,V=Ce)}return C(V);case H:e:{for(qe=W.key;I!==null;){if(I.key===qe)if(I.tag===4&&I.stateNode.containerInfo===W.containerInfo&&I.stateNode.implementation===W.implementation){o(V,I.sibling),I=u(I,W.children||[]),I.return=V,V=I;break e}else{o(V,I);break}else t(V,I);I=I.sibling}I=Qu(W,V.mode,Ce),I.return=V,V=I}return C(V);case je:return qe=W._init,Gt(V,I,qe(W._payload),Ce)}if(ke(W))return Ve(V,I,W,Ce);if(ce(W))return We(V,I,W,Ce);qa(V,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,I!==null&&I.tag===6?(o(V,I.sibling),I=u(I,W),I.return=V,V=I):(o(V,I),I=Ku(W,V.mode,Ce),I.return=V,V=I),C(V)):o(V,I)}return Gt}var Bs=Sh(!0),Nh=Sh(!1),Za=lo(null),el=null,Us=null,ou=null;function su(){ou=Us=el=null}function iu(e){var t=Za.current;At(Za),e._currentValue=t}function au(e,t,o){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===o)break;e=e.return}}function Vs(e,t){el=e,ou=Us=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(kn=!0),e.firstContext=null)}function Wn(e){var t=e._currentValue;if(ou!==e)if(e={context:e,memoizedValue:t,next:null},Us===null){if(el===null)throw Error(s(308));Us=e,el.dependencies={lanes:0,firstContext:e}}else Us=Us.next=e;return t}var Yo=null;function lu(e){Yo===null?Yo=[e]:Yo.push(e)}function Eh(e,t,o,a){var u=t.interleaved;return u===null?(o.next=o,lu(t)):(o.next=u.next,u.next=o),t.interleaved=o,Lr(e,a)}function Lr(e,t){e.lanes|=t;var o=e.alternate;for(o!==null&&(o.lanes|=t),o=e,e=e.return;e!==null;)e.childLanes|=t,o=e.alternate,o!==null&&(o.childLanes|=t),o=e,e=e.return;return o.tag===3?o.stateNode:null}var fo=!1;function cu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ho(e,t,o){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(pt&2)!==0){var u=a.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),a.pending=t,Lr(e,o)}return u=a.interleaved,u===null?(t.next=t,lu(a)):(t.next=u.next,u.next=t),a.interleaved=t,Lr(e,o)}function tl(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,o|=a,t.lanes=o,bi(e,o)}}function kh(e,t){var o=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var u=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var C={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?u=p=C:p=p.next=C,o=o.next}while(o!==null);p===null?u=p=t:p=p.next=t}else u=p=t;o={baseState:a.baseState,firstBaseUpdate:u,lastBaseUpdate:p,shared:a.shared,effects:a.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}function nl(e,t,o,a){var u=e.updateQueue;fo=!1;var p=u.firstBaseUpdate,C=u.lastBaseUpdate,k=u.shared.pending;if(k!==null){u.shared.pending=null;var O=k,Y=O.next;O.next=null,C===null?p=Y:C.next=Y,C=O;var pe=e.alternate;pe!==null&&(pe=pe.updateQueue,k=pe.lastBaseUpdate,k!==C&&(k===null?pe.firstBaseUpdate=Y:k.next=Y,pe.lastBaseUpdate=O))}if(p!==null){var ve=u.baseState;C=0,pe=Y=O=null,k=p;do{var fe=k.lane,_e=k.eventTime;if((a&fe)===fe){pe!==null&&(pe=pe.next={eventTime:_e,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var Ve=e,We=k;switch(fe=t,_e=o,We.tag){case 1:if(Ve=We.payload,typeof Ve=="function"){ve=Ve.call(_e,ve,fe);break e}ve=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=We.payload,fe=typeof Ve=="function"?Ve.call(_e,ve,fe):Ve,fe==null)break e;ve=ue({},ve,fe);break e;case 2:fo=!0}}k.callback!==null&&k.lane!==0&&(e.flags|=64,fe=u.effects,fe===null?u.effects=[k]:fe.push(k))}else _e={eventTime:_e,lane:fe,tag:k.tag,payload:k.payload,callback:k.callback,next:null},pe===null?(Y=pe=_e,O=ve):pe=pe.next=_e,C|=fe;if(k=k.next,k===null){if(k=u.shared.pending,k===null)break;fe=k,k=fe.next,fe.next=null,u.lastBaseUpdate=fe,u.shared.pending=null}}while(!0);if(pe===null&&(O=ve),u.baseState=O,u.firstBaseUpdate=Y,u.lastBaseUpdate=pe,t=u.shared.interleaved,t!==null){u=t;do C|=u.lane,u=u.next;while(u!==t)}else p===null&&(u.shared.lanes=0);Xo|=C,e.lanes=C,e.memoizedState=ve}}function Th(e,t,o){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],u=a.callback;if(u!==null){if(a.callback=null,a=o,typeof u!="function")throw Error(s(191,u));u.call(a)}}}var Ui={},xr=lo(Ui),Vi=lo(Ui),Wi=lo(Ui);function Ko(e){if(e===Ui)throw Error(s(174));return e}function uu(e,t){switch(jt(Wi,t),jt(Vi,e),jt(xr,Ui),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Nt(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Nt(t,e)}At(xr),jt(xr,t)}function Ws(){At(xr),At(Vi),At(Wi)}function Rh(e){Ko(Wi.current);var t=Ko(xr.current),o=Nt(t,e.type);t!==o&&(jt(Vi,e),jt(xr,o))}function du(e){Vi.current===e&&(At(xr),At(Vi))}var Lt=lo(0);function rl(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fu=[];function hu(){for(var e=0;e<fu.length;e++)fu[e]._workInProgressVersionPrimary=null;fu.length=0}var ol=F.ReactCurrentDispatcher,pu=F.ReactCurrentBatchConfig,Qo=0,Ft=null,Jt=null,tn=null,sl=!1,Hi=!1,Gi=0,Ex=0;function fn(){throw Error(s(321))}function mu(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!er(e[o],t[o]))return!1;return!0}function gu(e,t,o,a,u,p){if(Qo=p,Ft=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ol.current=e===null||e.memoizedState===null?Rx:Ax,e=o(a,u),Hi){p=0;do{if(Hi=!1,Gi=0,25<=p)throw Error(s(301));p+=1,tn=Jt=null,t.updateQueue=null,ol.current=Dx,e=o(a,u)}while(Hi)}if(ol.current=ll,t=Jt!==null&&Jt.next!==null,Qo=0,tn=Jt=Ft=null,sl=!1,t)throw Error(s(300));return e}function vu(){var e=Gi!==0;return Gi=0,e}function wr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Ft.memoizedState=tn=e:tn=tn.next=e,tn}function Hn(){if(Jt===null){var e=Ft.alternate;e=e!==null?e.memoizedState:null}else e=Jt.next;var t=tn===null?Ft.memoizedState:tn.next;if(t!==null)tn=t,Jt=e;else{if(e===null)throw Error(s(310));Jt=e,e={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},tn===null?Ft.memoizedState=tn=e:tn=tn.next=e}return tn}function Yi(e,t){return typeof t=="function"?t(e):t}function yu(e){var t=Hn(),o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var a=Jt,u=a.baseQueue,p=o.pending;if(p!==null){if(u!==null){var C=u.next;u.next=p.next,p.next=C}a.baseQueue=u=p,o.pending=null}if(u!==null){p=u.next,a=a.baseState;var k=C=null,O=null,Y=p;do{var pe=Y.lane;if((Qo&pe)===pe)O!==null&&(O=O.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),a=Y.hasEagerState?Y.eagerState:e(a,Y.action);else{var ve={lane:pe,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};O===null?(k=O=ve,C=a):O=O.next=ve,Ft.lanes|=pe,Xo|=pe}Y=Y.next}while(Y!==null&&Y!==p);O===null?C=a:O.next=k,er(a,t.memoizedState)||(kn=!0),t.memoizedState=a,t.baseState=C,t.baseQueue=O,o.lastRenderedState=a}if(e=o.interleaved,e!==null){u=e;do p=u.lane,Ft.lanes|=p,Xo|=p,u=u.next;while(u!==e)}else u===null&&(o.lanes=0);return[t.memoizedState,o.dispatch]}function xu(e){var t=Hn(),o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var a=o.dispatch,u=o.pending,p=t.memoizedState;if(u!==null){o.pending=null;var C=u=u.next;do p=e(p,C.action),C=C.next;while(C!==u);er(p,t.memoizedState)||(kn=!0),t.memoizedState=p,t.baseQueue===null&&(t.baseState=p),o.lastRenderedState=p}return[p,a]}function Ah(){}function Dh(e,t){var o=Ft,a=Hn(),u=t(),p=!er(a.memoizedState,u);if(p&&(a.memoizedState=u,kn=!0),a=a.queue,wu(_h.bind(null,o,a,e),[e]),a.getSnapshot!==t||p||tn!==null&&tn.memoizedState.tag&1){if(o.flags|=2048,Ki(9,Oh.bind(null,o,a,u,t),void 0,null),nn===null)throw Error(s(349));(Qo&30)!==0||Ph(o,t,u)}return u}function Ph(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function Oh(e,t,o,a){t.value=o,t.getSnapshot=a,Mh(t)&&Ih(e)}function _h(e,t,o){return o(function(){Mh(t)&&Ih(e)})}function Mh(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!er(e,o)}catch{return!0}}function Ih(e){var t=Lr(e,1);t!==null&&sr(t,e,1,-1)}function Lh(e){var t=wr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:e},t.queue=e,e=e.dispatch=Tx.bind(null,Ft,e),[t.memoizedState,e]}function Ki(e,t,o,a){return e={tag:e,create:t,destroy:o,deps:a,next:null},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.lastEffect=e.next=e):(o=t.lastEffect,o===null?t.lastEffect=e.next=e:(a=o.next,o.next=e,e.next=a,t.lastEffect=e)),e}function Fh(){return Hn().memoizedState}function il(e,t,o,a){var u=wr();Ft.flags|=e,u.memoizedState=Ki(1|t,o,void 0,a===void 0?null:a)}function al(e,t,o,a){var u=Hn();a=a===void 0?null:a;var p=void 0;if(Jt!==null){var C=Jt.memoizedState;if(p=C.destroy,a!==null&&mu(a,C.deps)){u.memoizedState=Ki(t,o,p,a);return}}Ft.flags|=e,u.memoizedState=Ki(1|t,o,p,a)}function $h(e,t){return il(8390656,8,e,t)}function wu(e,t){return al(2048,8,e,t)}function zh(e,t){return al(4,2,e,t)}function Bh(e,t){return al(4,4,e,t)}function Uh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vh(e,t,o){return o=o!=null?o.concat([e]):null,al(4,4,Uh.bind(null,t,e),o)}function Cu(){}function Wh(e,t){var o=Hn();t=t===void 0?null:t;var a=o.memoizedState;return a!==null&&t!==null&&mu(t,a[1])?a[0]:(o.memoizedState=[e,t],e)}function Hh(e,t){var o=Hn();t=t===void 0?null:t;var a=o.memoizedState;return a!==null&&t!==null&&mu(t,a[1])?a[0]:(e=e(),o.memoizedState=[e,t],e)}function Gh(e,t,o){return(Qo&21)===0?(e.baseState&&(e.baseState=!1,kn=!0),e.memoizedState=o):(er(o,t)||(o=Cs(),Ft.lanes|=o,Xo|=o,e.baseState=!0),t)}function jx(e,t){var o=ht;ht=o!==0&&4>o?o:4,e(!0);var a=pu.transition;pu.transition={};try{e(!1),t()}finally{ht=o,pu.transition=a}}function Yh(){return Hn().memoizedState}function kx(e,t,o){var a=vo(e);if(o={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null},Kh(e))Qh(t,o);else if(o=Eh(e,t,o,a),o!==null){var u=yn();sr(o,e,a,u),Xh(o,t,a)}}function Tx(e,t,o){var a=vo(e),u={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null};if(Kh(e))Qh(t,u);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=t.lastRenderedReducer,p!==null))try{var C=t.lastRenderedState,k=p(C,o);if(u.hasEagerState=!0,u.eagerState=k,er(k,C)){var O=t.interleaved;O===null?(u.next=u,lu(t)):(u.next=O.next,O.next=u),t.interleaved=u;return}}catch{}finally{}o=Eh(e,t,u,a),o!==null&&(u=yn(),sr(o,e,a,u),Xh(o,t,a))}}function Kh(e){var t=e.alternate;return e===Ft||t!==null&&t===Ft}function Qh(e,t){Hi=sl=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function Xh(e,t,o){if((o&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,o|=a,t.lanes=o,bi(e,o)}}var ll={readContext:Wn,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},Rx={readContext:Wn,useCallback:function(e,t){return wr().memoizedState=[e,t===void 0?null:t],e},useContext:Wn,useEffect:$h,useImperativeHandle:function(e,t,o){return o=o!=null?o.concat([e]):null,il(4194308,4,Uh.bind(null,t,e),o)},useLayoutEffect:function(e,t){return il(4194308,4,e,t)},useInsertionEffect:function(e,t){return il(4,2,e,t)},useMemo:function(e,t){var o=wr();return t=t===void 0?null:t,e=e(),o.memoizedState=[e,t],e},useReducer:function(e,t,o){var a=wr();return t=o!==void 0?o(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=kx.bind(null,Ft,e),[a.memoizedState,e]},useRef:function(e){var t=wr();return e={current:e},t.memoizedState=e},useState:Lh,useDebugValue:Cu,useDeferredValue:function(e){return wr().memoizedState=e},useTransition:function(){var e=Lh(!1),t=e[0];return e=jx.bind(null,e[1]),wr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,o){var a=Ft,u=wr();if(Mt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=t(),nn===null)throw Error(s(349));(Qo&30)!==0||Ph(a,t,o)}u.memoizedState=o;var p={value:o,getSnapshot:t};return u.queue=p,$h(_h.bind(null,a,p,e),[e]),a.flags|=2048,Ki(9,Oh.bind(null,a,p,o,t),void 0,null),o},useId:function(){var e=wr(),t=nn.identifierPrefix;if(Mt){var o=Ir,a=Mr;o=(a&~(1<<32-Nn(a)-1)).toString(32)+o,t=":"+t+"R"+o,o=Gi++,0<o&&(t+="H"+o.toString(32)),t+=":"}else o=Ex++,t=":"+t+"r"+o.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ax={readContext:Wn,useCallback:Wh,useContext:Wn,useEffect:wu,useImperativeHandle:Vh,useInsertionEffect:zh,useLayoutEffect:Bh,useMemo:Hh,useReducer:yu,useRef:Fh,useState:function(){return yu(Yi)},useDebugValue:Cu,useDeferredValue:function(e){var t=Hn();return Gh(t,Jt.memoizedState,e)},useTransition:function(){var e=yu(Yi)[0],t=Hn().memoizedState;return[e,t]},useMutableSource:Ah,useSyncExternalStore:Dh,useId:Yh,unstable_isNewReconciler:!1},Dx={readContext:Wn,useCallback:Wh,useContext:Wn,useEffect:wu,useImperativeHandle:Vh,useInsertionEffect:zh,useLayoutEffect:Bh,useMemo:Hh,useReducer:xu,useRef:Fh,useState:function(){return xu(Yi)},useDebugValue:Cu,useDeferredValue:function(e){var t=Hn();return Jt===null?t.memoizedState=e:Gh(t,Jt.memoizedState,e)},useTransition:function(){var e=xu(Yi)[0],t=Hn().memoizedState;return[e,t]},useMutableSource:Ah,useSyncExternalStore:Dh,useId:Yh,unstable_isNewReconciler:!1};function nr(e,t){if(e&&e.defaultProps){t=ue({},t),e=e.defaultProps;for(var o in e)t[o]===void 0&&(t[o]=e[o]);return t}return t}function bu(e,t,o,a){t=e.memoizedState,o=o(a,t),o=o==null?t:ue({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var cl={isMounted:function(e){return(e=e._reactInternals)?On(e)===e:!1},enqueueSetState:function(e,t,o){e=e._reactInternals;var a=yn(),u=vo(e),p=Fr(a,u);p.payload=t,o!=null&&(p.callback=o),t=ho(e,p,u),t!==null&&(sr(t,e,u,a),tl(t,e,u))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var a=yn(),u=vo(e),p=Fr(a,u);p.tag=1,p.payload=t,o!=null&&(p.callback=o),t=ho(e,p,u),t!==null&&(sr(t,e,u,a),tl(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=yn(),a=vo(e),u=Fr(o,a);u.tag=2,t!=null&&(u.callback=t),t=ho(e,u,a),t!==null&&(sr(t,e,a,o),tl(t,e,a))}};function Jh(e,t,o,a,u,p,C){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,p,C):t.prototype&&t.prototype.isPureReactComponent?!_i(o,a)||!_i(u,p):!0}function qh(e,t,o){var a=!1,u=co,p=t.contextType;return typeof p=="object"&&p!==null?p=Wn(p):(u=jn(t)?Wo:dn.current,a=t.contextTypes,p=(a=a!=null)?Ls(e,u):co),t=new t(o,p),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cl,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=p),t}function Zh(e,t,o,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,a),t.state!==e&&cl.enqueueReplaceState(t,t.state,null)}function Su(e,t,o,a){var u=e.stateNode;u.props=o,u.state=e.memoizedState,u.refs={},cu(e);var p=t.contextType;typeof p=="object"&&p!==null?u.context=Wn(p):(p=jn(t)?Wo:dn.current,u.context=Ls(e,p)),u.state=e.memoizedState,p=t.getDerivedStateFromProps,typeof p=="function"&&(bu(e,t,p,o),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&cl.enqueueReplaceState(u,u.state,null),nl(e,o,u,a),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Hs(e,t){try{var o="",a=t;do o+=Pe(a),a=a.return;while(a);var u=o}catch(p){u=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:t,stack:u,digest:null}}function Nu(e,t,o){return{value:e,source:null,stack:o??null,digest:t??null}}function Eu(e,t){try{console.error(t.value)}catch(o){setTimeout(function(){throw o})}}var Px=typeof WeakMap=="function"?WeakMap:Map;function ep(e,t,o){o=Fr(-1,o),o.tag=3,o.payload={element:null};var a=t.value;return o.callback=function(){gl||(gl=!0,zu=a),Eu(e,t)},o}function tp(e,t,o){o=Fr(-1,o),o.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var u=t.value;o.payload=function(){return a(u)},o.callback=function(){Eu(e,t)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){Eu(e,t),typeof a!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var C=t.stack;this.componentDidCatch(t.value,{componentStack:C!==null?C:""})}),o}function np(e,t,o){var a=e.pingCache;if(a===null){a=e.pingCache=new Px;var u=new Set;a.set(t,u)}else u=a.get(t),u===void 0&&(u=new Set,a.set(t,u));u.has(o)||(u.add(o),e=Gx.bind(null,e,t,o),t.then(e,e))}function rp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function op(e,t,o,a,u){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(t=Fr(-1,1),t.tag=2,ho(o,t,1))),o.lanes|=1),e):(e.flags|=65536,e.lanes=u,e)}var Ox=F.ReactCurrentOwner,kn=!1;function vn(e,t,o,a){t.child=e===null?Nh(t,null,o,a):Bs(t,e.child,o,a)}function sp(e,t,o,a,u){o=o.render;var p=t.ref;return Vs(t,u),a=gu(e,t,o,a,p,u),o=vu(),e!==null&&!kn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,$r(e,t,u)):(Mt&&o&&Zc(t),t.flags|=1,vn(e,t,a,u),t.child)}function ip(e,t,o,a,u){if(e===null){var p=o.type;return typeof p=="function"&&!Yu(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(t.tag=15,t.type=p,ap(e,t,p,a,u)):(e=bl(o.type,null,a,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(p=e.child,(e.lanes&u)===0){var C=p.memoizedProps;if(o=o.compare,o=o!==null?o:_i,o(C,a)&&e.ref===t.ref)return $r(e,t,u)}return t.flags|=1,e=xo(p,a),e.ref=t.ref,e.return=t,t.child=e}function ap(e,t,o,a,u){if(e!==null){var p=e.memoizedProps;if(_i(p,a)&&e.ref===t.ref)if(kn=!1,t.pendingProps=a=p,(e.lanes&u)!==0)(e.flags&131072)!==0&&(kn=!0);else return t.lanes=e.lanes,$r(e,t,u)}return ju(e,t,o,a,u)}function lp(e,t,o){var a=t.pendingProps,u=a.children,p=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},jt(Ys,Ln),Ln|=o;else{if((o&1073741824)===0)return e=p!==null?p.baseLanes|o:o,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,jt(Ys,Ln),Ln|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=p!==null?p.baseLanes:o,jt(Ys,Ln),Ln|=a}else p!==null?(a=p.baseLanes|o,t.memoizedState=null):a=o,jt(Ys,Ln),Ln|=a;return vn(e,t,u,o),t.child}function cp(e,t){var o=t.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(t.flags|=512,t.flags|=2097152)}function ju(e,t,o,a,u){var p=jn(o)?Wo:dn.current;return p=Ls(t,p),Vs(t,u),o=gu(e,t,o,a,p,u),a=vu(),e!==null&&!kn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,$r(e,t,u)):(Mt&&a&&Zc(t),t.flags|=1,vn(e,t,o,u),t.child)}function up(e,t,o,a,u){if(jn(o)){var p=!0;Ya(t)}else p=!1;if(Vs(t,u),t.stateNode===null)dl(e,t),qh(t,o,a),Su(t,o,a,u),a=!0;else if(e===null){var C=t.stateNode,k=t.memoizedProps;C.props=k;var O=C.context,Y=o.contextType;typeof Y=="object"&&Y!==null?Y=Wn(Y):(Y=jn(o)?Wo:dn.current,Y=Ls(t,Y));var pe=o.getDerivedStateFromProps,ve=typeof pe=="function"||typeof C.getSnapshotBeforeUpdate=="function";ve||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(k!==a||O!==Y)&&Zh(t,C,a,Y),fo=!1;var fe=t.memoizedState;C.state=fe,nl(t,a,C,u),O=t.memoizedState,k!==a||fe!==O||En.current||fo?(typeof pe=="function"&&(bu(t,o,pe,a),O=t.memoizedState),(k=fo||Jh(t,o,k,a,fe,O,Y))?(ve||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(t.flags|=4194308)):(typeof C.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=O),C.props=a,C.state=O,C.context=Y,a=k):(typeof C.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{C=t.stateNode,jh(e,t),k=t.memoizedProps,Y=t.type===t.elementType?k:nr(t.type,k),C.props=Y,ve=t.pendingProps,fe=C.context,O=o.contextType,typeof O=="object"&&O!==null?O=Wn(O):(O=jn(o)?Wo:dn.current,O=Ls(t,O));var _e=o.getDerivedStateFromProps;(pe=typeof _e=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(k!==ve||fe!==O)&&Zh(t,C,a,O),fo=!1,fe=t.memoizedState,C.state=fe,nl(t,a,C,u);var Ve=t.memoizedState;k!==ve||fe!==Ve||En.current||fo?(typeof _e=="function"&&(bu(t,o,_e,a),Ve=t.memoizedState),(Y=fo||Jh(t,o,Y,a,fe,Ve,O)||!1)?(pe||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(a,Ve,O),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(a,Ve,O)),typeof C.componentDidUpdate=="function"&&(t.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof C.componentDidUpdate!="function"||k===e.memoizedProps&&fe===e.memoizedState||(t.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||k===e.memoizedProps&&fe===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=Ve),C.props=a,C.state=Ve,C.context=O,a=Y):(typeof C.componentDidUpdate!="function"||k===e.memoizedProps&&fe===e.memoizedState||(t.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||k===e.memoizedProps&&fe===e.memoizedState||(t.flags|=1024),a=!1)}return ku(e,t,o,a,p,u)}function ku(e,t,o,a,u,p){cp(e,t);var C=(t.flags&128)!==0;if(!a&&!C)return u&&mh(t,o,!1),$r(e,t,p);a=t.stateNode,Ox.current=t;var k=C&&typeof o.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&C?(t.child=Bs(t,e.child,null,p),t.child=Bs(t,null,k,p)):vn(e,t,k,p),t.memoizedState=a.state,u&&mh(t,o,!0),t.child}function dp(e){var t=e.stateNode;t.pendingContext?hh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&hh(e,t.context,!1),uu(e,t.containerInfo)}function fp(e,t,o,a,u){return zs(),ru(u),t.flags|=256,vn(e,t,o,a),t.child}var Tu={dehydrated:null,treeContext:null,retryLane:0};function Ru(e){return{baseLanes:e,cachePool:null,transitions:null}}function hp(e,t,o){var a=t.pendingProps,u=Lt.current,p=!1,C=(t.flags&128)!==0,k;if((k=C)||(k=e!==null&&e.memoizedState===null?!1:(u&2)!==0),k?(p=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),jt(Lt,u&1),e===null)return nu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(C=a.children,e=a.fallback,p?(a=t.mode,p=t.child,C={mode:"hidden",children:C},(a&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=C):p=Sl(C,a,0,null),e=es(e,a,o,null),p.return=t,e.return=t,p.sibling=e,t.child=p,t.child.memoizedState=Ru(o),t.memoizedState=Tu,e):Au(t,C));if(u=e.memoizedState,u!==null&&(k=u.dehydrated,k!==null))return _x(e,t,C,a,k,u,o);if(p){p=a.fallback,C=t.mode,u=e.child,k=u.sibling;var O={mode:"hidden",children:a.children};return(C&1)===0&&t.child!==u?(a=t.child,a.childLanes=0,a.pendingProps=O,t.deletions=null):(a=xo(u,O),a.subtreeFlags=u.subtreeFlags&14680064),k!==null?p=xo(k,p):(p=es(p,C,o,null),p.flags|=2),p.return=t,a.return=t,a.sibling=p,t.child=a,a=p,p=t.child,C=e.child.memoizedState,C=C===null?Ru(o):{baseLanes:C.baseLanes|o,cachePool:null,transitions:C.transitions},p.memoizedState=C,p.childLanes=e.childLanes&~o,t.memoizedState=Tu,a}return p=e.child,e=p.sibling,a=xo(p,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=o),a.return=t,a.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=a,t.memoizedState=null,a}function Au(e,t){return t=Sl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ul(e,t,o,a){return a!==null&&ru(a),Bs(t,e.child,null,o),e=Au(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _x(e,t,o,a,u,p,C){if(o)return t.flags&256?(t.flags&=-257,a=Nu(Error(s(422))),ul(e,t,C,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(p=a.fallback,u=t.mode,a=Sl({mode:"visible",children:a.children},u,0,null),p=es(p,u,C,null),p.flags|=2,a.return=t,p.return=t,a.sibling=p,t.child=a,(t.mode&1)!==0&&Bs(t,e.child,null,C),t.child.memoizedState=Ru(C),t.memoizedState=Tu,p);if((t.mode&1)===0)return ul(e,t,C,null);if(u.data==="$!"){if(a=u.nextSibling&&u.nextSibling.dataset,a)var k=a.dgst;return a=k,p=Error(s(419)),a=Nu(p,a,void 0),ul(e,t,C,a)}if(k=(C&e.childLanes)!==0,kn||k){if(a=nn,a!==null){switch(C&-C){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(a.suspendedLanes|C))!==0?0:u,u!==0&&u!==p.retryLane&&(p.retryLane=u,Lr(e,u),sr(a,e,u,-1))}return Gu(),a=Nu(Error(s(421))),ul(e,t,C,a)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=Yx.bind(null,e),u._reactRetry=t,null):(e=p.treeContext,In=ao(u.nextSibling),Mn=t,Mt=!0,tr=null,e!==null&&(Un[Vn++]=Mr,Un[Vn++]=Ir,Un[Vn++]=Ho,Mr=e.id,Ir=e.overflow,Ho=t),t=Au(t,a.children),t.flags|=4096,t)}function pp(e,t,o){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),au(e.return,t,o)}function Du(e,t,o,a,u){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:u}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=a,p.tail=o,p.tailMode=u)}function mp(e,t,o){var a=t.pendingProps,u=a.revealOrder,p=a.tail;if(vn(e,t,a.children,o),a=Lt.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pp(e,o,t);else if(e.tag===19)pp(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(jt(Lt,a),(t.mode&1)===0)t.memoizedState=null;else switch(u){case"forwards":for(o=t.child,u=null;o!==null;)e=o.alternate,e!==null&&rl(e)===null&&(u=o),o=o.sibling;o=u,o===null?(u=t.child,t.child=null):(u=o.sibling,o.sibling=null),Du(t,!1,u,o,p);break;case"backwards":for(o=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&rl(e)===null){t.child=u;break}e=u.sibling,u.sibling=o,o=u,u=e}Du(t,!0,o,null,p);break;case"together":Du(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function dl(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $r(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),Xo|=t.lanes,(o&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,o=xo(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=xo(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function Mx(e,t,o){switch(t.tag){case 3:dp(t),zs();break;case 5:Rh(t);break;case 1:jn(t.type)&&Ya(t);break;case 4:uu(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,u=t.memoizedProps.value;jt(Za,a._currentValue),a._currentValue=u;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(jt(Lt,Lt.current&1),t.flags|=128,null):(o&t.child.childLanes)!==0?hp(e,t,o):(jt(Lt,Lt.current&1),e=$r(e,t,o),e!==null?e.sibling:null);jt(Lt,Lt.current&1);break;case 19:if(a=(o&t.childLanes)!==0,(e.flags&128)!==0){if(a)return mp(e,t,o);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),jt(Lt,Lt.current),a)break;return null;case 22:case 23:return t.lanes=0,lp(e,t,o)}return $r(e,t,o)}var gp,Pu,vp,yp;gp=function(e,t){for(var o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Pu=function(){},vp=function(e,t,o,a){var u=e.memoizedProps;if(u!==a){e=t.stateNode,Ko(xr.current);var p=null;switch(o){case"input":u=it(e,u),a=it(e,a),p=[];break;case"select":u=ue({},u,{value:void 0}),a=ue({},a,{value:void 0}),p=[];break;case"textarea":u=tt(e,u),a=tt(e,a),p=[];break;default:typeof u.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Wa)}en(o,a);var C;o=null;for(Y in u)if(!a.hasOwnProperty(Y)&&u.hasOwnProperty(Y)&&u[Y]!=null)if(Y==="style"){var k=u[Y];for(C in k)k.hasOwnProperty(C)&&(o||(o={}),o[C]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(c.hasOwnProperty(Y)?p||(p=[]):(p=p||[]).push(Y,null));for(Y in a){var O=a[Y];if(k=u?.[Y],a.hasOwnProperty(Y)&&O!==k&&(O!=null||k!=null))if(Y==="style")if(k){for(C in k)!k.hasOwnProperty(C)||O&&O.hasOwnProperty(C)||(o||(o={}),o[C]="");for(C in O)O.hasOwnProperty(C)&&k[C]!==O[C]&&(o||(o={}),o[C]=O[C])}else o||(p||(p=[]),p.push(Y,o)),o=O;else Y==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,k=k?k.__html:void 0,O!=null&&k!==O&&(p=p||[]).push(Y,O)):Y==="children"?typeof O!="string"&&typeof O!="number"||(p=p||[]).push(Y,""+O):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(c.hasOwnProperty(Y)?(O!=null&&Y==="onScroll"&&Rt("scroll",e),p||k===O||(p=[])):(p=p||[]).push(Y,O))}o&&(p=p||[]).push("style",o);var Y=p;(t.updateQueue=Y)&&(t.flags|=4)}},yp=function(e,t,o,a){o!==a&&(t.flags|=4)};function Qi(e,t){if(!Mt)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function hn(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,a=0;if(t)for(var u=e.child;u!==null;)o|=u.lanes|u.childLanes,a|=u.subtreeFlags&14680064,a|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)o|=u.lanes|u.childLanes,a|=u.subtreeFlags,a|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=a,e.childLanes=o,t}function Ix(e,t,o){var a=t.pendingProps;switch(eu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(t),null;case 1:return jn(t.type)&&Ga(),hn(t),null;case 3:return a=t.stateNode,Ws(),At(En),At(dn),hu(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ja(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,tr!==null&&(Vu(tr),tr=null))),Pu(e,t),hn(t),null;case 5:du(t);var u=Ko(Wi.current);if(o=t.type,e!==null&&t.stateNode!=null)vp(e,t,o,a,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(s(166));return hn(t),null}if(e=Ko(xr.current),Ja(t)){a=t.stateNode,o=t.type;var p=t.memoizedProps;switch(a[yr]=t,a[$i]=p,e=(t.mode&1)!==0,o){case"dialog":Rt("cancel",a),Rt("close",a);break;case"iframe":case"object":case"embed":Rt("load",a);break;case"video":case"audio":for(u=0;u<Ii.length;u++)Rt(Ii[u],a);break;case"source":Rt("error",a);break;case"img":case"image":case"link":Rt("error",a),Rt("load",a);break;case"details":Rt("toggle",a);break;case"input":ut(a,p),Rt("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!p.multiple},Rt("invalid",a);break;case"textarea":xt(a,p),Rt("invalid",a)}en(o,p),u=null;for(var C in p)if(p.hasOwnProperty(C)){var k=p[C];C==="children"?typeof k=="string"?a.textContent!==k&&(p.suppressHydrationWarning!==!0&&Va(a.textContent,k,e),u=["children",k]):typeof k=="number"&&a.textContent!==""+k&&(p.suppressHydrationWarning!==!0&&Va(a.textContent,k,e),u=["children",""+k]):c.hasOwnProperty(C)&&k!=null&&C==="onScroll"&&Rt("scroll",a)}switch(o){case"input":Ke(a),Je(a,p,!0);break;case"textarea":Ke(a),ot(a);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(a.onclick=Wa)}a=u,t.updateQueue=a,a!==null&&(t.flags|=4)}else{C=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Vt(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=C.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=C.createElement(o,{is:a.is}):(e=C.createElement(o),o==="select"&&(C=e,a.multiple?C.multiple=!0:a.size&&(C.size=a.size))):e=C.createElementNS(e,o),e[yr]=t,e[$i]=a,gp(e,t,!1,!1),t.stateNode=e;e:{switch(C=Sn(o,a),o){case"dialog":Rt("cancel",e),Rt("close",e),u=a;break;case"iframe":case"object":case"embed":Rt("load",e),u=a;break;case"video":case"audio":for(u=0;u<Ii.length;u++)Rt(Ii[u],e);u=a;break;case"source":Rt("error",e),u=a;break;case"img":case"image":case"link":Rt("error",e),Rt("load",e),u=a;break;case"details":Rt("toggle",e),u=a;break;case"input":ut(e,a),u=it(e,a),Rt("invalid",e);break;case"option":u=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},u=ue({},a,{value:void 0}),Rt("invalid",e);break;case"textarea":xt(e,a),u=tt(e,a),Rt("invalid",e);break;default:u=a}en(o,u),k=u;for(p in k)if(k.hasOwnProperty(p)){var O=k[p];p==="style"?bn(e,O):p==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&$t(e,O)):p==="children"?typeof O=="string"?(o!=="textarea"||O!=="")&&It(e,O):typeof O=="number"&&It(e,""+O):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(c.hasOwnProperty(p)?O!=null&&p==="onScroll"&&Rt("scroll",e):O!=null&&L(e,p,O,C))}switch(o){case"input":Ke(e),Je(e,a,!1);break;case"textarea":Ke(e),ot(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Re(a.value));break;case"select":e.multiple=!!a.multiple,p=a.value,p!=null?He(e,!!a.multiple,p,!1):a.defaultValue!=null&&He(e,!!a.multiple,a.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Wa)}switch(o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return hn(t),null;case 6:if(e&&t.stateNode!=null)yp(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(o=Ko(Wi.current),Ko(xr.current),Ja(t)){if(a=t.stateNode,o=t.memoizedProps,a[yr]=t,(p=a.nodeValue!==o)&&(e=Mn,e!==null))switch(e.tag){case 3:Va(a.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Va(a.nodeValue,o,(e.mode&1)!==0)}p&&(t.flags|=4)}else a=(o.nodeType===9?o:o.ownerDocument).createTextNode(a),a[yr]=t,t.stateNode=a}return hn(t),null;case 13:if(At(Lt),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Mt&&In!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Ch(),zs(),t.flags|=98560,p=!1;else if(p=Ja(t),a!==null&&a.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[yr]=t}else zs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;hn(t),p=!1}else tr!==null&&(Vu(tr),tr=null),p=!0;if(!p)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=o,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Lt.current&1)!==0?qt===0&&(qt=3):Gu())),t.updateQueue!==null&&(t.flags|=4),hn(t),null);case 4:return Ws(),Pu(e,t),e===null&&Li(t.stateNode.containerInfo),hn(t),null;case 10:return iu(t.type._context),hn(t),null;case 17:return jn(t.type)&&Ga(),hn(t),null;case 19:if(At(Lt),p=t.memoizedState,p===null)return hn(t),null;if(a=(t.flags&128)!==0,C=p.rendering,C===null)if(a)Qi(p,!1);else{if(qt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(C=rl(e),C!==null){for(t.flags|=128,Qi(p,!1),a=C.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=o,o=t.child;o!==null;)p=o,e=a,p.flags&=14680066,C=p.alternate,C===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=C.childLanes,p.lanes=C.lanes,p.child=C.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=C.memoizedProps,p.memoizedState=C.memoizedState,p.updateQueue=C.updateQueue,p.type=C.type,e=C.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return jt(Lt,Lt.current&1|2),t.child}e=e.sibling}p.tail!==null&&Tt()>Ks&&(t.flags|=128,a=!0,Qi(p,!1),t.lanes=4194304)}else{if(!a)if(e=rl(C),e!==null){if(t.flags|=128,a=!0,o=e.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),Qi(p,!0),p.tail===null&&p.tailMode==="hidden"&&!C.alternate&&!Mt)return hn(t),null}else 2*Tt()-p.renderingStartTime>Ks&&o!==1073741824&&(t.flags|=128,a=!0,Qi(p,!1),t.lanes=4194304);p.isBackwards?(C.sibling=t.child,t.child=C):(o=p.last,o!==null?o.sibling=C:t.child=C,p.last=C)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=Tt(),t.sibling=null,o=Lt.current,jt(Lt,a?o&1|2:o&1),t):(hn(t),null);case 22:case 23:return Hu(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(Ln&1073741824)!==0&&(hn(t),t.subtreeFlags&6&&(t.flags|=8192)):hn(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function Lx(e,t){switch(eu(t),t.tag){case 1:return jn(t.type)&&Ga(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ws(),At(En),At(dn),hu(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return du(t),null;case 13:if(At(Lt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));zs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return At(Lt),null;case 4:return Ws(),null;case 10:return iu(t.type._context),null;case 22:case 23:return Hu(),null;case 24:return null;default:return null}}var fl=!1,pn=!1,Fx=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Gs(e,t){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(a){Bt(e,t,a)}else o.current=null}function Ou(e,t,o){try{o()}catch(a){Bt(e,t,a)}}var xp=!1;function $x(e,t){if(Hc=js,e=Jf(),Lc(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var a=o.getSelection&&o.getSelection();if(a&&a.rangeCount!==0){o=a.anchorNode;var u=a.anchorOffset,p=a.focusNode;a=a.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var C=0,k=-1,O=-1,Y=0,pe=0,ve=e,fe=null;t:for(;;){for(var _e;ve!==o||u!==0&&ve.nodeType!==3||(k=C+u),ve!==p||a!==0&&ve.nodeType!==3||(O=C+a),ve.nodeType===3&&(C+=ve.nodeValue.length),(_e=ve.firstChild)!==null;)fe=ve,ve=_e;for(;;){if(ve===e)break t;if(fe===o&&++Y===u&&(k=C),fe===p&&++pe===a&&(O=C),(_e=ve.nextSibling)!==null)break;ve=fe,fe=ve.parentNode}ve=_e}o=k===-1||O===-1?null:{start:k,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(Gc={focusedElem:e,selectionRange:o},js=!1,$e=t;$e!==null;)if(t=$e,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$e=e;else for(;$e!==null;){t=$e;try{var Ve=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Ve!==null){var We=Ve.memoizedProps,Gt=Ve.memoizedState,V=t.stateNode,I=V.getSnapshotBeforeUpdate(t.elementType===t.type?We:nr(t.type,We),Gt);V.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var W=t.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Ce){Bt(t,t.return,Ce)}if(e=t.sibling,e!==null){e.return=t.return,$e=e;break}$e=t.return}return Ve=xp,xp=!1,Ve}function Xi(e,t,o){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&e)===e){var p=u.destroy;u.destroy=void 0,p!==void 0&&Ou(t,o,p)}u=u.next}while(u!==a)}}function hl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var o=t=t.next;do{if((o.tag&e)===e){var a=o.create;o.destroy=a()}o=o.next}while(o!==t)}}function _u(e){var t=e.ref;if(t!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof t=="function"?t(e):t.current=e}}function wp(e){var t=e.alternate;t!==null&&(e.alternate=null,wp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yr],delete t[$i],delete t[Xc],delete t[Cx],delete t[bx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Cp(e){return e.tag===5||e.tag===3||e.tag===4}function bp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Cp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mu(e,t,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?o.nodeType===8?o.parentNode.insertBefore(e,t):o.insertBefore(e,t):(o.nodeType===8?(t=o.parentNode,t.insertBefore(e,o)):(t=o,t.appendChild(e)),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=Wa));else if(a!==4&&(e=e.child,e!==null))for(Mu(e,t,o),e=e.sibling;e!==null;)Mu(e,t,o),e=e.sibling}function Iu(e,t,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Iu(e,t,o),e=e.sibling;e!==null;)Iu(e,t,o),e=e.sibling}var ln=null,rr=!1;function po(e,t,o){for(o=o.child;o!==null;)Sp(e,t,o),o=o.sibling}function Sp(e,t,o){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(Mo,o)}catch{}switch(o.tag){case 5:pn||Gs(o,t);case 6:var a=ln,u=rr;ln=null,po(e,t,o),ln=a,rr=u,ln!==null&&(rr?(e=ln,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):ln.removeChild(o.stateNode));break;case 18:ln!==null&&(rr?(e=ln,o=o.stateNode,e.nodeType===8?Qc(e.parentNode,o):e.nodeType===1&&Qc(e,o),Bo(e)):Qc(ln,o.stateNode));break;case 4:a=ln,u=rr,ln=o.stateNode.containerInfo,rr=!0,po(e,t,o),ln=a,rr=u;break;case 0:case 11:case 14:case 15:if(!pn&&(a=o.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){u=a=a.next;do{var p=u,C=p.destroy;p=p.tag,C!==void 0&&((p&2)!==0||(p&4)!==0)&&Ou(o,t,C),u=u.next}while(u!==a)}po(e,t,o);break;case 1:if(!pn&&(Gs(o,t),a=o.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=o.memoizedProps,a.state=o.memoizedState,a.componentWillUnmount()}catch(k){Bt(o,t,k)}po(e,t,o);break;case 21:po(e,t,o);break;case 22:o.mode&1?(pn=(a=pn)||o.memoizedState!==null,po(e,t,o),pn=a):po(e,t,o);break;default:po(e,t,o)}}function Np(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new Fx),t.forEach(function(a){var u=Kx.bind(null,e,a);o.has(a)||(o.add(a),a.then(u,u))})}}function or(e,t){var o=t.deletions;if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];try{var p=e,C=t,k=C;e:for(;k!==null;){switch(k.tag){case 5:ln=k.stateNode,rr=!1;break e;case 3:ln=k.stateNode.containerInfo,rr=!0;break e;case 4:ln=k.stateNode.containerInfo,rr=!0;break e}k=k.return}if(ln===null)throw Error(s(160));Sp(p,C,u),ln=null,rr=!1;var O=u.alternate;O!==null&&(O.return=null),u.return=null}catch(Y){Bt(u,t,Y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ep(t,e),t=t.sibling}function Ep(e,t){var o=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(or(t,e),Cr(e),a&4){try{Xi(3,e,e.return),hl(3,e)}catch(We){Bt(e,e.return,We)}try{Xi(5,e,e.return)}catch(We){Bt(e,e.return,We)}}break;case 1:or(t,e),Cr(e),a&512&&o!==null&&Gs(o,o.return);break;case 5:if(or(t,e),Cr(e),a&512&&o!==null&&Gs(o,o.return),e.flags&32){var u=e.stateNode;try{It(u,"")}catch(We){Bt(e,e.return,We)}}if(a&4&&(u=e.stateNode,u!=null)){var p=e.memoizedProps,C=o!==null?o.memoizedProps:p,k=e.type,O=e.updateQueue;if(e.updateQueue=null,O!==null)try{k==="input"&&p.type==="radio"&&p.name!=null&&Z(u,p),Sn(k,C);var Y=Sn(k,p);for(C=0;C<O.length;C+=2){var pe=O[C],ve=O[C+1];pe==="style"?bn(u,ve):pe==="dangerouslySetInnerHTML"?$t(u,ve):pe==="children"?It(u,ve):L(u,pe,ve,Y)}switch(k){case"input":Ie(u,p);break;case"textarea":Ue(u,p);break;case"select":var fe=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!p.multiple;var _e=p.value;_e!=null?He(u,!!p.multiple,_e,!1):fe!==!!p.multiple&&(p.defaultValue!=null?He(u,!!p.multiple,p.defaultValue,!0):He(u,!!p.multiple,p.multiple?[]:"",!1))}u[$i]=p}catch(We){Bt(e,e.return,We)}}break;case 6:if(or(t,e),Cr(e),a&4){if(e.stateNode===null)throw Error(s(162));u=e.stateNode,p=e.memoizedProps;try{u.nodeValue=p}catch(We){Bt(e,e.return,We)}}break;case 3:if(or(t,e),Cr(e),a&4&&o!==null&&o.memoizedState.isDehydrated)try{Bo(t.containerInfo)}catch(We){Bt(e,e.return,We)}break;case 4:or(t,e),Cr(e);break;case 13:or(t,e),Cr(e),u=e.child,u.flags&8192&&(p=u.memoizedState!==null,u.stateNode.isHidden=p,!p||u.alternate!==null&&u.alternate.memoizedState!==null||($u=Tt())),a&4&&Np(e);break;case 22:if(pe=o!==null&&o.memoizedState!==null,e.mode&1?(pn=(Y=pn)||pe,or(t,e),pn=Y):or(t,e),Cr(e),a&8192){if(Y=e.memoizedState!==null,(e.stateNode.isHidden=Y)&&!pe&&(e.mode&1)!==0)for($e=e,pe=e.child;pe!==null;){for(ve=$e=pe;$e!==null;){switch(fe=$e,_e=fe.child,fe.tag){case 0:case 11:case 14:case 15:Xi(4,fe,fe.return);break;case 1:Gs(fe,fe.return);var Ve=fe.stateNode;if(typeof Ve.componentWillUnmount=="function"){a=fe,o=fe.return;try{t=a,Ve.props=t.memoizedProps,Ve.state=t.memoizedState,Ve.componentWillUnmount()}catch(We){Bt(a,o,We)}}break;case 5:Gs(fe,fe.return);break;case 22:if(fe.memoizedState!==null){Tp(ve);continue}}_e!==null?(_e.return=fe,$e=_e):Tp(ve)}pe=pe.sibling}e:for(pe=null,ve=e;;){if(ve.tag===5){if(pe===null){pe=ve;try{u=ve.stateNode,Y?(p=u.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(k=ve.stateNode,O=ve.memoizedProps.style,C=O!=null&&O.hasOwnProperty("display")?O.display:null,k.style.display=hr("display",C))}catch(We){Bt(e,e.return,We)}}}else if(ve.tag===6){if(pe===null)try{ve.stateNode.nodeValue=Y?"":ve.memoizedProps}catch(We){Bt(e,e.return,We)}}else if((ve.tag!==22&&ve.tag!==23||ve.memoizedState===null||ve===e)&&ve.child!==null){ve.child.return=ve,ve=ve.child;continue}if(ve===e)break e;for(;ve.sibling===null;){if(ve.return===null||ve.return===e)break e;pe===ve&&(pe=null),ve=ve.return}pe===ve&&(pe=null),ve.sibling.return=ve.return,ve=ve.sibling}}break;case 19:or(t,e),Cr(e),a&4&&Np(e);break;case 21:break;default:or(t,e),Cr(e)}}function Cr(e){var t=e.flags;if(t&2){try{e:{for(var o=e.return;o!==null;){if(Cp(o)){var a=o;break e}o=o.return}throw Error(s(160))}switch(a.tag){case 5:var u=a.stateNode;a.flags&32&&(It(u,""),a.flags&=-33);var p=bp(e);Iu(e,p,u);break;case 3:case 4:var C=a.stateNode.containerInfo,k=bp(e);Mu(e,k,C);break;default:throw Error(s(161))}}catch(O){Bt(e,e.return,O)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zx(e,t,o){$e=e,jp(e)}function jp(e,t,o){for(var a=(e.mode&1)!==0;$e!==null;){var u=$e,p=u.child;if(u.tag===22&&a){var C=u.memoizedState!==null||fl;if(!C){var k=u.alternate,O=k!==null&&k.memoizedState!==null||pn;k=fl;var Y=pn;if(fl=C,(pn=O)&&!Y)for($e=u;$e!==null;)C=$e,O=C.child,C.tag===22&&C.memoizedState!==null?Rp(u):O!==null?(O.return=C,$e=O):Rp(u);for(;p!==null;)$e=p,jp(p),p=p.sibling;$e=u,fl=k,pn=Y}kp(e)}else(u.subtreeFlags&8772)!==0&&p!==null?(p.return=u,$e=p):kp(e)}}function kp(e){for(;$e!==null;){var t=$e;if((t.flags&8772)!==0){var o=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:pn||hl(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!pn)if(o===null)a.componentDidMount();else{var u=t.elementType===t.type?o.memoizedProps:nr(t.type,o.memoizedProps);a.componentDidUpdate(u,o.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var p=t.updateQueue;p!==null&&Th(t,p,a);break;case 3:var C=t.updateQueue;if(C!==null){if(o=null,t.child!==null)switch(t.child.tag){case 5:o=t.child.stateNode;break;case 1:o=t.child.stateNode}Th(t,C,o)}break;case 5:var k=t.stateNode;if(o===null&&t.flags&4){o=k;var O=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&o.focus();break;case"img":O.src&&(o.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var Y=t.alternate;if(Y!==null){var pe=Y.memoizedState;if(pe!==null){var ve=pe.dehydrated;ve!==null&&Bo(ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}pn||t.flags&512&&_u(t)}catch(fe){Bt(t,t.return,fe)}}if(t===e){$e=null;break}if(o=t.sibling,o!==null){o.return=t.return,$e=o;break}$e=t.return}}function Tp(e){for(;$e!==null;){var t=$e;if(t===e){$e=null;break}var o=t.sibling;if(o!==null){o.return=t.return,$e=o;break}$e=t.return}}function Rp(e){for(;$e!==null;){var t=$e;try{switch(t.tag){case 0:case 11:case 15:var o=t.return;try{hl(4,t)}catch(O){Bt(t,o,O)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var u=t.return;try{a.componentDidMount()}catch(O){Bt(t,u,O)}}var p=t.return;try{_u(t)}catch(O){Bt(t,p,O)}break;case 5:var C=t.return;try{_u(t)}catch(O){Bt(t,C,O)}}}catch(O){Bt(t,t.return,O)}if(t===e){$e=null;break}var k=t.sibling;if(k!==null){k.return=t.return,$e=k;break}$e=t.return}}var Bx=Math.ceil,pl=F.ReactCurrentDispatcher,Lu=F.ReactCurrentOwner,Gn=F.ReactCurrentBatchConfig,pt=0,nn=null,Kt=null,cn=0,Ln=0,Ys=lo(0),qt=0,Ji=null,Xo=0,ml=0,Fu=0,qi=null,Tn=null,$u=0,Ks=1/0,zr=null,gl=!1,zu=null,mo=null,vl=!1,go=null,yl=0,Zi=0,Bu=null,xl=-1,wl=0;function yn(){return(pt&6)!==0?Tt():xl!==-1?xl:xl=Tt()}function vo(e){return(e.mode&1)===0?1:(pt&2)!==0&&cn!==0?cn&-cn:Nx.transition!==null?(wl===0&&(wl=Cs()),wl):(e=ht,e!==0||(e=window.event,e=e===void 0?16:Ma(e.type)),e)}function sr(e,t,o,a){if(50<Zi)throw Zi=0,Bu=null,Error(s(185));Xn(e,o,a),((pt&2)===0||e!==nn)&&(e===nn&&((pt&2)===0&&(ml|=o),qt===4&&yo(e,cn)),Rn(e,a),o===1&&pt===0&&(t.mode&1)===0&&(Ks=Tt()+500,Ka&&uo()))}function Rn(e,t){var o=e.callbackNode;Ci(e,t);var a=so(e,e===nn?cn:0);if(a===0)o!==null&&gs(o),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(o!=null&&gs(o),t===1)e.tag===0?Sx(Dp.bind(null,e)):gh(Dp.bind(null,e)),xx(function(){(pt&6)===0&&uo()}),o=null;else{switch(Da(a)){case 1:o=oo;break;case 4:o=yi;break;case 16:o=_o;break;case 536870912:o=ka;break;default:o=_o}o=$p(o,Ap.bind(null,e))}e.callbackPriority=t,e.callbackNode=o}}function Ap(e,t){if(xl=-1,wl=0,(pt&6)!==0)throw Error(s(327));var o=e.callbackNode;if(Qs()&&e.callbackNode!==o)return null;var a=so(e,e===nn?cn:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=Cl(e,a);else{t=a;var u=pt;pt|=2;var p=Op();(nn!==e||cn!==t)&&(zr=null,Ks=Tt()+500,qo(e,t));do try{Wx();break}catch(k){Pp(e,k)}while(!0);su(),pl.current=p,pt=u,Kt!==null?t=0:(nn=null,cn=0,t=qt)}if(t!==0){if(t===2&&(u=ws(e),u!==0&&(a=u,t=Uu(e,u))),t===1)throw o=Ji,qo(e,0),yo(e,a),Rn(e,Tt()),o;if(t===6)yo(e,a);else{if(u=e.current.alternate,(a&30)===0&&!Ux(u)&&(t=Cl(e,a),t===2&&(p=ws(e),p!==0&&(a=p,t=Uu(e,p))),t===1))throw o=Ji,qo(e,0),yo(e,a),Rn(e,Tt()),o;switch(e.finishedWork=u,e.finishedLanes=a,t){case 0:case 1:throw Error(s(345));case 2:Zo(e,Tn,zr);break;case 3:if(yo(e,a),(a&130023424)===a&&(t=$u+500-Tt(),10<t)){if(so(e,0)!==0)break;if(u=e.suspendedLanes,(u&a)!==a){yn(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=Kc(Zo.bind(null,e,Tn,zr),t);break}Zo(e,Tn,zr);break;case 4:if(yo(e,a),(a&4194240)===a)break;for(t=e.eventTimes,u=-1;0<a;){var C=31-Nn(a);p=1<<C,C=t[C],C>u&&(u=C),a&=~p}if(a=u,a=Tt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Bx(a/1960))-a,10<a){e.timeoutHandle=Kc(Zo.bind(null,e,Tn,zr),a);break}Zo(e,Tn,zr);break;case 5:Zo(e,Tn,zr);break;default:throw Error(s(329))}}}return Rn(e,Tt()),e.callbackNode===o?Ap.bind(null,e):null}function Uu(e,t){var o=qi;return e.current.memoizedState.isDehydrated&&(qo(e,t).flags|=256),e=Cl(e,t),e!==2&&(t=Tn,Tn=o,t!==null&&Vu(t)),e}function Vu(e){Tn===null?Tn=e:Tn.push.apply(Tn,e)}function Ux(e){for(var t=e;;){if(t.flags&16384){var o=t.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var a=0;a<o.length;a++){var u=o[a],p=u.getSnapshot;u=u.value;try{if(!er(p(),u))return!1}catch{return!1}}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yo(e,t){for(t&=~Fu,t&=~ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var o=31-Nn(t),a=1<<o;e[o]=-1,t&=~a}}function Dp(e){if((pt&6)!==0)throw Error(s(327));Qs();var t=so(e,0);if((t&1)===0)return Rn(e,Tt()),null;var o=Cl(e,t);if(e.tag!==0&&o===2){var a=ws(e);a!==0&&(t=a,o=Uu(e,a))}if(o===1)throw o=Ji,qo(e,0),yo(e,t),Rn(e,Tt()),o;if(o===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zo(e,Tn,zr),Rn(e,Tt()),null}function Wu(e,t){var o=pt;pt|=1;try{return e(t)}finally{pt=o,pt===0&&(Ks=Tt()+500,Ka&&uo())}}function Jo(e){go!==null&&go.tag===0&&(pt&6)===0&&Qs();var t=pt;pt|=1;var o=Gn.transition,a=ht;try{if(Gn.transition=null,ht=1,e)return e()}finally{ht=a,Gn.transition=o,pt=t,(pt&6)===0&&uo()}}function Hu(){Ln=Ys.current,At(Ys)}function qo(e,t){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,yx(o)),Kt!==null)for(o=Kt.return;o!==null;){var a=o;switch(eu(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Ga();break;case 3:Ws(),At(En),At(dn),hu();break;case 5:du(a);break;case 4:Ws();break;case 13:At(Lt);break;case 19:At(Lt);break;case 10:iu(a.type._context);break;case 22:case 23:Hu()}o=o.return}if(nn=e,Kt=e=xo(e.current,null),cn=Ln=t,qt=0,Ji=null,Fu=ml=Xo=0,Tn=qi=null,Yo!==null){for(t=0;t<Yo.length;t++)if(o=Yo[t],a=o.interleaved,a!==null){o.interleaved=null;var u=a.next,p=o.pending;if(p!==null){var C=p.next;p.next=u,a.next=C}o.pending=a}Yo=null}return e}function Pp(e,t){do{var o=Kt;try{if(su(),ol.current=ll,sl){for(var a=Ft.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}sl=!1}if(Qo=0,tn=Jt=Ft=null,Hi=!1,Gi=0,Lu.current=null,o===null||o.return===null){qt=1,Ji=t,Kt=null;break}e:{var p=e,C=o.return,k=o,O=t;if(t=cn,k.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var Y=O,pe=k,ve=pe.tag;if((pe.mode&1)===0&&(ve===0||ve===11||ve===15)){var fe=pe.alternate;fe?(pe.updateQueue=fe.updateQueue,pe.memoizedState=fe.memoizedState,pe.lanes=fe.lanes):(pe.updateQueue=null,pe.memoizedState=null)}var _e=rp(C);if(_e!==null){_e.flags&=-257,op(_e,C,k,p,t),_e.mode&1&&np(p,Y,t),t=_e,O=Y;var Ve=t.updateQueue;if(Ve===null){var We=new Set;We.add(O),t.updateQueue=We}else Ve.add(O);break e}else{if((t&1)===0){np(p,Y,t),Gu();break e}O=Error(s(426))}}else if(Mt&&k.mode&1){var Gt=rp(C);if(Gt!==null){(Gt.flags&65536)===0&&(Gt.flags|=256),op(Gt,C,k,p,t),ru(Hs(O,k));break e}}p=O=Hs(O,k),qt!==4&&(qt=2),qi===null?qi=[p]:qi.push(p),p=C;do{switch(p.tag){case 3:p.flags|=65536,t&=-t,p.lanes|=t;var V=ep(p,O,t);kh(p,V);break e;case 1:k=O;var I=p.type,W=p.stateNode;if((p.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(mo===null||!mo.has(W)))){p.flags|=65536,t&=-t,p.lanes|=t;var Ce=tp(p,k,t);kh(p,Ce);break e}}p=p.return}while(p!==null)}Mp(o)}catch(Ye){t=Ye,Kt===o&&o!==null&&(Kt=o=o.return);continue}break}while(!0)}function Op(){var e=pl.current;return pl.current=ll,e===null?ll:e}function Gu(){(qt===0||qt===3||qt===2)&&(qt=4),nn===null||(Xo&268435455)===0&&(ml&268435455)===0||yo(nn,cn)}function Cl(e,t){var o=pt;pt|=2;var a=Op();(nn!==e||cn!==t)&&(zr=null,qo(e,t));do try{Vx();break}catch(u){Pp(e,u)}while(!0);if(su(),pt=o,pl.current=a,Kt!==null)throw Error(s(261));return nn=null,cn=0,qt}function Vx(){for(;Kt!==null;)_p(Kt)}function Wx(){for(;Kt!==null&&!ro();)_p(Kt)}function _p(e){var t=Fp(e.alternate,e,Ln);e.memoizedProps=e.pendingProps,t===null?Mp(e):Kt=t,Lu.current=null}function Mp(e){var t=e;do{var o=t.alternate;if(e=t.return,(t.flags&32768)===0){if(o=Ix(o,t,Ln),o!==null){Kt=o;return}}else{if(o=Lx(o,t),o!==null){o.flags&=32767,Kt=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qt=6,Kt=null;return}}if(t=t.sibling,t!==null){Kt=t;return}Kt=t=e}while(t!==null);qt===0&&(qt=5)}function Zo(e,t,o){var a=ht,u=Gn.transition;try{Gn.transition=null,ht=1,Hx(e,t,o,a)}finally{Gn.transition=u,ht=a}return null}function Hx(e,t,o,a){do Qs();while(go!==null);if((pt&6)!==0)throw Error(s(327));o=e.finishedWork;var u=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var p=o.lanes|o.childLanes;if(Aa(e,p),e===nn&&(Kt=nn=null,cn=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||vl||(vl=!0,$p(_o,function(){return Qs(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=Gn.transition,Gn.transition=null;var C=ht;ht=1;var k=pt;pt|=4,Lu.current=null,$x(e,o),Ep(o,e),dx(Gc),js=!!Hc,Gc=Hc=null,e.current=o,zx(o),vs(),pt=k,ht=C,Gn.transition=p}else e.current=o;if(vl&&(vl=!1,go=e,yl=u),p=e.pendingLanes,p===0&&(mo=null),Ta(o.stateNode),Rn(e,Tt()),t!==null)for(a=e.onRecoverableError,o=0;o<t.length;o++)u=t[o],a(u.value,{componentStack:u.stack,digest:u.digest});if(gl)throw gl=!1,e=zu,zu=null,e;return(yl&1)!==0&&e.tag!==0&&Qs(),p=e.pendingLanes,(p&1)!==0?e===Bu?Zi++:(Zi=0,Bu=e):Zi=0,uo(),null}function Qs(){if(go!==null){var e=Da(yl),t=Gn.transition,o=ht;try{if(Gn.transition=null,ht=16>e?16:e,go===null)var a=!1;else{if(e=go,go=null,yl=0,(pt&6)!==0)throw Error(s(331));var u=pt;for(pt|=4,$e=e.current;$e!==null;){var p=$e,C=p.child;if(($e.flags&16)!==0){var k=p.deletions;if(k!==null){for(var O=0;O<k.length;O++){var Y=k[O];for($e=Y;$e!==null;){var pe=$e;switch(pe.tag){case 0:case 11:case 15:Xi(8,pe,p)}var ve=pe.child;if(ve!==null)ve.return=pe,$e=ve;else for(;$e!==null;){pe=$e;var fe=pe.sibling,_e=pe.return;if(wp(pe),pe===Y){$e=null;break}if(fe!==null){fe.return=_e,$e=fe;break}$e=_e}}}var Ve=p.alternate;if(Ve!==null){var We=Ve.child;if(We!==null){Ve.child=null;do{var Gt=We.sibling;We.sibling=null,We=Gt}while(We!==null)}}$e=p}}if((p.subtreeFlags&2064)!==0&&C!==null)C.return=p,$e=C;else e:for(;$e!==null;){if(p=$e,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Xi(9,p,p.return)}var V=p.sibling;if(V!==null){V.return=p.return,$e=V;break e}$e=p.return}}var I=e.current;for($e=I;$e!==null;){C=$e;var W=C.child;if((C.subtreeFlags&2064)!==0&&W!==null)W.return=C,$e=W;else e:for(C=I;$e!==null;){if(k=$e,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:hl(9,k)}}catch(Ye){Bt(k,k.return,Ye)}if(k===C){$e=null;break e}var Ce=k.sibling;if(Ce!==null){Ce.return=k.return,$e=Ce;break e}$e=k.return}}if(pt=u,uo(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(Mo,e)}catch{}a=!0}return a}finally{ht=o,Gn.transition=t}}return!1}function Ip(e,t,o){t=Hs(o,t),t=ep(e,t,1),e=ho(e,t,1),t=yn(),e!==null&&(Xn(e,1,t),Rn(e,t))}function Bt(e,t,o){if(e.tag===3)Ip(e,e,o);else for(;t!==null;){if(t.tag===3){Ip(t,e,o);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(mo===null||!mo.has(a))){e=Hs(o,e),e=tp(t,e,1),t=ho(t,e,1),e=yn(),t!==null&&(Xn(t,1,e),Rn(t,e));break}}t=t.return}}function Gx(e,t,o){var a=e.pingCache;a!==null&&a.delete(t),t=yn(),e.pingedLanes|=e.suspendedLanes&o,nn===e&&(cn&o)===o&&(qt===4||qt===3&&(cn&130023424)===cn&&500>Tt()-$u?qo(e,0):Fu|=o),Rn(e,t)}function Lp(e,t){t===0&&((e.mode&1)===0?t=1:(t=Ar,Ar<<=1,(Ar&130023424)===0&&(Ar=4194304)));var o=yn();e=Lr(e,t),e!==null&&(Xn(e,t,o),Rn(e,o))}function Yx(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),Lp(e,o)}function Kx(e,t){var o=0;switch(e.tag){case 13:var a=e.stateNode,u=e.memoizedState;u!==null&&(o=u.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(s(314))}a!==null&&a.delete(t),Lp(e,o)}var Fp;Fp=function(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps||En.current)kn=!0;else{if((e.lanes&o)===0&&(t.flags&128)===0)return kn=!1,Mx(e,t,o);kn=(e.flags&131072)!==0}else kn=!1,Mt&&(t.flags&1048576)!==0&&vh(t,Xa,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;dl(e,t),e=t.pendingProps;var u=Ls(t,dn.current);Vs(t,o),u=gu(null,t,a,e,u,o);var p=vu();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jn(a)?(p=!0,Ya(t)):p=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,cu(t),u.updater=cl,t.stateNode=u,u._reactInternals=t,Su(t,a,e,o),t=ku(null,t,a,!0,p,o)):(t.tag=0,Mt&&p&&Zc(t),vn(null,t,u,o),t=t.child),t;case 16:a=t.elementType;e:{switch(dl(e,t),e=t.pendingProps,u=a._init,a=u(a._payload),t.type=a,u=t.tag=Xx(a),e=nr(a,e),u){case 0:t=ju(null,t,a,e,o);break e;case 1:t=up(null,t,a,e,o);break e;case 11:t=sp(null,t,a,e,o);break e;case 14:t=ip(null,t,a,nr(a.type,e),o);break e}throw Error(s(306,a,""))}return t;case 0:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:nr(a,u),ju(e,t,a,u,o);case 1:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:nr(a,u),up(e,t,a,u,o);case 3:e:{if(dp(t),e===null)throw Error(s(387));a=t.pendingProps,p=t.memoizedState,u=p.element,jh(e,t),nl(t,a,null,o);var C=t.memoizedState;if(a=C.element,p.isDehydrated)if(p={element:a,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},t.updateQueue.baseState=p,t.memoizedState=p,t.flags&256){u=Hs(Error(s(423)),t),t=fp(e,t,a,o,u);break e}else if(a!==u){u=Hs(Error(s(424)),t),t=fp(e,t,a,o,u);break e}else for(In=ao(t.stateNode.containerInfo.firstChild),Mn=t,Mt=!0,tr=null,o=Nh(t,null,a,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(zs(),a===u){t=$r(e,t,o);break e}vn(e,t,a,o)}t=t.child}return t;case 5:return Rh(t),e===null&&nu(t),a=t.type,u=t.pendingProps,p=e!==null?e.memoizedProps:null,C=u.children,Yc(a,u)?C=null:p!==null&&Yc(a,p)&&(t.flags|=32),cp(e,t),vn(e,t,C,o),t.child;case 6:return e===null&&nu(t),null;case 13:return hp(e,t,o);case 4:return uu(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Bs(t,null,a,o):vn(e,t,a,o),t.child;case 11:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:nr(a,u),sp(e,t,a,u,o);case 7:return vn(e,t,t.pendingProps,o),t.child;case 8:return vn(e,t,t.pendingProps.children,o),t.child;case 12:return vn(e,t,t.pendingProps.children,o),t.child;case 10:e:{if(a=t.type._context,u=t.pendingProps,p=t.memoizedProps,C=u.value,jt(Za,a._currentValue),a._currentValue=C,p!==null)if(er(p.value,C)){if(p.children===u.children&&!En.current){t=$r(e,t,o);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var k=p.dependencies;if(k!==null){C=p.child;for(var O=k.firstContext;O!==null;){if(O.context===a){if(p.tag===1){O=Fr(-1,o&-o),O.tag=2;var Y=p.updateQueue;if(Y!==null){Y=Y.shared;var pe=Y.pending;pe===null?O.next=O:(O.next=pe.next,pe.next=O),Y.pending=O}}p.lanes|=o,O=p.alternate,O!==null&&(O.lanes|=o),au(p.return,o,t),k.lanes|=o;break}O=O.next}}else if(p.tag===10)C=p.type===t.type?null:p.child;else if(p.tag===18){if(C=p.return,C===null)throw Error(s(341));C.lanes|=o,k=C.alternate,k!==null&&(k.lanes|=o),au(C,o,t),C=p.sibling}else C=p.child;if(C!==null)C.return=p;else for(C=p;C!==null;){if(C===t){C=null;break}if(p=C.sibling,p!==null){p.return=C.return,C=p;break}C=C.return}p=C}vn(e,t,u.children,o),t=t.child}return t;case 9:return u=t.type,a=t.pendingProps.children,Vs(t,o),u=Wn(u),a=a(u),t.flags|=1,vn(e,t,a,o),t.child;case 14:return a=t.type,u=nr(a,t.pendingProps),u=nr(a.type,u),ip(e,t,a,u,o);case 15:return ap(e,t,t.type,t.pendingProps,o);case 17:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:nr(a,u),dl(e,t),t.tag=1,jn(a)?(e=!0,Ya(t)):e=!1,Vs(t,o),qh(t,a,u),Su(t,a,u,o),ku(null,t,a,!0,e,o);case 19:return mp(e,t,o);case 22:return lp(e,t,o)}throw Error(s(156,t.tag))};function $p(e,t){return ja(e,t)}function Qx(e,t,o,a){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(e,t,o,a){return new Qx(e,t,o,a)}function Yu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xx(e){if(typeof e=="function")return Yu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xe)return 11;if(e===Te)return 14}return 2}function xo(e,t){var o=e.alternate;return o===null?(o=Yn(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function bl(e,t,o,a,u,p){var C=2;if(a=e,typeof e=="function")Yu(e)&&(C=1);else if(typeof e=="string")C=5;else e:switch(e){case z:return es(o.children,u,p,t);case q:C=8,u|=8;break;case we:return e=Yn(12,o,t,u|2),e.elementType=we,e.lanes=p,e;case oe:return e=Yn(13,o,t,u),e.elementType=oe,e.lanes=p,e;case be:return e=Yn(19,o,t,u),e.elementType=be,e.lanes=p,e;case me:return Sl(o,u,p,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ae:C=10;break e;case ye:C=9;break e;case xe:C=11;break e;case Te:C=14;break e;case je:C=16,a=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=Yn(C,o,t,u),t.elementType=e,t.type=a,t.lanes=p,t}function es(e,t,o,a){return e=Yn(7,e,a,t),e.lanes=o,e}function Sl(e,t,o,a){return e=Yn(22,e,a,t),e.elementType=me,e.lanes=o,e.stateNode={isHidden:!1},e}function Ku(e,t,o){return e=Yn(6,e,null,t),e.lanes=o,e}function Qu(e,t,o){return t=Yn(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jx(e,t,o,a,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bs(0),this.expirationTimes=bs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bs(0),this.identifierPrefix=a,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function Xu(e,t,o,a,u,p,C,k,O){return e=new Jx(e,t,o,k,O),t===1?(t=1,p===!0&&(t|=8)):t=0,p=Yn(3,null,null,t),e.current=p,p.stateNode=e,p.memoizedState={element:a,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},cu(p),e}function qx(e,t,o){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:a==null?null:""+a,children:e,containerInfo:t,implementation:o}}function zp(e){if(!e)return co;e=e._reactInternals;e:{if(On(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var o=e.type;if(jn(o))return ph(e,o,t)}return t}function Bp(e,t,o,a,u,p,C,k,O){return e=Xu(o,a,!0,e,u,p,C,k,O),e.context=zp(null),o=e.current,a=yn(),u=vo(o),p=Fr(a,u),p.callback=t??null,ho(o,p,u),e.current.lanes=u,Xn(e,u,a),Rn(e,a),e}function Nl(e,t,o,a){var u=t.current,p=yn(),C=vo(u);return o=zp(o),t.context===null?t.context=o:t.pendingContext=o,t=Fr(p,C),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=ho(u,t,C),e!==null&&(sr(e,u,C,p),tl(e,u,C)),C}function El(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Up(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function Ju(e,t){Up(e,t),(e=e.alternate)&&Up(e,t)}function Zx(){return null}var Vp=typeof reportError=="function"?reportError:function(e){console.error(e)};function qu(e){this._internalRoot=e}jl.prototype.render=qu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));Nl(e,t,null,null)},jl.prototype.unmount=qu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jo(function(){Nl(null,e,null,null)}),t[Or]=null}};function jl(e){this._internalRoot=e}jl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pa();e={blockedOn:null,target:e,priority:t};for(var o=0;o<qn.length&&t!==0&&t<qn[o].priority;o++);qn.splice(o,0,e),o===0&&$o(e)}};function Zu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function kl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Wp(){}function e0(e,t,o,a,u){if(u){if(typeof a=="function"){var p=a;a=function(){var Y=El(C);p.call(Y)}}var C=Bp(t,a,e,0,null,!1,!1,"",Wp);return e._reactRootContainer=C,e[Or]=C.current,Li(e.nodeType===8?e.parentNode:e),Jo(),C}for(;u=e.lastChild;)e.removeChild(u);if(typeof a=="function"){var k=a;a=function(){var Y=El(O);k.call(Y)}}var O=Xu(e,0,!1,null,null,!1,!1,"",Wp);return e._reactRootContainer=O,e[Or]=O.current,Li(e.nodeType===8?e.parentNode:e),Jo(function(){Nl(t,O,o,a)}),O}function Tl(e,t,o,a,u){var p=o._reactRootContainer;if(p){var C=p;if(typeof u=="function"){var k=u;u=function(){var O=El(C);k.call(O)}}Nl(t,C,e,u)}else C=e0(o,t,e,u,a);return El(C)}Si=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var o=Qt(t.pendingLanes);o!==0&&(bi(t,o|1),Rn(t,Tt()),(pt&6)===0&&(Ks=Tt()+500,uo()))}break;case 13:Jo(function(){var a=Lr(e,1);if(a!==null){var u=yn();sr(a,e,1,u)}}),Ju(e,1)}},Ss=function(e){if(e.tag===13){var t=Lr(e,134217728);if(t!==null){var o=yn();sr(t,e,134217728,o)}Ju(e,134217728)}},Ni=function(e){if(e.tag===13){var t=vo(e),o=Lr(e,t);if(o!==null){var a=yn();sr(o,e,t,a)}Ju(e,t)}},Pa=function(){return ht},Oa=function(e,t){var o=ht;try{return ht=e,t()}finally{ht=o}},Qn=function(e,t,o){switch(t){case"input":if(Ie(e,o),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<o.length;t++){var a=o[t];if(a!==e&&a.form===e.form){var u=Ha(a);if(!u)throw Error(s(90));Qe(a),Ie(a,u)}}}break;case"textarea":Ue(e,o);break;case"select":t=o.value,t!=null&&He(e,!!o.multiple,t,!1)}},$=Wu,te=Jo;var t0={usingClientEntryPoint:!1,Events:[zi,Ms,Ha,Ot,Ne,Wu]},ea={findFiberByHostInstance:Vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},n0={bundleType:ea.bundleType,version:ea.version,rendererPackageName:ea.rendererPackageName,rendererConfig:ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ps(e),e===null?null:e.stateNode},findFiberByHostInstance:ea.findFiberByHostInstance||Zx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rl.isDisabled&&Rl.supportsFiber)try{Mo=Rl.inject(n0),Bn=Rl}catch{}}return An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t0,An.createPortal=function(e,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zu(t))throw Error(s(200));return qx(e,t,null,o)},An.createRoot=function(e,t){if(!Zu(e))throw Error(s(299));var o=!1,a="",u=Vp;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=Xu(e,1,!1,null,null,o,!1,a,u),e[Or]=t.current,Li(e.nodeType===8?e.parentNode:e),new qu(t)},An.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=ps(t),e=e===null?null:e.stateNode,e},An.flushSync=function(e){return Jo(e)},An.hydrate=function(e,t,o){if(!kl(t))throw Error(s(200));return Tl(null,e,t,!0,o)},An.hydrateRoot=function(e,t,o){if(!Zu(e))throw Error(s(405));var a=o!=null&&o.hydratedSources||null,u=!1,p="",C=Vp;if(o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(C=o.onRecoverableError)),t=Bp(t,null,e,1,o??null,u,!1,p,C),e[Or]=t.current,Li(e),a)for(e=0;e<a.length;e++)o=a[e],u=o._getVersion,u=u(o._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[o,u]:t.mutableSourceEagerHydrationData.push(o,u);return new jl(t)},An.render=function(e,t,o){if(!kl(t))throw Error(s(200));return Tl(null,e,t,!1,o)},An.unmountComponentAtNode=function(e){if(!kl(e))throw Error(s(40));return e._reactRootContainer?(Jo(function(){Tl(null,null,e,!1,function(){e._reactRootContainer=null,e[Or]=null})}),!0):!1},An.unstable_batchedUpdates=Wu,An.unstable_renderSubtreeIntoContainer=function(e,t,o,a){if(!kl(o))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Tl(e,t,o,!1,a)},An.version="18.3.1-next-f1338f8080-20240426",An}var qp;function Km(){if(qp)return nd.exports;qp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),nd.exports=d0(),nd.exports}var Zp;function f0(){if(Zp)return Al;Zp=1;var n=Km();return Al.createRoot=n.createRoot,Al.hydrateRoot=n.hydrateRoot,Al}var h0=f0();const p0=Kd(h0);let sd={};const em=(n,r={})=>{if(typeof window<"u"&&window.posthog){const s=r.previous_page;if(s&&sd[s]){const l=Date.now()-sd[s];window.posthog.capture("Page Time Spent",{page_name:s,time_spent_ms:l,time_spent_seconds:Math.round(l/1e3),next_page:n})}sd[n]=Date.now(),window.posthog.capture("$pageview",{$current_url:`${window.location.origin}${window.location.pathname}#${n}`,$host:window.location.host,$pathname:window.location.pathname,$search:window.location.search,title:`Guitar Practice - ${n}`,page_name:n,spa_navigation:!0,viewport_width:window.innerWidth,viewport_height:window.innerHeight,screen_width:window.screen.width,screen_height:window.screen.height,...r})}},Dl=(n,r,s={})=>{if(typeof window<"u"&&window.posthog){const l={started_timer:"Started Timer",marked_done:"Item Marked Done",timer_reset:"Timer Reset",timer_stopped:"Timer Stopped"};window.posthog.capture(l[n]||n,{item_name:r,timer_started:n==="started_timer",timer_stopped:n==="timer_stopped",timer_reset:n==="timer_reset",...s})}},br=(n,r,s={})=>{if(typeof window<"u"&&window.posthog){const l={added:"Chord Chart Added",edited:"Chord Chart Edited",deleted:"Chord Chart Deleted",autocreated:"Chord Charts Autocreated",copied:"Chord Charts Copied"};window.posthog.capture(l[n]||n,{item_name:r,...s})}},ca=(n,r,s,l={})=>{if(typeof window<"u"&&window.posthog){const c=r==="routine"?`${n.charAt(0).toUpperCase()+n.slice(1)} Routine`:`${n.charAt(0).toUpperCase()+n.slice(1)} Item`;window.posthog.capture(c,{[`${r}_name`]:s,operation_type:n,item_type:r,...l})}},id=(n,r,s={})=>{if(typeof window<"u"&&window.posthog){const l={notes:"Notes Added",tuning:"Tuning Added",folder_path:"Folder Path Added"};window.posthog.capture(l[n]||`${n} Updated`,{item_name:r,update_type:n,...s})}},m0=(n,r,s={})=>{typeof window<"u"&&window.posthog&&window.posthog.capture("Songbook Folder Link Clicked",{item_name:n,songbook_folder_path:r,...s})},g0=(n,r={})=>{typeof window<"u"&&window.posthog&&window.posthog.capture("Practice Page Visited",{active_routine_name:n,...r})},Qm=f.createContext(void 0),v0=({children:n})=>{const r=()=>{const d=window.location.hash.slice(1);return["Practice","Routines","Items"].includes(d)?d:"Practice"},[s,l]=f.useState(r);f.useEffect(()=>{const d=setTimeout(()=>{em(s,{initial_page_load:!0,referrer:document.referrer})},100);return()=>clearTimeout(d)},[]);const c=(d,h=!0)=>{const m=s;l(d),em(d,{previous_page:m,navigation_type:h?"user_action":"browser_navigation",timestamp:new Date().toISOString()}),h&&window.history.pushState(null,"",`#${d}`)};return f.useEffect(()=>{const d=()=>{const h=r();c(h,!1)};return window.addEventListener("popstate",d),()=>{window.removeEventListener("popstate",d)}},[]),i.jsx(Qm.Provider,{value:{activePage:s,setActivePage:c},children:n})},Xd=()=>{const n=f.useContext(Qm);if(n===void 0)throw new Error("useNavigation must be used within a NavigationProvider");return n};var y0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const x0=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),w0=(n,r)=>{const s=f.forwardRef(({color:l="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:h,children:m,...g},v)=>f.createElement("svg",{ref:v,...y0,width:c,height:c,stroke:l,strokeWidth:h?Number(d)*24/Number(c):d,className:`lucide lucide-${x0(n)}`,...g},[...r.map(([x,y])=>f.createElement(x,y)),...(Array.isArray(m)?m:[m])||[]]));return s.displayName=`${n}`,s};var Ut=w0;const lr=Ut("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Xm=Ut("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Jd=Ut("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),sa=Ut("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Bl=Ut("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ad=Ut("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ld=Ut("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Jm=Ut("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),lc=Ut("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),ma=Ut("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),C0=Ut("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),cc=Ut("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),qd=Ut("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),ga=Ut("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),qm=Ut("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),b0=Ut("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Gl=Ut("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),S0=Ut("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ei=Ut("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Nd=Ut("Wand",[["path",{d:"M15 4V2",key:"z1p9b7"}],["path",{d:"M15 16v-2",key:"px0unx"}],["path",{d:"M8 9h2",key:"1g203m"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M17.8 11.8 19 13",key:"yihg8r"}],["path",{d:"M15 9h0",key:"kg5t1u"}],["path",{d:"M17.8 6.2 19 5",key:"fd4us0"}],["path",{d:"m3 21 9-9",key:"1jfql5"}],["path",{d:"M12.2 6.2 11 5",key:"i3da3b"}]]),Dn=Ut("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),N0=Ut("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Zm(n){var r,s,l="";if(typeof n=="string"||typeof n=="number")l+=n;else if(typeof n=="object")if(Array.isArray(n)){var c=n.length;for(r=0;r<c;r++)n[r]&&(s=Zm(n[r]))&&(l&&(l+=" "),l+=s)}else for(s in n)n[s]&&(l&&(l+=" "),l+=s);return l}function eg(){for(var n,r,s=0,l="",c=arguments.length;s<c;s++)(n=arguments[s])&&(r=Zm(n))&&(l&&(l+=" "),l+=r);return l}function E0(){for(var n=0,r,s,l="";n<arguments.length;)(r=arguments[n++])&&(s=tg(r))&&(l&&(l+=" "),l+=s);return l}function tg(n){if(typeof n=="string")return n;for(var r,s="",l=0;l<n.length;l++)n[l]&&(r=tg(n[l]))&&(s&&(s+=" "),s+=r);return s}var Zd="-";function j0(n){var r=T0(n),s=n.conflictingClassGroups,l=n.conflictingClassGroupModifiers,c=l===void 0?{}:l;function d(m){var g=m.split(Zd);return g[0]===""&&g.length!==1&&g.shift(),ng(g,r)||k0(m)}function h(m,g){var v=s[m]||[];return g&&c[m]?[].concat(v,c[m]):v}return{getClassGroupId:d,getConflictingClassGroupIds:h}}function ng(n,r){if(n.length===0)return r.classGroupId;var s=n[0],l=r.nextPart.get(s),c=l?ng(n.slice(1),l):void 0;if(c)return c;if(r.validators.length!==0){var d=n.join(Zd);return r.validators.find(function(h){var m=h.validator;return m(d)})?.classGroupId}}var tm=/^\[(.+)\]$/;function k0(n){if(tm.test(n)){var r=tm.exec(n)[1],s=r?.substring(0,r.indexOf(":"));if(s)return"arbitrary.."+s}}function T0(n){var r=n.theme,s=n.prefix,l={nextPart:new Map,validators:[]},c=A0(Object.entries(n.classGroups),s);return c.forEach(function(d){var h=d[0],m=d[1];Ed(m,l,h,r)}),l}function Ed(n,r,s,l){n.forEach(function(c){if(typeof c=="string"){var d=c===""?r:nm(r,c);d.classGroupId=s;return}if(typeof c=="function"){if(R0(c)){Ed(c(l),r,s,l);return}r.validators.push({validator:c,classGroupId:s});return}Object.entries(c).forEach(function(h){var m=h[0],g=h[1];Ed(g,nm(r,m),s,l)})})}function nm(n,r){var s=n;return r.split(Zd).forEach(function(l){s.nextPart.has(l)||s.nextPart.set(l,{nextPart:new Map,validators:[]}),s=s.nextPart.get(l)}),s}function R0(n){return n.isThemeGetter}function A0(n,r){return r?n.map(function(s){var l=s[0],c=s[1],d=c.map(function(h){return typeof h=="string"?r+h:typeof h=="object"?Object.fromEntries(Object.entries(h).map(function(m){var g=m[0],v=m[1];return[r+g,v]})):h});return[l,d]}):n}function D0(n){if(n<1)return{get:function(){},set:function(){}};var r=0,s=new Map,l=new Map;function c(d,h){s.set(d,h),r++,r>n&&(r=0,l=s,s=new Map)}return{get:function(h){var m=s.get(h);if(m!==void 0)return m;if((m=l.get(h))!==void 0)return c(h,m),m},set:function(h,m){s.has(h)?s.set(h,m):c(h,m)}}}var rg="!";function P0(n){var r=n.separator||":",s=r.length===1,l=r[0],c=r.length;return function(h){for(var m=[],g=0,v=0,x,y=0;y<h.length;y++){var N=h[y];if(g===0){if(N===l&&(s||h.slice(y,y+c)===r)){m.push(h.slice(v,y)),v=y+c;continue}if(N==="/"){x=y;continue}}N==="["?g++:N==="]"&&g--}var b=m.length===0?h:h.substring(v),E=b.startsWith(rg),S=E?b.substring(1):b,j=x&&x>v?x-v:void 0;return{modifiers:m,hasImportantModifier:E,baseClassName:S,maybePostfixModifierPosition:j}}}function O0(n){if(n.length<=1)return n;var r=[],s=[];return n.forEach(function(l){var c=l[0]==="[";c?(r.push.apply(r,s.sort().concat([l])),s=[]):s.push(l)}),r.push.apply(r,s.sort()),r}function _0(n){return{cache:D0(n.cacheSize),splitModifiers:P0(n),...j0(n)}}var M0=/\s+/;function I0(n,r){var s=r.splitModifiers,l=r.getClassGroupId,c=r.getConflictingClassGroupIds,d=new Set;return n.trim().split(M0).map(function(h){var m=s(h),g=m.modifiers,v=m.hasImportantModifier,x=m.baseClassName,y=m.maybePostfixModifierPosition,N=l(y?x.substring(0,y):x),b=!!y;if(!N){if(!y)return{isTailwindClass:!1,originalClassName:h};if(N=l(x),!N)return{isTailwindClass:!1,originalClassName:h};b=!1}var E=O0(g).join(":"),S=v?E+rg:E;return{isTailwindClass:!0,modifierId:S,classGroupId:N,originalClassName:h,hasPostfixModifier:b}}).reverse().filter(function(h){if(!h.isTailwindClass)return!0;var m=h.modifierId,g=h.classGroupId,v=h.hasPostfixModifier,x=m+g;return d.has(x)?!1:(d.add(x),c(g,v).forEach(function(y){return d.add(m+y)}),!0)}).reverse().map(function(h){return h.originalClassName}).join(" ")}function L0(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var l,c,d,h=m;function m(v){var x=r[0],y=r.slice(1),N=y.reduce(function(b,E){return E(b)},x());return l=_0(N),c=l.cache.get,d=l.cache.set,h=g,g(v)}function g(v){var x=c(v);if(x)return x;var y=I0(v,l);return d(v,y),y}return function(){return h(E0.apply(null,arguments))}}function Dt(n){var r=function(l){return l[n]||[]};return r.isThemeGetter=!0,r}var og=/^\[(?:([a-z-]+):)?(.+)\]$/i,F0=/^\d+\/\d+$/,$0=new Set(["px","full","screen"]),z0=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,B0=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,U0=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function ir(n){return ns(n)||$0.has(n)||F0.test(n)||jd(n)}function jd(n){return ds(n,"length",K0)}function V0(n){return ds(n,"size",sg)}function W0(n){return ds(n,"position",sg)}function H0(n){return ds(n,"url",Q0)}function Pl(n){return ds(n,"number",ns)}function ns(n){return!Number.isNaN(Number(n))}function G0(n){return n.endsWith("%")&&ns(n.slice(0,-1))}function na(n){return rm(n)||ds(n,"number",rm)}function ct(n){return og.test(n)}function ra(){return!0}function Co(n){return z0.test(n)}function Y0(n){return ds(n,"",X0)}function ds(n,r,s){var l=og.exec(n);return l?l[1]?l[1]===r:s(l[2]):!1}function K0(n){return B0.test(n)}function sg(){return!1}function Q0(n){return n.startsWith("url(")}function rm(n){return Number.isInteger(Number(n))}function X0(n){return U0.test(n)}function J0(){var n=Dt("colors"),r=Dt("spacing"),s=Dt("blur"),l=Dt("brightness"),c=Dt("borderColor"),d=Dt("borderRadius"),h=Dt("borderSpacing"),m=Dt("borderWidth"),g=Dt("contrast"),v=Dt("grayscale"),x=Dt("hueRotate"),y=Dt("invert"),N=Dt("gap"),b=Dt("gradientColorStops"),E=Dt("gradientColorStopPositions"),S=Dt("inset"),j=Dt("margin"),A=Dt("opacity"),T=Dt("padding"),L=Dt("saturate"),F=Dt("scale"),M=Dt("sepia"),H=Dt("skew"),z=Dt("space"),q=Dt("translate"),we=function(){return["auto","contain","none"]},ae=function(){return["auto","hidden","clip","visible","scroll"]},ye=function(){return["auto",ct,r]},xe=function(){return[ct,r]},oe=function(){return["",ir]},be=function(){return["auto",ns,ct]},Te=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},je=function(){return["solid","dashed","dotted","double","none"]},me=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},Q=function(){return["start","end","center","between","around","evenly","stretch"]},ce=function(){return["","0",ct]},ue=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},D=function(){return[ns,Pl]},J=function(){return[ns,ct]};return{cacheSize:500,theme:{colors:[ra],spacing:[ir],blur:["none","",Co,ct],brightness:D(),borderColor:[n],borderRadius:["none","","full",Co,ct],borderSpacing:xe(),borderWidth:oe(),contrast:D(),grayscale:ce(),hueRotate:J(),invert:ce(),gap:xe(),gradientColorStops:[n],gradientColorStopPositions:[G0,jd],inset:ye(),margin:ye(),opacity:D(),padding:xe(),saturate:D(),scale:D(),sepia:ce(),skew:J(),space:xe(),translate:xe()},classGroups:{aspect:[{aspect:["auto","square","video",ct]}],container:["container"],columns:[{columns:[Co]}],"break-after":[{"break-after":ue()}],"break-before":[{"break-before":ue()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(Te(),[ct])}],overflow:[{overflow:ae()}],"overflow-x":[{"overflow-x":ae()}],"overflow-y":[{"overflow-y":ae()}],overscroll:[{overscroll:we()}],"overscroll-x":[{"overscroll-x":we()}],"overscroll-y":[{"overscroll-y":we()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",na]}],basis:[{basis:ye()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ct]}],grow:[{grow:ce()}],shrink:[{shrink:ce()}],order:[{order:["first","last","none",na]}],"grid-cols":[{"grid-cols":[ra]}],"col-start-end":[{col:["auto",{span:["full",na]},ct]}],"col-start":[{"col-start":be()}],"col-end":[{"col-end":be()}],"grid-rows":[{"grid-rows":[ra]}],"row-start-end":[{row:["auto",{span:[na]},ct]}],"row-start":[{"row-start":be()}],"row-end":[{"row-end":be()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ct]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ct]}],gap:[{gap:[N]}],"gap-x":[{"gap-x":[N]}],"gap-y":[{"gap-y":[N]}],"justify-content":[{justify:["normal"].concat(Q())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(Q(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(Q(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[z]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[z]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",ct,r]}],"min-w":[{"min-w":["min","max","fit",ct,ir]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Co]},Co,ct]}],h:[{h:[ct,r,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ct,ir]}],"max-h":[{"max-h":[ct,r,"min","max","fit"]}],"font-size":[{text:["base",Co,jd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Pl]}],"font-family":[{font:[ra]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ct]}],"line-clamp":[{"line-clamp":["none",ns,Pl]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ct,ir]}],"list-image":[{"list-image":["none",ct]}],"list-style-type":[{list:["none","disc","decimal",ct]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(je(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",ir]}],"underline-offset":[{"underline-offset":["auto",ct,ir]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:xe()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ct]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ct]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(Te(),[W0])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",V0]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},H0]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[d]}],"rounded-s":[{"rounded-s":[d]}],"rounded-e":[{"rounded-e":[d]}],"rounded-t":[{"rounded-t":[d]}],"rounded-r":[{"rounded-r":[d]}],"rounded-b":[{"rounded-b":[d]}],"rounded-l":[{"rounded-l":[d]}],"rounded-ss":[{"rounded-ss":[d]}],"rounded-se":[{"rounded-se":[d]}],"rounded-ee":[{"rounded-ee":[d]}],"rounded-es":[{"rounded-es":[d]}],"rounded-tl":[{"rounded-tl":[d]}],"rounded-tr":[{"rounded-tr":[d]}],"rounded-br":[{"rounded-br":[d]}],"rounded-bl":[{"rounded-bl":[d]}],"border-w":[{border:[m]}],"border-w-x":[{"border-x":[m]}],"border-w-y":[{"border-y":[m]}],"border-w-s":[{"border-s":[m]}],"border-w-e":[{"border-e":[m]}],"border-w-t":[{"border-t":[m]}],"border-w-r":[{"border-r":[m]}],"border-w-b":[{"border-b":[m]}],"border-w-l":[{"border-l":[m]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[].concat(je(),["hidden"])}],"divide-x":[{"divide-x":[m]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[m]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:je()}],"border-color":[{border:[c]}],"border-color-x":[{"border-x":[c]}],"border-color-y":[{"border-y":[c]}],"border-color-t":[{"border-t":[c]}],"border-color-r":[{"border-r":[c]}],"border-color-b":[{"border-b":[c]}],"border-color-l":[{"border-l":[c]}],"divide-color":[{divide:[c]}],"outline-style":[{outline:[""].concat(je())}],"outline-offset":[{"outline-offset":[ct,ir]}],"outline-w":[{outline:[ir]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[ir]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Co,Y0]}],"shadow-color":[{shadow:[ra]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":me()}],"bg-blend":[{"bg-blend":me()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[l]}],contrast:[{contrast:[g]}],"drop-shadow":[{"drop-shadow":["","none",Co,ct]}],grayscale:[{grayscale:[v]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[y]}],saturate:[{saturate:[L]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[l]}],"backdrop-contrast":[{"backdrop-contrast":[g]}],"backdrop-grayscale":[{"backdrop-grayscale":[v]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[L]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[h]}],"border-spacing-x":[{"border-spacing-x":[h]}],"border-spacing-y":[{"border-spacing-y":[h]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ct]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",ct]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",ct]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[F]}],"scale-x":[{"scale-x":[F]}],"scale-y":[{"scale-y":[F]}],rotate:[{rotate:[na,ct]}],"translate-x":[{"translate-x":[q]}],"translate-y":[{"translate-y":[q]}],"skew-x":[{"skew-x":[H]}],"skew-y":[{"skew-y":[H]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ct]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ct]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":xe()}],"scroll-mx":[{"scroll-mx":xe()}],"scroll-my":[{"scroll-my":xe()}],"scroll-ms":[{"scroll-ms":xe()}],"scroll-me":[{"scroll-me":xe()}],"scroll-mt":[{"scroll-mt":xe()}],"scroll-mr":[{"scroll-mr":xe()}],"scroll-mb":[{"scroll-mb":xe()}],"scroll-ml":[{"scroll-ml":xe()}],"scroll-p":[{"scroll-p":xe()}],"scroll-px":[{"scroll-px":xe()}],"scroll-py":[{"scroll-py":xe()}],"scroll-ps":[{"scroll-ps":xe()}],"scroll-pe":[{"scroll-pe":xe()}],"scroll-pt":[{"scroll-pt":xe()}],"scroll-pr":[{"scroll-pr":xe()}],"scroll-pb":[{"scroll-pb":xe()}],"scroll-pl":[{"scroll-pl":xe()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ct]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[ir,Pl]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var q0=L0(J0);function vt(...n){return q0(eg(n))}const ss=f.forwardRef(({className:n,...r},s)=>i.jsx("div",{ref:s,className:vt("rounded-lg border bg-card text-card-foreground shadow-sm",n),...r}));ss.displayName="Card";const si=f.forwardRef(({className:n,...r},s)=>i.jsx("div",{ref:s,className:vt("flex flex-col space-y-1.5 p-6",n),...r}));si.displayName="CardHeader";const Yr=f.forwardRef(({className:n,...r},s)=>i.jsx("h3",{ref:s,className:vt("text-2xl font-semibold leading-none tracking-tight",n),...r}));Yr.displayName="CardTitle";const Z0=f.forwardRef(({className:n,...r},s)=>i.jsx("p",{ref:s,className:vt("text-sm text-muted-foreground",n),...r}));Z0.displayName="CardDescription";const is=f.forwardRef(({className:n,...r},s)=>i.jsx("div",{ref:s,className:vt("p-6 pt-0",n),...r}));is.displayName="CardContent";const ew=f.forwardRef(({className:n,...r},s)=>i.jsx("div",{ref:s,className:vt("flex items-center p-6 pt-0",n),...r}));ew.displayName="CardFooter";function om(n,r){if(typeof n=="function")return n(r);n!=null&&(n.current=r)}function ig(...n){return r=>{let s=!1;const l=n.map(c=>{const d=om(c,r);return!s&&typeof d=="function"&&(s=!0),d});if(s)return()=>{for(let c=0;c<l.length;c++){const d=l[c];typeof d=="function"?d():om(n[c],null)}}}}function Pt(...n){return f.useCallback(ig(...n),n)}var as=f.forwardRef((n,r)=>{const{children:s,...l}=n,c=f.Children.toArray(s),d=c.find(tw);if(d){const h=d.props.children,m=c.map(g=>g===d?f.Children.count(h)>1?f.Children.only(null):f.isValidElement(h)?h.props.children:null:g);return i.jsx(kd,{...l,ref:r,children:f.isValidElement(h)?f.cloneElement(h,void 0,m):null})}return i.jsx(kd,{...l,ref:r,children:s})});as.displayName="Slot";var kd=f.forwardRef((n,r)=>{const{children:s,...l}=n;if(f.isValidElement(s)){const c=rw(s);return f.cloneElement(s,{...nw(l,s.props),ref:r?ig(r,c):c})}return f.Children.count(s)>1?f.Children.only(null):null});kd.displayName="SlotClone";var ef=({children:n})=>i.jsx(i.Fragment,{children:n});function tw(n){return f.isValidElement(n)&&n.type===ef}function nw(n,r){const s={...r};for(const l in r){const c=n[l],d=r[l];/^on[A-Z]/.test(l)?c&&d?s[l]=(...m)=>{d(...m),c(...m)}:c&&(s[l]=c):l==="style"?s[l]={...c,...d}:l==="className"&&(s[l]=[c,d].filter(Boolean).join(" "))}return{...n,...s}}function rw(n){let r=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?n.ref:(r=Object.getOwnPropertyDescriptor(n,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?n.props.ref:n.props.ref||n.ref)}const sm=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,im=eg,ow=(n,r)=>s=>{var l;if(r?.variants==null)return im(n,s?.class,s?.className);const{variants:c,defaultVariants:d}=r,h=Object.keys(c).map(v=>{const x=s?.[v],y=d?.[v];if(x===null)return null;const N=sm(x)||sm(y);return c[v][N]}),m=s&&Object.entries(s).reduce((v,x)=>{let[y,N]=x;return N===void 0||(v[y]=N),v},{}),g=r==null||(l=r.compoundVariants)===null||l===void 0?void 0:l.reduce((v,x)=>{let{class:y,className:N,...b}=x;return Object.entries(b).every(E=>{let[S,j]=E;return Array.isArray(j)?j.includes({...d,...m}[S]):{...d,...m}[S]===j})?[...v,y,N]:v},[]);return im(n,h,g,s?.class,s?.className)},sw=ow("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),De=f.forwardRef(({className:n,variant:r,size:s,asChild:l=!1,...c},d)=>{const h=l?as:"button";return i.jsx(h,{className:vt(sw({variant:r,size:s,className:n})),ref:d,...c})});De.displayName="Button";const xn=f.forwardRef(({className:n,type:r,...s},l)=>i.jsx("input",{type:r,className:vt("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors","file:border-0 file:bg-transparent file:text-sm file:font-medium","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","disabled:cursor-not-allowed disabled:opacity-50",n),ref:l,...s}));xn.displayName="Input";const iw=()=>{if(typeof window>"u")return"unknown";const n=window.navigator.userAgent.toLowerCase();return n.includes("android")?"android":n.includes("iphone")||n.includes("ipad")||n.includes("ipod")?"ios":n.includes("mac")?"macos":n.includes("win")?"windows":n.includes("linux")?"linux":"unknown"},tf=()=>{const n=iw();return["windows","macos","linux"].includes(n)};function gt(n,r,{checkForDefaultPrevented:s=!0}={}){return function(c){if(n?.(c),s===!1||!c.defaultPrevented)return r?.(c)}}function aw(n,r){const s=f.createContext(r),l=d=>{const{children:h,...m}=d,g=f.useMemo(()=>m,Object.values(m));return i.jsx(s.Provider,{value:g,children:h})};l.displayName=n+"Provider";function c(d){const h=f.useContext(s);if(h)return h;if(r!==void 0)return r;throw new Error(`\`${d}\` must be used within \`${n}\``)}return[l,c]}function ui(n,r=[]){let s=[];function l(d,h){const m=f.createContext(h),g=s.length;s=[...s,h];const v=y=>{const{scope:N,children:b,...E}=y,S=N?.[n]?.[g]||m,j=f.useMemo(()=>E,Object.values(E));return i.jsx(S.Provider,{value:j,children:b})};v.displayName=d+"Provider";function x(y,N){const b=N?.[n]?.[g]||m,E=f.useContext(b);if(E)return E;if(h!==void 0)return h;throw new Error(`\`${y}\` must be used within \`${d}\``)}return[v,x]}const c=()=>{const d=s.map(h=>f.createContext(h));return function(m){const g=m?.[n]||d;return f.useMemo(()=>({[`__scope${n}`]:{...m,[n]:g}}),[m,g])}};return c.scopeName=n,[l,lw(c,...r)]}function lw(...n){const r=n[0];if(n.length===1)return r;const s=()=>{const l=n.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(d){const h=l.reduce((m,{useScope:g,scopeName:v})=>{const y=g(d)[`__scope${v}`];return{...m,...y}},{});return f.useMemo(()=>({[`__scope${r.scopeName}`]:h}),[h])}};return s.scopeName=r.scopeName,s}var wn=globalThis?.document?f.useLayoutEffect:()=>{},cw=l0.useId||(()=>{}),uw=0;function rs(n){const[r,s]=f.useState(cw());return wn(()=>{s(l=>l??String(uw++))},[n]),r?`radix-${r}`:""}function Kr(n){const r=f.useRef(n);return f.useEffect(()=>{r.current=n}),f.useMemo(()=>(...s)=>r.current?.(...s),[])}function Yl({prop:n,defaultProp:r,onChange:s=()=>{}}){const[l,c]=dw({defaultProp:r,onChange:s}),d=n!==void 0,h=d?n:l,m=Kr(s),g=f.useCallback(v=>{if(d){const y=typeof v=="function"?v(n):v;y!==n&&m(y)}else c(v)},[d,n,c,m]);return[h,g]}function dw({defaultProp:n,onChange:r}){const s=f.useState(n),[l]=s,c=f.useRef(l),d=Kr(r);return f.useEffect(()=>{c.current!==l&&(d(l),c.current=l)},[l,c,d]),s}var Er=Km();const fw=Kd(Er);var hw=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],kt=hw.reduce((n,r)=>{const s=f.forwardRef((l,c)=>{const{asChild:d,...h}=l,m=d?as:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(m,{...h,ref:c})});return s.displayName=`Primitive.${r}`,{...n,[r]:s}},{});function pw(n,r){n&&Er.flushSync(()=>n.dispatchEvent(r))}function mw(n,r=globalThis?.document){const s=Kr(n);f.useEffect(()=>{const l=c=>{c.key==="Escape"&&s(c)};return r.addEventListener("keydown",l,{capture:!0}),()=>r.removeEventListener("keydown",l,{capture:!0})},[s,r])}var gw="DismissableLayer",Td="dismissableLayer.update",vw="dismissableLayer.pointerDownOutside",yw="dismissableLayer.focusOutside",am,ag=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),uc=f.forwardRef((n,r)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:m,...g}=n,v=f.useContext(ag),[x,y]=f.useState(null),N=x?.ownerDocument??globalThis?.document,[,b]=f.useState({}),E=Pt(r,z=>y(z)),S=Array.from(v.layers),[j]=[...v.layersWithOutsidePointerEventsDisabled].slice(-1),A=S.indexOf(j),T=x?S.indexOf(x):-1,L=v.layersWithOutsidePointerEventsDisabled.size>0,F=T>=A,M=Cw(z=>{const q=z.target,we=[...v.branches].some(ae=>ae.contains(q));!F||we||(c?.(z),h?.(z),z.defaultPrevented||m?.())},N),H=bw(z=>{const q=z.target;[...v.branches].some(ae=>ae.contains(q))||(d?.(z),h?.(z),z.defaultPrevented||m?.())},N);return mw(z=>{T===v.layers.size-1&&(l?.(z),!z.defaultPrevented&&m&&(z.preventDefault(),m()))},N),f.useEffect(()=>{if(x)return s&&(v.layersWithOutsidePointerEventsDisabled.size===0&&(am=N.body.style.pointerEvents,N.body.style.pointerEvents="none"),v.layersWithOutsidePointerEventsDisabled.add(x)),v.layers.add(x),lm(),()=>{s&&v.layersWithOutsidePointerEventsDisabled.size===1&&(N.body.style.pointerEvents=am)}},[x,N,s,v]),f.useEffect(()=>()=>{x&&(v.layers.delete(x),v.layersWithOutsidePointerEventsDisabled.delete(x),lm())},[x,v]),f.useEffect(()=>{const z=()=>b({});return document.addEventListener(Td,z),()=>document.removeEventListener(Td,z)},[]),i.jsx(kt.div,{...g,ref:E,style:{pointerEvents:L?F?"auto":"none":void 0,...n.style},onFocusCapture:gt(n.onFocusCapture,H.onFocusCapture),onBlurCapture:gt(n.onBlurCapture,H.onBlurCapture),onPointerDownCapture:gt(n.onPointerDownCapture,M.onPointerDownCapture)})});uc.displayName=gw;var xw="DismissableLayerBranch",ww=f.forwardRef((n,r)=>{const s=f.useContext(ag),l=f.useRef(null),c=Pt(r,l);return f.useEffect(()=>{const d=l.current;if(d)return s.branches.add(d),()=>{s.branches.delete(d)}},[s.branches]),i.jsx(kt.div,{...n,ref:c})});ww.displayName=xw;function Cw(n,r=globalThis?.document){const s=Kr(n),l=f.useRef(!1),c=f.useRef(()=>{});return f.useEffect(()=>{const d=m=>{if(m.target&&!l.current){let g=function(){lg(vw,s,v,{discrete:!0})};const v={originalEvent:m};m.pointerType==="touch"?(r.removeEventListener("click",c.current),c.current=g,r.addEventListener("click",c.current,{once:!0})):g()}else r.removeEventListener("click",c.current);l.current=!1},h=window.setTimeout(()=>{r.addEventListener("pointerdown",d)},0);return()=>{window.clearTimeout(h),r.removeEventListener("pointerdown",d),r.removeEventListener("click",c.current)}},[r,s]),{onPointerDownCapture:()=>l.current=!0}}function bw(n,r=globalThis?.document){const s=Kr(n),l=f.useRef(!1);return f.useEffect(()=>{const c=d=>{d.target&&!l.current&&lg(yw,s,{originalEvent:d},{discrete:!1})};return r.addEventListener("focusin",c),()=>r.removeEventListener("focusin",c)},[r,s]),{onFocusCapture:()=>l.current=!0,onBlurCapture:()=>l.current=!1}}function lm(){const n=new CustomEvent(Td);document.dispatchEvent(n)}function lg(n,r,s,{discrete:l}){const c=s.originalEvent.target,d=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:s});r&&c.addEventListener(n,r,{once:!0}),l?pw(c,d):c.dispatchEvent(d)}var cd="focusScope.autoFocusOnMount",ud="focusScope.autoFocusOnUnmount",cm={bubbles:!1,cancelable:!0},Sw="FocusScope",nf=f.forwardRef((n,r)=>{const{loop:s=!1,trapped:l=!1,onMountAutoFocus:c,onUnmountAutoFocus:d,...h}=n,[m,g]=f.useState(null),v=Kr(c),x=Kr(d),y=f.useRef(null),N=Pt(r,S=>g(S)),b=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(l){let S=function(L){if(b.paused||!m)return;const F=L.target;m.contains(F)?y.current=F:bo(y.current,{select:!0})},j=function(L){if(b.paused||!m)return;const F=L.relatedTarget;F!==null&&(m.contains(F)||bo(y.current,{select:!0}))},A=function(L){if(document.activeElement===document.body)for(const M of L)M.removedNodes.length>0&&bo(m)};document.addEventListener("focusin",S),document.addEventListener("focusout",j);const T=new MutationObserver(A);return m&&T.observe(m,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",j),T.disconnect()}}},[l,m,b.paused]),f.useEffect(()=>{if(m){dm.add(b);const S=document.activeElement;if(!m.contains(S)){const A=new CustomEvent(cd,cm);m.addEventListener(cd,v),m.dispatchEvent(A),A.defaultPrevented||(Nw(Rw(cg(m)),{select:!0}),document.activeElement===S&&bo(m))}return()=>{m.removeEventListener(cd,v),setTimeout(()=>{const A=new CustomEvent(ud,cm);m.addEventListener(ud,x),m.dispatchEvent(A),A.defaultPrevented||bo(S??document.body,{select:!0}),m.removeEventListener(ud,x),dm.remove(b)},0)}}},[m,v,x,b]);const E=f.useCallback(S=>{if(!s&&!l||b.paused)return;const j=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,A=document.activeElement;if(j&&A){const T=S.currentTarget,[L,F]=Ew(T);L&&F?!S.shiftKey&&A===F?(S.preventDefault(),s&&bo(L,{select:!0})):S.shiftKey&&A===L&&(S.preventDefault(),s&&bo(F,{select:!0})):A===T&&S.preventDefault()}},[s,l,b.paused]);return i.jsx(kt.div,{tabIndex:-1,...h,ref:N,onKeyDown:E})});nf.displayName=Sw;function Nw(n,{select:r=!1}={}){const s=document.activeElement;for(const l of n)if(bo(l,{select:r}),document.activeElement!==s)return}function Ew(n){const r=cg(n),s=um(r,n),l=um(r.reverse(),n);return[s,l]}function cg(n){const r=[],s=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const c=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||c?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)r.push(s.currentNode);return r}function um(n,r){for(const s of n)if(!jw(s,{upTo:r}))return s}function jw(n,{upTo:r}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(r!==void 0&&n===r)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function kw(n){return n instanceof HTMLInputElement&&"select"in n}function bo(n,{select:r=!1}={}){if(n&&n.focus){const s=document.activeElement;n.focus({preventScroll:!0}),n!==s&&kw(n)&&r&&n.select()}}var dm=Tw();function Tw(){let n=[];return{add(r){const s=n[0];r!==s&&s?.pause(),n=fm(n,r),n.unshift(r)},remove(r){n=fm(n,r),n[0]?.resume()}}}function fm(n,r){const s=[...n],l=s.indexOf(r);return l!==-1&&s.splice(l,1),s}function Rw(n){return n.filter(r=>r.tagName!=="A")}var Aw="Portal",rf=f.forwardRef((n,r)=>{const{container:s,...l}=n,[c,d]=f.useState(!1);wn(()=>d(!0),[]);const h=s||c&&globalThis?.document?.body;return h?fw.createPortal(i.jsx(kt.div,{...l,ref:r}),h):null});rf.displayName=Aw;function Dw(n,r){return f.useReducer((s,l)=>r[s][l]??s,n)}var va=n=>{const{present:r,children:s}=n,l=Pw(r),c=typeof s=="function"?s({present:l.isPresent}):f.Children.only(s),d=Pt(l.ref,Ow(c));return typeof s=="function"||l.isPresent?f.cloneElement(c,{ref:d}):null};va.displayName="Presence";function Pw(n){const[r,s]=f.useState(),l=f.useRef({}),c=f.useRef(n),d=f.useRef("none"),h=n?"mounted":"unmounted",[m,g]=Dw(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const v=Ol(l.current);d.current=m==="mounted"?v:"none"},[m]),wn(()=>{const v=l.current,x=c.current;if(x!==n){const N=d.current,b=Ol(v);n?g("MOUNT"):b==="none"||v?.display==="none"?g("UNMOUNT"):g(x&&N!==b?"ANIMATION_OUT":"UNMOUNT"),c.current=n}},[n,g]),wn(()=>{if(r){let v;const x=r.ownerDocument.defaultView??window,y=b=>{const S=Ol(l.current).includes(b.animationName);if(b.target===r&&S&&(g("ANIMATION_END"),!c.current)){const j=r.style.animationFillMode;r.style.animationFillMode="forwards",v=x.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=j)})}},N=b=>{b.target===r&&(d.current=Ol(l.current))};return r.addEventListener("animationstart",N),r.addEventListener("animationcancel",y),r.addEventListener("animationend",y),()=>{x.clearTimeout(v),r.removeEventListener("animationstart",N),r.removeEventListener("animationcancel",y),r.removeEventListener("animationend",y)}}else g("ANIMATION_END")},[r,g]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:f.useCallback(v=>{v&&(l.current=getComputedStyle(v)),s(v)},[])}}function Ol(n){return n?.animationName||"none"}function Ow(n){let r=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?n.ref:(r=Object.getOwnPropertyDescriptor(n,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?n.props.ref:n.props.ref||n.ref)}var dd=0;function ug(){f.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??hm()),document.body.insertAdjacentElement("beforeend",n[1]??hm()),dd++,()=>{dd===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),dd--}},[])}function hm(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Sr=function(){return Sr=Object.assign||function(r){for(var s,l=1,c=arguments.length;l<c;l++){s=arguments[l];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(r[d]=s[d])}return r},Sr.apply(this,arguments)};function dg(n,r){var s={};for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&r.indexOf(l)<0&&(s[l]=n[l]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(n);c<l.length;c++)r.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(n,l[c])&&(s[l[c]]=n[l[c]]);return s}function _w(n,r,s){if(s||arguments.length===2)for(var l=0,c=r.length,d;l<c;l++)(d||!(l in r))&&(d||(d=Array.prototype.slice.call(r,0,l)),d[l]=r[l]);return n.concat(d||Array.prototype.slice.call(r))}var Ul="right-scroll-bar-position",Vl="width-before-scroll-bar",Mw="with-scroll-bars-hidden",Iw="--removed-body-scroll-bar-size";function fd(n,r){return typeof n=="function"?n(r):n&&(n.current=r),n}function Lw(n,r){var s=f.useState(function(){return{value:n,callback:r,facade:{get current(){return s.value},set current(l){var c=s.value;c!==l&&(s.value=l,s.callback(l,c))}}}})[0];return s.callback=r,s.facade}var Fw=typeof window<"u"?f.useLayoutEffect:f.useEffect,pm=new WeakMap;function $w(n,r){var s=Lw(null,function(l){return n.forEach(function(c){return fd(c,l)})});return Fw(function(){var l=pm.get(s);if(l){var c=new Set(l),d=new Set(n),h=s.current;c.forEach(function(m){d.has(m)||fd(m,null)}),d.forEach(function(m){c.has(m)||fd(m,h)})}pm.set(s,n)},[n]),s}function zw(n){return n}function Bw(n,r){r===void 0&&(r=zw);var s=[],l=!1,c={read:function(){if(l)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:n},useMedium:function(d){var h=r(d,l);return s.push(h),function(){s=s.filter(function(m){return m!==h})}},assignSyncMedium:function(d){for(l=!0;s.length;){var h=s;s=[],h.forEach(d)}s={push:function(m){return d(m)},filter:function(){return s}}},assignMedium:function(d){l=!0;var h=[];if(s.length){var m=s;s=[],m.forEach(d),h=s}var g=function(){var x=h;h=[],x.forEach(d)},v=function(){return Promise.resolve().then(g)};v(),s={push:function(x){h.push(x),v()},filter:function(x){return h=h.filter(x),s}}}};return c}function Uw(n){n===void 0&&(n={});var r=Bw(null);return r.options=Sr({async:!0,ssr:!1},n),r}var fg=function(n){var r=n.sideCar,s=dg(n,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var l=r.read();if(!l)throw new Error("Sidecar medium not found");return f.createElement(l,Sr({},s))};fg.isSideCarExport=!0;function Vw(n,r){return n.useMedium(r),fg}var hg=Uw(),hd=function(){},dc=f.forwardRef(function(n,r){var s=f.useRef(null),l=f.useState({onScrollCapture:hd,onWheelCapture:hd,onTouchMoveCapture:hd}),c=l[0],d=l[1],h=n.forwardProps,m=n.children,g=n.className,v=n.removeScrollBar,x=n.enabled,y=n.shards,N=n.sideCar,b=n.noIsolation,E=n.inert,S=n.allowPinchZoom,j=n.as,A=j===void 0?"div":j,T=n.gapMode,L=dg(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),F=N,M=$w([s,r]),H=Sr(Sr({},L),c);return f.createElement(f.Fragment,null,x&&f.createElement(F,{sideCar:hg,removeScrollBar:v,shards:y,noIsolation:b,inert:E,setCallbacks:d,allowPinchZoom:!!S,lockRef:s,gapMode:T}),h?f.cloneElement(f.Children.only(m),Sr(Sr({},H),{ref:M})):f.createElement(A,Sr({},H,{className:g,ref:M}),m))});dc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};dc.classNames={fullWidth:Vl,zeroRight:Ul};var Ww=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Hw(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var r=Ww();return r&&n.setAttribute("nonce",r),n}function Gw(n,r){n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r))}function Yw(n){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(n)}var Kw=function(){var n=0,r=null;return{add:function(s){n==0&&(r=Hw())&&(Gw(r,s),Yw(r)),n++},remove:function(){n--,!n&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},Qw=function(){var n=Kw();return function(r,s){f.useEffect(function(){return n.add(r),function(){n.remove()}},[r&&s])}},pg=function(){var n=Qw(),r=function(s){var l=s.styles,c=s.dynamic;return n(l,c),null};return r},Xw={left:0,top:0,right:0,gap:0},pd=function(n){return parseInt(n||"",10)||0},Jw=function(n){var r=window.getComputedStyle(document.body),s=r[n==="padding"?"paddingLeft":"marginLeft"],l=r[n==="padding"?"paddingTop":"marginTop"],c=r[n==="padding"?"paddingRight":"marginRight"];return[pd(s),pd(l),pd(c)]},qw=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Xw;var r=Jw(n),s=document.documentElement.clientWidth,l=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,l-s+r[2]-r[0])}},Zw=pg(),ti="data-scroll-locked",eC=function(n,r,s,l){var c=n.left,d=n.top,h=n.right,m=n.gap;return s===void 0&&(s="margin"),`
  .`.concat(Mw,` {
   overflow: hidden `).concat(l,`;
   padding-right: `).concat(m,"px ").concat(l,`;
  }
  body[`).concat(ti,`] {
    overflow: hidden `).concat(l,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(l,";"),s==="margin"&&`
    padding-left: `.concat(c,`px;
    padding-top: `).concat(d,`px;
    padding-right: `).concat(h,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(m,"px ").concat(l,`;
    `),s==="padding"&&"padding-right: ".concat(m,"px ").concat(l,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ul,` {
    right: `).concat(m,"px ").concat(l,`;
  }
  
  .`).concat(Vl,` {
    margin-right: `).concat(m,"px ").concat(l,`;
  }
  
  .`).concat(Ul," .").concat(Ul,` {
    right: 0 `).concat(l,`;
  }
  
  .`).concat(Vl," .").concat(Vl,` {
    margin-right: 0 `).concat(l,`;
  }
  
  body[`).concat(ti,`] {
    `).concat(Iw,": ").concat(m,`px;
  }
`)},mm=function(){var n=parseInt(document.body.getAttribute(ti)||"0",10);return isFinite(n)?n:0},tC=function(){f.useEffect(function(){return document.body.setAttribute(ti,(mm()+1).toString()),function(){var n=mm()-1;n<=0?document.body.removeAttribute(ti):document.body.setAttribute(ti,n.toString())}},[])},nC=function(n){var r=n.noRelative,s=n.noImportant,l=n.gapMode,c=l===void 0?"margin":l;tC();var d=f.useMemo(function(){return qw(c)},[c]);return f.createElement(Zw,{styles:eC(d,!r,c,s?"":"!important")})},Rd=!1;if(typeof window<"u")try{var _l=Object.defineProperty({},"passive",{get:function(){return Rd=!0,!0}});window.addEventListener("test",_l,_l),window.removeEventListener("test",_l,_l)}catch{Rd=!1}var Xs=Rd?{passive:!1}:!1,rC=function(n){return n.tagName==="TEXTAREA"},mg=function(n,r){if(!(n instanceof Element))return!1;var s=window.getComputedStyle(n);return s[r]!=="hidden"&&!(s.overflowY===s.overflowX&&!rC(n)&&s[r]==="visible")},oC=function(n){return mg(n,"overflowY")},sC=function(n){return mg(n,"overflowX")},gm=function(n,r){var s=r.ownerDocument,l=r;do{typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host);var c=gg(n,l);if(c){var d=vg(n,l),h=d[1],m=d[2];if(h>m)return!0}l=l.parentNode}while(l&&l!==s.body);return!1},iC=function(n){var r=n.scrollTop,s=n.scrollHeight,l=n.clientHeight;return[r,s,l]},aC=function(n){var r=n.scrollLeft,s=n.scrollWidth,l=n.clientWidth;return[r,s,l]},gg=function(n,r){return n==="v"?oC(r):sC(r)},vg=function(n,r){return n==="v"?iC(r):aC(r)},lC=function(n,r){return n==="h"&&r==="rtl"?-1:1},cC=function(n,r,s,l,c){var d=lC(n,window.getComputedStyle(r).direction),h=d*l,m=s.target,g=r.contains(m),v=!1,x=h>0,y=0,N=0;do{var b=vg(n,m),E=b[0],S=b[1],j=b[2],A=S-j-d*E;(E||A)&&gg(n,m)&&(y+=A,N+=E),m instanceof ShadowRoot?m=m.host:m=m.parentNode}while(!g&&m!==document.body||g&&(r.contains(m)||r===m));return(x&&Math.abs(y)<1||!x&&Math.abs(N)<1)&&(v=!0),v},Ml=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},vm=function(n){return[n.deltaX,n.deltaY]},ym=function(n){return n&&"current"in n?n.current:n},uC=function(n,r){return n[0]===r[0]&&n[1]===r[1]},dC=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},fC=0,Js=[];function hC(n){var r=f.useRef([]),s=f.useRef([0,0]),l=f.useRef(),c=f.useState(fC++)[0],d=f.useState(pg)[0],h=f.useRef(n);f.useEffect(function(){h.current=n},[n]),f.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(c));var S=_w([n.lockRef.current],(n.shards||[]).map(ym),!0).filter(Boolean);return S.forEach(function(j){return j.classList.add("allow-interactivity-".concat(c))}),function(){document.body.classList.remove("block-interactivity-".concat(c)),S.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(c))})}}},[n.inert,n.lockRef.current,n.shards]);var m=f.useCallback(function(S,j){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!h.current.allowPinchZoom;var A=Ml(S),T=s.current,L="deltaX"in S?S.deltaX:T[0]-A[0],F="deltaY"in S?S.deltaY:T[1]-A[1],M,H=S.target,z=Math.abs(L)>Math.abs(F)?"h":"v";if("touches"in S&&z==="h"&&H.type==="range")return!1;var q=gm(z,H);if(!q)return!0;if(q?M=z:(M=z==="v"?"h":"v",q=gm(z,H)),!q)return!1;if(!l.current&&"changedTouches"in S&&(L||F)&&(l.current=M),!M)return!0;var we=l.current||M;return cC(we,j,S,we==="h"?L:F)},[]),g=f.useCallback(function(S){var j=S;if(!(!Js.length||Js[Js.length-1]!==d)){var A="deltaY"in j?vm(j):Ml(j),T=r.current.filter(function(M){return M.name===j.type&&(M.target===j.target||j.target===M.shadowParent)&&uC(M.delta,A)})[0];if(T&&T.should){j.cancelable&&j.preventDefault();return}if(!T){var L=(h.current.shards||[]).map(ym).filter(Boolean).filter(function(M){return M.contains(j.target)}),F=L.length>0?m(j,L[0]):!h.current.noIsolation;F&&j.cancelable&&j.preventDefault()}}},[]),v=f.useCallback(function(S,j,A,T){var L={name:S,delta:j,target:A,should:T,shadowParent:pC(A)};r.current.push(L),setTimeout(function(){r.current=r.current.filter(function(F){return F!==L})},1)},[]),x=f.useCallback(function(S){s.current=Ml(S),l.current=void 0},[]),y=f.useCallback(function(S){v(S.type,vm(S),S.target,m(S,n.lockRef.current))},[]),N=f.useCallback(function(S){v(S.type,Ml(S),S.target,m(S,n.lockRef.current))},[]);f.useEffect(function(){return Js.push(d),n.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:N}),document.addEventListener("wheel",g,Xs),document.addEventListener("touchmove",g,Xs),document.addEventListener("touchstart",x,Xs),function(){Js=Js.filter(function(S){return S!==d}),document.removeEventListener("wheel",g,Xs),document.removeEventListener("touchmove",g,Xs),document.removeEventListener("touchstart",x,Xs)}},[]);var b=n.removeScrollBar,E=n.inert;return f.createElement(f.Fragment,null,E?f.createElement(d,{styles:dC(c)}):null,b?f.createElement(nC,{gapMode:n.gapMode}):null)}function pC(n){for(var r=null;n!==null;)n instanceof ShadowRoot&&(r=n.host,n=n.host),n=n.parentNode;return r}const mC=Vw(hg,hC);var of=f.forwardRef(function(n,r){return f.createElement(dc,Sr({},n,{ref:r,sideCar:mC}))});of.classNames=dc.classNames;var gC=function(n){if(typeof document>"u")return null;var r=Array.isArray(n)?n[0]:n;return r.ownerDocument.body},qs=new WeakMap,Il=new WeakMap,Ll={},md=0,yg=function(n){return n&&(n.host||yg(n.parentNode))},vC=function(n,r){return r.map(function(s){if(n.contains(s))return s;var l=yg(s);return l&&n.contains(l)?l:(console.error("aria-hidden",s,"in not contained inside",n,". Doing nothing"),null)}).filter(function(s){return!!s})},yC=function(n,r,s,l){var c=vC(r,Array.isArray(n)?n:[n]);Ll[s]||(Ll[s]=new WeakMap);var d=Ll[s],h=[],m=new Set,g=new Set(c),v=function(y){!y||m.has(y)||(m.add(y),v(y.parentNode))};c.forEach(v);var x=function(y){!y||g.has(y)||Array.prototype.forEach.call(y.children,function(N){if(m.has(N))x(N);else try{var b=N.getAttribute(l),E=b!==null&&b!=="false",S=(qs.get(N)||0)+1,j=(d.get(N)||0)+1;qs.set(N,S),d.set(N,j),h.push(N),S===1&&E&&Il.set(N,!0),j===1&&N.setAttribute(s,"true"),E||N.setAttribute(l,"true")}catch(A){console.error("aria-hidden: cannot operate on ",N,A)}})};return x(r),m.clear(),md++,function(){h.forEach(function(y){var N=qs.get(y)-1,b=d.get(y)-1;qs.set(y,N),d.set(y,b),N||(Il.has(y)||y.removeAttribute(l),Il.delete(y)),b||y.removeAttribute(s)}),md--,md||(qs=new WeakMap,qs=new WeakMap,Il=new WeakMap,Ll={})}},xg=function(n,r,s){s===void 0&&(s="data-aria-hidden");var l=Array.from(Array.isArray(n)?n:[n]),c=gC(n);return c?(l.push.apply(l,Array.from(c.querySelectorAll("[aria-live]"))),yC(l,c,s,"aria-hidden")):function(){return null}},sf="Dialog",[wg,Cg]=ui(sf),[xC,fr]=wg(sf),bg=n=>{const{__scopeDialog:r,children:s,open:l,defaultOpen:c,onOpenChange:d,modal:h=!0}=n,m=f.useRef(null),g=f.useRef(null),[v=!1,x]=Yl({prop:l,defaultProp:c,onChange:d});return i.jsx(xC,{scope:r,triggerRef:m,contentRef:g,contentId:rs(),titleId:rs(),descriptionId:rs(),open:v,onOpenChange:x,onOpenToggle:f.useCallback(()=>x(y=>!y),[x]),modal:h,children:s})};bg.displayName=sf;var Sg="DialogTrigger",Ng=f.forwardRef((n,r)=>{const{__scopeDialog:s,...l}=n,c=fr(Sg,s),d=Pt(r,c.triggerRef);return i.jsx(kt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":c.open,"aria-controls":c.contentId,"data-state":cf(c.open),...l,ref:d,onClick:gt(n.onClick,c.onOpenToggle)})});Ng.displayName=Sg;var af="DialogPortal",[wC,Eg]=wg(af,{forceMount:void 0}),jg=n=>{const{__scopeDialog:r,forceMount:s,children:l,container:c}=n,d=fr(af,r);return i.jsx(wC,{scope:r,forceMount:s,children:f.Children.map(l,h=>i.jsx(va,{present:s||d.open,children:i.jsx(rf,{asChild:!0,container:c,children:h})}))})};jg.displayName=af;var Kl="DialogOverlay",kg=f.forwardRef((n,r)=>{const s=Eg(Kl,n.__scopeDialog),{forceMount:l=s.forceMount,...c}=n,d=fr(Kl,n.__scopeDialog);return d.modal?i.jsx(va,{present:l||d.open,children:i.jsx(CC,{...c,ref:r})}):null});kg.displayName=Kl;var CC=f.forwardRef((n,r)=>{const{__scopeDialog:s,...l}=n,c=fr(Kl,s);return i.jsx(of,{as,allowPinchZoom:!0,shards:[c.contentRef],children:i.jsx(kt.div,{"data-state":cf(c.open),...l,ref:r,style:{pointerEvents:"auto",...l.style}})})}),ls="DialogContent",Tg=f.forwardRef((n,r)=>{const s=Eg(ls,n.__scopeDialog),{forceMount:l=s.forceMount,...c}=n,d=fr(ls,n.__scopeDialog);return i.jsx(va,{present:l||d.open,children:d.modal?i.jsx(bC,{...c,ref:r}):i.jsx(SC,{...c,ref:r})})});Tg.displayName=ls;var bC=f.forwardRef((n,r)=>{const s=fr(ls,n.__scopeDialog),l=f.useRef(null),c=Pt(r,s.contentRef,l);return f.useEffect(()=>{const d=l.current;if(d)return xg(d)},[]),i.jsx(Rg,{...n,ref:c,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gt(n.onCloseAutoFocus,d=>{d.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:gt(n.onPointerDownOutside,d=>{const h=d.detail.originalEvent,m=h.button===0&&h.ctrlKey===!0;(h.button===2||m)&&d.preventDefault()}),onFocusOutside:gt(n.onFocusOutside,d=>d.preventDefault())})}),SC=f.forwardRef((n,r)=>{const s=fr(ls,n.__scopeDialog),l=f.useRef(!1),c=f.useRef(!1);return i.jsx(Rg,{...n,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:d=>{n.onCloseAutoFocus?.(d),d.defaultPrevented||(l.current||s.triggerRef.current?.focus(),d.preventDefault()),l.current=!1,c.current=!1},onInteractOutside:d=>{n.onInteractOutside?.(d),d.defaultPrevented||(l.current=!0,d.detail.originalEvent.type==="pointerdown"&&(c.current=!0));const h=d.target;s.triggerRef.current?.contains(h)&&d.preventDefault(),d.detail.originalEvent.type==="focusin"&&c.current&&d.preventDefault()}})}),Rg=f.forwardRef((n,r)=>{const{__scopeDialog:s,trapFocus:l,onOpenAutoFocus:c,onCloseAutoFocus:d,...h}=n,m=fr(ls,s),g=f.useRef(null),v=Pt(r,g);return ug(),i.jsxs(i.Fragment,{children:[i.jsx(nf,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:c,onUnmountAutoFocus:d,children:i.jsx(uc,{role:"dialog",id:m.contentId,"aria-describedby":m.descriptionId,"aria-labelledby":m.titleId,"data-state":cf(m.open),...h,ref:v,onDismiss:()=>m.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(EC,{titleId:m.titleId}),i.jsx(kC,{contentRef:g,descriptionId:m.descriptionId})]})]})}),lf="DialogTitle",Ag=f.forwardRef((n,r)=>{const{__scopeDialog:s,...l}=n,c=fr(lf,s);return i.jsx(kt.h2,{id:c.titleId,...l,ref:r})});Ag.displayName=lf;var Dg="DialogDescription",Pg=f.forwardRef((n,r)=>{const{__scopeDialog:s,...l}=n,c=fr(Dg,s);return i.jsx(kt.p,{id:c.descriptionId,...l,ref:r})});Pg.displayName=Dg;var Og="DialogClose",_g=f.forwardRef((n,r)=>{const{__scopeDialog:s,...l}=n,c=fr(Og,s);return i.jsx(kt.button,{type:"button",...l,ref:r,onClick:gt(n.onClick,()=>c.onOpenChange(!1))})});_g.displayName=Og;function cf(n){return n?"open":"closed"}var Mg="DialogTitleWarning",[NC,Ig]=aw(Mg,{contentName:ls,titleName:lf,docsSlug:"dialog"}),EC=({titleId:n})=>{const r=Ig(Mg),s=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return f.useEffect(()=>{n&&(document.getElementById(n)||console.error(s))},[s,n]),null},jC="DialogDescriptionWarning",kC=({contentRef:n,descriptionId:r})=>{const l=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ig(jC).contentName}}.`;return f.useEffect(()=>{const c=n.current?.getAttribute("aria-describedby");r&&c&&(document.getElementById(r)||console.warn(l))},[l,n,r]),null},Lg=bg,TC=Ng,Fg=jg,uf=kg,df=Tg,ff=Ag,hf=Pg,pf=_g;const Do=Lg,RC=Fg,$g=f.forwardRef(({className:n,...r},s)=>i.jsx(uf,{ref:s,className:vt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r}));$g.displayName=uf.displayName;const Jr=f.forwardRef(({className:n,children:r,...s},l)=>i.jsxs(RC,{children:[i.jsx($g,{}),i.jsxs(df,{ref:l,className:vt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...s,children:[r,i.jsxs(pf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Dn,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Jr.displayName=df.displayName;const qr=({className:n,...r})=>i.jsx("div",{className:vt("flex flex-col space-y-1.5 text-center sm:text-left",n),...r});qr.displayName="DialogHeader";const Zr=f.forwardRef(({className:n,...r},s)=>i.jsx(ff,{ref:s,className:vt("text-lg font-semibold leading-none tracking-tight",n),...r}));Zr.displayName=ff.displayName;const eo=f.forwardRef(({className:n,...r},s)=>i.jsx(hf,{ref:s,className:vt("text-sm text-muted-foreground",n),...r}));eo.displayName=hf.displayName;const os=f.forwardRef(({className:n,...r},s)=>i.jsx("textarea",{className:vt("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:s,...r}));os.displayName="Textarea";const No=f.forwardRef(({className:n,...r},s)=>i.jsx("label",{ref:s,className:vt("text-sm font-medium leading-none text-gray-300 peer-disabled:cursor-not-allowed peer-disabled:opacity-70",n),...r}));No.displayName="Label";const AC=["top","right","bottom","left"],ko=Math.min,Fn=Math.max,Ql=Math.round,Fl=Math.floor,jr=n=>({x:n,y:n}),DC={left:"right",right:"left",bottom:"top",top:"bottom"},PC={start:"end",end:"start"};function Ad(n,r,s){return Fn(n,ko(r,s))}function Qr(n,r){return typeof n=="function"?n(r):n}function Xr(n){return n.split("-")[0]}function di(n){return n.split("-")[1]}function mf(n){return n==="x"?"y":"x"}function gf(n){return n==="y"?"height":"width"}function To(n){return["top","bottom"].includes(Xr(n))?"y":"x"}function vf(n){return mf(To(n))}function OC(n,r,s){s===void 0&&(s=!1);const l=di(n),c=vf(n),d=gf(c);let h=c==="x"?l===(s?"end":"start")?"right":"left":l==="start"?"bottom":"top";return r.reference[d]>r.floating[d]&&(h=Xl(h)),[h,Xl(h)]}function _C(n){const r=Xl(n);return[Dd(n),r,Dd(r)]}function Dd(n){return n.replace(/start|end/g,r=>PC[r])}function MC(n,r,s){const l=["left","right"],c=["right","left"],d=["top","bottom"],h=["bottom","top"];switch(n){case"top":case"bottom":return s?r?c:l:r?l:c;case"left":case"right":return r?d:h;default:return[]}}function IC(n,r,s,l){const c=di(n);let d=MC(Xr(n),s==="start",l);return c&&(d=d.map(h=>h+"-"+c),r&&(d=d.concat(d.map(Dd)))),d}function Xl(n){return n.replace(/left|right|bottom|top/g,r=>DC[r])}function LC(n){return{top:0,right:0,bottom:0,left:0,...n}}function zg(n){return typeof n!="number"?LC(n):{top:n,right:n,bottom:n,left:n}}function Jl(n){const{x:r,y:s,width:l,height:c}=n;return{width:l,height:c,top:s,left:r,right:r+l,bottom:s+c,x:r,y:s}}function xm(n,r,s){let{reference:l,floating:c}=n;const d=To(r),h=vf(r),m=gf(h),g=Xr(r),v=d==="y",x=l.x+l.width/2-c.width/2,y=l.y+l.height/2-c.height/2,N=l[m]/2-c[m]/2;let b;switch(g){case"top":b={x,y:l.y-c.height};break;case"bottom":b={x,y:l.y+l.height};break;case"right":b={x:l.x+l.width,y};break;case"left":b={x:l.x-c.width,y};break;default:b={x:l.x,y:l.y}}switch(di(r)){case"start":b[h]-=N*(s&&v?-1:1);break;case"end":b[h]+=N*(s&&v?-1:1);break}return b}const FC=async(n,r,s)=>{const{placement:l="bottom",strategy:c="absolute",middleware:d=[],platform:h}=s,m=d.filter(Boolean),g=await(h.isRTL==null?void 0:h.isRTL(r));let v=await h.getElementRects({reference:n,floating:r,strategy:c}),{x,y}=xm(v,l,g),N=l,b={},E=0;for(let S=0;S<m.length;S++){const{name:j,fn:A}=m[S],{x:T,y:L,data:F,reset:M}=await A({x,y,initialPlacement:l,placement:N,strategy:c,middlewareData:b,rects:v,platform:h,elements:{reference:n,floating:r}});x=T??x,y=L??y,b={...b,[j]:{...b[j],...F}},M&&E<=50&&(E++,typeof M=="object"&&(M.placement&&(N=M.placement),M.rects&&(v=M.rects===!0?await h.getElementRects({reference:n,floating:r,strategy:c}):M.rects),{x,y}=xm(v,N,g)),S=-1)}return{x,y,placement:N,strategy:c,middlewareData:b}};async function ua(n,r){var s;r===void 0&&(r={});const{x:l,y:c,platform:d,rects:h,elements:m,strategy:g}=n,{boundary:v="clippingAncestors",rootBoundary:x="viewport",elementContext:y="floating",altBoundary:N=!1,padding:b=0}=Qr(r,n),E=zg(b),j=m[N?y==="floating"?"reference":"floating":y],A=Jl(await d.getClippingRect({element:(s=await(d.isElement==null?void 0:d.isElement(j)))==null||s?j:j.contextElement||await(d.getDocumentElement==null?void 0:d.getDocumentElement(m.floating)),boundary:v,rootBoundary:x,strategy:g})),T=y==="floating"?{x:l,y:c,width:h.floating.width,height:h.floating.height}:h.reference,L=await(d.getOffsetParent==null?void 0:d.getOffsetParent(m.floating)),F=await(d.isElement==null?void 0:d.isElement(L))?await(d.getScale==null?void 0:d.getScale(L))||{x:1,y:1}:{x:1,y:1},M=Jl(d.convertOffsetParentRelativeRectToViewportRelativeRect?await d.convertOffsetParentRelativeRectToViewportRelativeRect({elements:m,rect:T,offsetParent:L,strategy:g}):T);return{top:(A.top-M.top+E.top)/F.y,bottom:(M.bottom-A.bottom+E.bottom)/F.y,left:(A.left-M.left+E.left)/F.x,right:(M.right-A.right+E.right)/F.x}}const $C=n=>({name:"arrow",options:n,async fn(r){const{x:s,y:l,placement:c,rects:d,platform:h,elements:m,middlewareData:g}=r,{element:v,padding:x=0}=Qr(n,r)||{};if(v==null)return{};const y=zg(x),N={x:s,y:l},b=vf(c),E=gf(b),S=await h.getDimensions(v),j=b==="y",A=j?"top":"left",T=j?"bottom":"right",L=j?"clientHeight":"clientWidth",F=d.reference[E]+d.reference[b]-N[b]-d.floating[E],M=N[b]-d.reference[b],H=await(h.getOffsetParent==null?void 0:h.getOffsetParent(v));let z=H?H[L]:0;(!z||!await(h.isElement==null?void 0:h.isElement(H)))&&(z=m.floating[L]||d.floating[E]);const q=F/2-M/2,we=z/2-S[E]/2-1,ae=ko(y[A],we),ye=ko(y[T],we),xe=ae,oe=z-S[E]-ye,be=z/2-S[E]/2+q,Te=Ad(xe,be,oe),je=!g.arrow&&di(c)!=null&&be!==Te&&d.reference[E]/2-(be<xe?ae:ye)-S[E]/2<0,me=je?be<xe?be-xe:be-oe:0;return{[b]:N[b]+me,data:{[b]:Te,centerOffset:be-Te-me,...je&&{alignmentOffset:me}},reset:je}}}),zC=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(r){var s,l;const{placement:c,middlewareData:d,rects:h,initialPlacement:m,platform:g,elements:v}=r,{mainAxis:x=!0,crossAxis:y=!0,fallbackPlacements:N,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:S=!0,...j}=Qr(n,r);if((s=d.arrow)!=null&&s.alignmentOffset)return{};const A=Xr(c),T=To(m),L=Xr(m)===m,F=await(g.isRTL==null?void 0:g.isRTL(v.floating)),M=N||(L||!S?[Xl(m)]:_C(m)),H=E!=="none";!N&&H&&M.push(...IC(m,S,E,F));const z=[m,...M],q=await ua(r,j),we=[];let ae=((l=d.flip)==null?void 0:l.overflows)||[];if(x&&we.push(q[A]),y){const be=OC(c,h,F);we.push(q[be[0]],q[be[1]])}if(ae=[...ae,{placement:c,overflows:we}],!we.every(be=>be<=0)){var ye,xe;const be=(((ye=d.flip)==null?void 0:ye.index)||0)+1,Te=z[be];if(Te)return{data:{index:be,overflows:ae},reset:{placement:Te}};let je=(xe=ae.filter(me=>me.overflows[0]<=0).sort((me,Q)=>me.overflows[1]-Q.overflows[1])[0])==null?void 0:xe.placement;if(!je)switch(b){case"bestFit":{var oe;const me=(oe=ae.filter(Q=>{if(H){const ce=To(Q.placement);return ce===T||ce==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter(ce=>ce>0).reduce((ce,ue)=>ce+ue,0)]).sort((Q,ce)=>Q[1]-ce[1])[0])==null?void 0:oe[0];me&&(je=me);break}case"initialPlacement":je=m;break}if(c!==je)return{reset:{placement:je}}}return{}}}};function wm(n,r){return{top:n.top-r.height,right:n.right-r.width,bottom:n.bottom-r.height,left:n.left-r.width}}function Cm(n){return AC.some(r=>n[r]>=0)}const BC=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(r){const{rects:s}=r,{strategy:l="referenceHidden",...c}=Qr(n,r);switch(l){case"referenceHidden":{const d=await ua(r,{...c,elementContext:"reference"}),h=wm(d,s.reference);return{data:{referenceHiddenOffsets:h,referenceHidden:Cm(h)}}}case"escaped":{const d=await ua(r,{...c,altBoundary:!0}),h=wm(d,s.floating);return{data:{escapedOffsets:h,escaped:Cm(h)}}}default:return{}}}}};async function UC(n,r){const{placement:s,platform:l,elements:c}=n,d=await(l.isRTL==null?void 0:l.isRTL(c.floating)),h=Xr(s),m=di(s),g=To(s)==="y",v=["left","top"].includes(h)?-1:1,x=d&&g?-1:1,y=Qr(r,n);let{mainAxis:N,crossAxis:b,alignmentAxis:E}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return m&&typeof E=="number"&&(b=m==="end"?E*-1:E),g?{x:b*x,y:N*v}:{x:N*v,y:b*x}}const VC=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(r){var s,l;const{x:c,y:d,placement:h,middlewareData:m}=r,g=await UC(r,n);return h===((s=m.offset)==null?void 0:s.placement)&&(l=m.arrow)!=null&&l.alignmentOffset?{}:{x:c+g.x,y:d+g.y,data:{...g,placement:h}}}}},WC=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(r){const{x:s,y:l,placement:c}=r,{mainAxis:d=!0,crossAxis:h=!1,limiter:m={fn:j=>{let{x:A,y:T}=j;return{x:A,y:T}}},...g}=Qr(n,r),v={x:s,y:l},x=await ua(r,g),y=To(Xr(c)),N=mf(y);let b=v[N],E=v[y];if(d){const j=N==="y"?"top":"left",A=N==="y"?"bottom":"right",T=b+x[j],L=b-x[A];b=Ad(T,b,L)}if(h){const j=y==="y"?"top":"left",A=y==="y"?"bottom":"right",T=E+x[j],L=E-x[A];E=Ad(T,E,L)}const S=m.fn({...r,[N]:b,[y]:E});return{...S,data:{x:S.x-s,y:S.y-l,enabled:{[N]:d,[y]:h}}}}}},HC=function(n){return n===void 0&&(n={}),{options:n,fn(r){const{x:s,y:l,placement:c,rects:d,middlewareData:h}=r,{offset:m=0,mainAxis:g=!0,crossAxis:v=!0}=Qr(n,r),x={x:s,y:l},y=To(c),N=mf(y);let b=x[N],E=x[y];const S=Qr(m,r),j=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(g){const L=N==="y"?"height":"width",F=d.reference[N]-d.floating[L]+j.mainAxis,M=d.reference[N]+d.reference[L]-j.mainAxis;b<F?b=F:b>M&&(b=M)}if(v){var A,T;const L=N==="y"?"width":"height",F=["top","left"].includes(Xr(c)),M=d.reference[y]-d.floating[L]+(F&&((A=h.offset)==null?void 0:A[y])||0)+(F?0:j.crossAxis),H=d.reference[y]+d.reference[L]+(F?0:((T=h.offset)==null?void 0:T[y])||0)-(F?j.crossAxis:0);E<M?E=M:E>H&&(E=H)}return{[N]:b,[y]:E}}}},GC=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(r){var s,l;const{placement:c,rects:d,platform:h,elements:m}=r,{apply:g=()=>{},...v}=Qr(n,r),x=await ua(r,v),y=Xr(c),N=di(c),b=To(c)==="y",{width:E,height:S}=d.floating;let j,A;y==="top"||y==="bottom"?(j=y,A=N===(await(h.isRTL==null?void 0:h.isRTL(m.floating))?"start":"end")?"left":"right"):(A=y,j=N==="end"?"top":"bottom");const T=S-x.top-x.bottom,L=E-x.left-x.right,F=ko(S-x[j],T),M=ko(E-x[A],L),H=!r.middlewareData.shift;let z=F,q=M;if((s=r.middlewareData.shift)!=null&&s.enabled.x&&(q=L),(l=r.middlewareData.shift)!=null&&l.enabled.y&&(z=T),H&&!N){const ae=Fn(x.left,0),ye=Fn(x.right,0),xe=Fn(x.top,0),oe=Fn(x.bottom,0);b?q=E-2*(ae!==0||ye!==0?ae+ye:Fn(x.left,x.right)):z=S-2*(xe!==0||oe!==0?xe+oe:Fn(x.top,x.bottom))}await g({...r,availableWidth:q,availableHeight:z});const we=await h.getDimensions(m.floating);return E!==we.width||S!==we.height?{reset:{rects:!0}}:{}}}};function fc(){return typeof window<"u"}function fi(n){return Bg(n)?(n.nodeName||"").toLowerCase():"#document"}function $n(n){var r;return(n==null||(r=n.ownerDocument)==null?void 0:r.defaultView)||window}function Rr(n){var r;return(r=(Bg(n)?n.ownerDocument:n.document)||window.document)==null?void 0:r.documentElement}function Bg(n){return fc()?n instanceof Node||n instanceof $n(n).Node:!1}function cr(n){return fc()?n instanceof Element||n instanceof $n(n).Element:!1}function kr(n){return fc()?n instanceof HTMLElement||n instanceof $n(n).HTMLElement:!1}function bm(n){return!fc()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof $n(n).ShadowRoot}function ya(n){const{overflow:r,overflowX:s,overflowY:l,display:c}=ur(n);return/auto|scroll|overlay|hidden|clip/.test(r+l+s)&&!["inline","contents"].includes(c)}function YC(n){return["table","td","th"].includes(fi(n))}function hc(n){return[":popover-open",":modal"].some(r=>{try{return n.matches(r)}catch{return!1}})}function yf(n){const r=xf(),s=cr(n)?ur(n):n;return s.transform!=="none"||s.perspective!=="none"||(s.containerType?s.containerType!=="normal":!1)||!r&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!r&&(s.filter?s.filter!=="none":!1)||["transform","perspective","filter"].some(l=>(s.willChange||"").includes(l))||["paint","layout","strict","content"].some(l=>(s.contain||"").includes(l))}function KC(n){let r=Ro(n);for(;kr(r)&&!ii(r);){if(yf(r))return r;if(hc(r))return null;r=Ro(r)}return null}function xf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ii(n){return["html","body","#document"].includes(fi(n))}function ur(n){return $n(n).getComputedStyle(n)}function pc(n){return cr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Ro(n){if(fi(n)==="html")return n;const r=n.assignedSlot||n.parentNode||bm(n)&&n.host||Rr(n);return bm(r)?r.host:r}function Ug(n){const r=Ro(n);return ii(r)?n.ownerDocument?n.ownerDocument.body:n.body:kr(r)&&ya(r)?r:Ug(r)}function da(n,r,s){var l;r===void 0&&(r=[]),s===void 0&&(s=!0);const c=Ug(n),d=c===((l=n.ownerDocument)==null?void 0:l.body),h=$n(c);if(d){const m=Pd(h);return r.concat(h,h.visualViewport||[],ya(c)?c:[],m&&s?da(m):[])}return r.concat(c,da(c,[],s))}function Pd(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Vg(n){const r=ur(n);let s=parseFloat(r.width)||0,l=parseFloat(r.height)||0;const c=kr(n),d=c?n.offsetWidth:s,h=c?n.offsetHeight:l,m=Ql(s)!==d||Ql(l)!==h;return m&&(s=d,l=h),{width:s,height:l,$:m}}function wf(n){return cr(n)?n:n.contextElement}function ni(n){const r=wf(n);if(!kr(r))return jr(1);const s=r.getBoundingClientRect(),{width:l,height:c,$:d}=Vg(r);let h=(d?Ql(s.width):s.width)/l,m=(d?Ql(s.height):s.height)/c;return(!h||!Number.isFinite(h))&&(h=1),(!m||!Number.isFinite(m))&&(m=1),{x:h,y:m}}const QC=jr(0);function Wg(n){const r=$n(n);return!xf()||!r.visualViewport?QC:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function XC(n,r,s){return r===void 0&&(r=!1),!s||r&&s!==$n(n)?!1:r}function cs(n,r,s,l){r===void 0&&(r=!1),s===void 0&&(s=!1);const c=n.getBoundingClientRect(),d=wf(n);let h=jr(1);r&&(l?cr(l)&&(h=ni(l)):h=ni(n));const m=XC(d,s,l)?Wg(d):jr(0);let g=(c.left+m.x)/h.x,v=(c.top+m.y)/h.y,x=c.width/h.x,y=c.height/h.y;if(d){const N=$n(d),b=l&&cr(l)?$n(l):l;let E=N,S=Pd(E);for(;S&&l&&b!==E;){const j=ni(S),A=S.getBoundingClientRect(),T=ur(S),L=A.left+(S.clientLeft+parseFloat(T.paddingLeft))*j.x,F=A.top+(S.clientTop+parseFloat(T.paddingTop))*j.y;g*=j.x,v*=j.y,x*=j.x,y*=j.y,g+=L,v+=F,E=$n(S),S=Pd(E)}}return Jl({width:x,height:y,x:g,y:v})}function Cf(n,r){const s=pc(n).scrollLeft;return r?r.left+s:cs(Rr(n)).left+s}function Hg(n,r,s){s===void 0&&(s=!1);const l=n.getBoundingClientRect(),c=l.left+r.scrollLeft-(s?0:Cf(n,l)),d=l.top+r.scrollTop;return{x:c,y:d}}function JC(n){let{elements:r,rect:s,offsetParent:l,strategy:c}=n;const d=c==="fixed",h=Rr(l),m=r?hc(r.floating):!1;if(l===h||m&&d)return s;let g={scrollLeft:0,scrollTop:0},v=jr(1);const x=jr(0),y=kr(l);if((y||!y&&!d)&&((fi(l)!=="body"||ya(h))&&(g=pc(l)),kr(l))){const b=cs(l);v=ni(l),x.x=b.x+l.clientLeft,x.y=b.y+l.clientTop}const N=h&&!y&&!d?Hg(h,g,!0):jr(0);return{width:s.width*v.x,height:s.height*v.y,x:s.x*v.x-g.scrollLeft*v.x+x.x+N.x,y:s.y*v.y-g.scrollTop*v.y+x.y+N.y}}function qC(n){return Array.from(n.getClientRects())}function ZC(n){const r=Rr(n),s=pc(n),l=n.ownerDocument.body,c=Fn(r.scrollWidth,r.clientWidth,l.scrollWidth,l.clientWidth),d=Fn(r.scrollHeight,r.clientHeight,l.scrollHeight,l.clientHeight);let h=-s.scrollLeft+Cf(n);const m=-s.scrollTop;return ur(l).direction==="rtl"&&(h+=Fn(r.clientWidth,l.clientWidth)-c),{width:c,height:d,x:h,y:m}}function eb(n,r){const s=$n(n),l=Rr(n),c=s.visualViewport;let d=l.clientWidth,h=l.clientHeight,m=0,g=0;if(c){d=c.width,h=c.height;const v=xf();(!v||v&&r==="fixed")&&(m=c.offsetLeft,g=c.offsetTop)}return{width:d,height:h,x:m,y:g}}function tb(n,r){const s=cs(n,!0,r==="fixed"),l=s.top+n.clientTop,c=s.left+n.clientLeft,d=kr(n)?ni(n):jr(1),h=n.clientWidth*d.x,m=n.clientHeight*d.y,g=c*d.x,v=l*d.y;return{width:h,height:m,x:g,y:v}}function Sm(n,r,s){let l;if(r==="viewport")l=eb(n,s);else if(r==="document")l=ZC(Rr(n));else if(cr(r))l=tb(r,s);else{const c=Wg(n);l={x:r.x-c.x,y:r.y-c.y,width:r.width,height:r.height}}return Jl(l)}function Gg(n,r){const s=Ro(n);return s===r||!cr(s)||ii(s)?!1:ur(s).position==="fixed"||Gg(s,r)}function nb(n,r){const s=r.get(n);if(s)return s;let l=da(n,[],!1).filter(m=>cr(m)&&fi(m)!=="body"),c=null;const d=ur(n).position==="fixed";let h=d?Ro(n):n;for(;cr(h)&&!ii(h);){const m=ur(h),g=yf(h);!g&&m.position==="fixed"&&(c=null),(d?!g&&!c:!g&&m.position==="static"&&!!c&&["absolute","fixed"].includes(c.position)||ya(h)&&!g&&Gg(n,h))?l=l.filter(x=>x!==h):c=m,h=Ro(h)}return r.set(n,l),l}function rb(n){let{element:r,boundary:s,rootBoundary:l,strategy:c}=n;const h=[...s==="clippingAncestors"?hc(r)?[]:nb(r,this._c):[].concat(s),l],m=h[0],g=h.reduce((v,x)=>{const y=Sm(r,x,c);return v.top=Fn(y.top,v.top),v.right=ko(y.right,v.right),v.bottom=ko(y.bottom,v.bottom),v.left=Fn(y.left,v.left),v},Sm(r,m,c));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function ob(n){const{width:r,height:s}=Vg(n);return{width:r,height:s}}function sb(n,r,s){const l=kr(r),c=Rr(r),d=s==="fixed",h=cs(n,!0,d,r);let m={scrollLeft:0,scrollTop:0};const g=jr(0);if(l||!l&&!d)if((fi(r)!=="body"||ya(c))&&(m=pc(r)),l){const N=cs(r,!0,d,r);g.x=N.x+r.clientLeft,g.y=N.y+r.clientTop}else c&&(g.x=Cf(c));const v=c&&!l&&!d?Hg(c,m):jr(0),x=h.left+m.scrollLeft-g.x-v.x,y=h.top+m.scrollTop-g.y-v.y;return{x,y,width:h.width,height:h.height}}function gd(n){return ur(n).position==="static"}function Nm(n,r){if(!kr(n)||ur(n).position==="fixed")return null;if(r)return r(n);let s=n.offsetParent;return Rr(n)===s&&(s=s.ownerDocument.body),s}function Yg(n,r){const s=$n(n);if(hc(n))return s;if(!kr(n)){let c=Ro(n);for(;c&&!ii(c);){if(cr(c)&&!gd(c))return c;c=Ro(c)}return s}let l=Nm(n,r);for(;l&&YC(l)&&gd(l);)l=Nm(l,r);return l&&ii(l)&&gd(l)&&!yf(l)?s:l||KC(n)||s}const ib=async function(n){const r=this.getOffsetParent||Yg,s=this.getDimensions,l=await s(n.floating);return{reference:sb(n.reference,await r(n.floating),n.strategy),floating:{x:0,y:0,width:l.width,height:l.height}}};function ab(n){return ur(n).direction==="rtl"}const lb={convertOffsetParentRelativeRectToViewportRelativeRect:JC,getDocumentElement:Rr,getClippingRect:rb,getOffsetParent:Yg,getElementRects:ib,getClientRects:qC,getDimensions:ob,getScale:ni,isElement:cr,isRTL:ab};function cb(n,r){let s=null,l;const c=Rr(n);function d(){var m;clearTimeout(l),(m=s)==null||m.disconnect(),s=null}function h(m,g){m===void 0&&(m=!1),g===void 0&&(g=1),d();const{left:v,top:x,width:y,height:N}=n.getBoundingClientRect();if(m||r(),!y||!N)return;const b=Fl(x),E=Fl(c.clientWidth-(v+y)),S=Fl(c.clientHeight-(x+N)),j=Fl(v),T={rootMargin:-b+"px "+-E+"px "+-S+"px "+-j+"px",threshold:Fn(0,ko(1,g))||1};let L=!0;function F(M){const H=M[0].intersectionRatio;if(H!==g){if(!L)return h();H?h(!1,H):l=setTimeout(()=>{h(!1,1e-7)},1e3)}L=!1}try{s=new IntersectionObserver(F,{...T,root:c.ownerDocument})}catch{s=new IntersectionObserver(F,T)}s.observe(n)}return h(!0),d}function ub(n,r,s,l){l===void 0&&(l={});const{ancestorScroll:c=!0,ancestorResize:d=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:m=typeof IntersectionObserver=="function",animationFrame:g=!1}=l,v=wf(n),x=c||d?[...v?da(v):[],...da(r)]:[];x.forEach(A=>{c&&A.addEventListener("scroll",s,{passive:!0}),d&&A.addEventListener("resize",s)});const y=v&&m?cb(v,s):null;let N=-1,b=null;h&&(b=new ResizeObserver(A=>{let[T]=A;T&&T.target===v&&b&&(b.unobserve(r),cancelAnimationFrame(N),N=requestAnimationFrame(()=>{var L;(L=b)==null||L.observe(r)})),s()}),v&&!g&&b.observe(v),b.observe(r));let E,S=g?cs(n):null;g&&j();function j(){const A=cs(n);S&&(A.x!==S.x||A.y!==S.y||A.width!==S.width||A.height!==S.height)&&s(),S=A,E=requestAnimationFrame(j)}return s(),()=>{var A;x.forEach(T=>{c&&T.removeEventListener("scroll",s),d&&T.removeEventListener("resize",s)}),y?.(),(A=b)==null||A.disconnect(),b=null,g&&cancelAnimationFrame(E)}}const db=VC,fb=WC,hb=zC,pb=GC,mb=BC,Em=$C,gb=HC,vb=(n,r,s)=>{const l=new Map,c={platform:lb,...s},d={...c.platform,_c:l};return FC(n,r,{...c,platform:d})};var Wl=typeof document<"u"?f.useLayoutEffect:f.useEffect;function ql(n,r){if(n===r)return!0;if(typeof n!=typeof r)return!1;if(typeof n=="function"&&n.toString()===r.toString())return!0;let s,l,c;if(n&&r&&typeof n=="object"){if(Array.isArray(n)){if(s=n.length,s!==r.length)return!1;for(l=s;l--!==0;)if(!ql(n[l],r[l]))return!1;return!0}if(c=Object.keys(n),s=c.length,s!==Object.keys(r).length)return!1;for(l=s;l--!==0;)if(!{}.hasOwnProperty.call(r,c[l]))return!1;for(l=s;l--!==0;){const d=c[l];if(!(d==="_owner"&&n.$$typeof)&&!ql(n[d],r[d]))return!1}return!0}return n!==n&&r!==r}function Kg(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function jm(n,r){const s=Kg(n);return Math.round(r*s)/s}function vd(n){const r=f.useRef(n);return Wl(()=>{r.current=n}),r}function yb(n){n===void 0&&(n={});const{placement:r="bottom",strategy:s="absolute",middleware:l=[],platform:c,elements:{reference:d,floating:h}={},transform:m=!0,whileElementsMounted:g,open:v}=n,[x,y]=f.useState({x:0,y:0,strategy:s,placement:r,middlewareData:{},isPositioned:!1}),[N,b]=f.useState(l);ql(N,l)||b(l);const[E,S]=f.useState(null),[j,A]=f.useState(null),T=f.useCallback(Q=>{Q!==H.current&&(H.current=Q,S(Q))},[]),L=f.useCallback(Q=>{Q!==z.current&&(z.current=Q,A(Q))},[]),F=d||E,M=h||j,H=f.useRef(null),z=f.useRef(null),q=f.useRef(x),we=g!=null,ae=vd(g),ye=vd(c),xe=vd(v),oe=f.useCallback(()=>{if(!H.current||!z.current)return;const Q={placement:r,strategy:s,middleware:N};ye.current&&(Q.platform=ye.current),vb(H.current,z.current,Q).then(ce=>{const ue={...ce,isPositioned:xe.current!==!1};be.current&&!ql(q.current,ue)&&(q.current=ue,Er.flushSync(()=>{y(ue)}))})},[N,r,s,ye,xe]);Wl(()=>{v===!1&&q.current.isPositioned&&(q.current.isPositioned=!1,y(Q=>({...Q,isPositioned:!1})))},[v]);const be=f.useRef(!1);Wl(()=>(be.current=!0,()=>{be.current=!1}),[]),Wl(()=>{if(F&&(H.current=F),M&&(z.current=M),F&&M){if(ae.current)return ae.current(F,M,oe);oe()}},[F,M,oe,ae,we]);const Te=f.useMemo(()=>({reference:H,floating:z,setReference:T,setFloating:L}),[T,L]),je=f.useMemo(()=>({reference:F,floating:M}),[F,M]),me=f.useMemo(()=>{const Q={position:s,left:0,top:0};if(!je.floating)return Q;const ce=jm(je.floating,x.x),ue=jm(je.floating,x.y);return m?{...Q,transform:"translate("+ce+"px, "+ue+"px)",...Kg(je.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:ce,top:ue}},[s,m,je.floating,x.x,x.y]);return f.useMemo(()=>({...x,update:oe,refs:Te,elements:je,floatingStyles:me}),[x,oe,Te,je,me])}const xb=n=>{function r(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:n,fn(s){const{element:l,padding:c}=typeof n=="function"?n(s):n;return l&&r(l)?l.current!=null?Em({element:l.current,padding:c}).fn(s):{}:l?Em({element:l,padding:c}).fn(s):{}}}},wb=(n,r)=>({...db(n),options:[n,r]}),Cb=(n,r)=>({...fb(n),options:[n,r]}),bb=(n,r)=>({...gb(n),options:[n,r]}),Sb=(n,r)=>({...hb(n),options:[n,r]}),Nb=(n,r)=>({...pb(n),options:[n,r]}),Eb=(n,r)=>({...mb(n),options:[n,r]}),jb=(n,r)=>({...xb(n),options:[n,r]});var kb="Arrow",Qg=f.forwardRef((n,r)=>{const{children:s,width:l=10,height:c=5,...d}=n;return i.jsx(kt.svg,{...d,ref:r,width:l,height:c,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?s:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});Qg.displayName=kb;var Tb=Qg;function Rb(n){const[r,s]=f.useState(void 0);return wn(()=>{if(n){s({width:n.offsetWidth,height:n.offsetHeight});const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const d=c[0];let h,m;if("borderBoxSize"in d){const g=d.borderBoxSize,v=Array.isArray(g)?g[0]:g;h=v.inlineSize,m=v.blockSize}else h=n.offsetWidth,m=n.offsetHeight;s({width:h,height:m})});return l.observe(n,{box:"border-box"}),()=>l.unobserve(n)}else s(void 0)},[n]),r}var bf="Popper",[Xg,mc]=ui(bf),[Ab,Jg]=Xg(bf),qg=n=>{const{__scopePopper:r,children:s}=n,[l,c]=f.useState(null);return i.jsx(Ab,{scope:r,anchor:l,onAnchorChange:c,children:s})};qg.displayName=bf;var Zg="PopperAnchor",ev=f.forwardRef((n,r)=>{const{__scopePopper:s,virtualRef:l,...c}=n,d=Jg(Zg,s),h=f.useRef(null),m=Pt(r,h);return f.useEffect(()=>{d.onAnchorChange(l?.current||h.current)}),l?null:i.jsx(kt.div,{...c,ref:m})});ev.displayName=Zg;var Sf="PopperContent",[Db,Pb]=Xg(Sf),tv=f.forwardRef((n,r)=>{const{__scopePopper:s,side:l="bottom",sideOffset:c=0,align:d="center",alignOffset:h=0,arrowPadding:m=0,avoidCollisions:g=!0,collisionBoundary:v=[],collisionPadding:x=0,sticky:y="partial",hideWhenDetached:N=!1,updatePositionStrategy:b="optimized",onPlaced:E,...S}=n,j=Jg(Sf,s),[A,T]=f.useState(null),L=Pt(r,se=>T(se)),[F,M]=f.useState(null),H=Rb(F),z=H?.width??0,q=H?.height??0,we=l+(d!=="center"?"-"+d:""),ae=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},ye=Array.isArray(v)?v:[v],xe=ye.length>0,oe={padding:ae,boundary:ye.filter(_b),altBoundary:xe},{refs:be,floatingStyles:Te,placement:je,isPositioned:me,middlewareData:Q}=yb({strategy:"fixed",placement:we,whileElementsMounted:(...se)=>ub(...se,{animationFrame:b==="always"}),elements:{reference:j.anchor},middleware:[wb({mainAxis:c+q,alignmentAxis:h}),g&&Cb({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?bb():void 0,...oe}),g&&Sb({...oe}),Nb({...oe,apply:({elements:se,rects:Re,availableWidth:K,availableHeight:ee})=>{const{width:Ke,height:Qe}=Re.reference,Be=se.floating.style;Be.setProperty("--radix-popper-available-width",`${K}px`),Be.setProperty("--radix-popper-available-height",`${ee}px`),Be.setProperty("--radix-popper-anchor-width",`${Ke}px`),Be.setProperty("--radix-popper-anchor-height",`${Qe}px`)}}),F&&jb({element:F,padding:m}),Mb({arrowWidth:z,arrowHeight:q}),N&&Eb({strategy:"referenceHidden",...oe})]}),[ce,ue]=ov(je),D=Kr(E);wn(()=>{me&&D?.()},[me,D]);const J=Q.arrow?.x,Se=Q.arrow?.y,Me=Q.arrow?.centerOffset!==0,[Pe,Le]=f.useState();return wn(()=>{A&&Le(window.getComputedStyle(A).zIndex)},[A]),i.jsx("div",{ref:be.setFloating,"data-radix-popper-content-wrapper":"",style:{...Te,transform:me?Te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Pe,"--radix-popper-transform-origin":[Q.transformOrigin?.x,Q.transformOrigin?.y].join(" "),...Q.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:i.jsx(Db,{scope:s,placedSide:ce,onArrowChange:M,arrowX:J,arrowY:Se,shouldHideArrow:Me,children:i.jsx(kt.div,{"data-side":ce,"data-align":ue,...S,ref:L,style:{...S.style,animation:me?void 0:"none"}})})})});tv.displayName=Sf;var nv="PopperArrow",Ob={top:"bottom",right:"left",bottom:"top",left:"right"},rv=f.forwardRef(function(r,s){const{__scopePopper:l,...c}=r,d=Pb(nv,l),h=Ob[d.placedSide];return i.jsx("span",{ref:d.onArrowChange,style:{position:"absolute",left:d.arrowX,top:d.arrowY,[h]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[d.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[d.placedSide],visibility:d.shouldHideArrow?"hidden":void 0},children:i.jsx(Tb,{...c,ref:s,style:{...c.style,display:"block"}})})});rv.displayName=nv;function _b(n){return n!==null}var Mb=n=>({name:"transformOrigin",options:n,fn(r){const{placement:s,rects:l,middlewareData:c}=r,h=c.arrow?.centerOffset!==0,m=h?0:n.arrowWidth,g=h?0:n.arrowHeight,[v,x]=ov(s),y={start:"0%",center:"50%",end:"100%"}[x],N=(c.arrow?.x??0)+m/2,b=(c.arrow?.y??0)+g/2;let E="",S="";return v==="bottom"?(E=h?y:`${N}px`,S=`${-g}px`):v==="top"?(E=h?y:`${N}px`,S=`${l.floating.height+g}px`):v==="right"?(E=`${-g}px`,S=h?y:`${b}px`):v==="left"&&(E=`${l.floating.width+g}px`,S=h?y:`${b}px`),{data:{x:E,y:S}}}});function ov(n){const[r,s="center"]=n.split("-");return[r,s]}var sv=qg,iv=ev,av=tv,lv=rv,Ib="VisuallyHidden",Nf=f.forwardRef((n,r)=>i.jsx(kt.span,{...n,ref:r,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));Nf.displayName=Ib;var Lb=Nf,[gc]=ui("Tooltip",[mc]),vc=mc(),cv="TooltipProvider",Fb=700,Od="tooltip.open",[$b,Ef]=gc(cv),uv=n=>{const{__scopeTooltip:r,delayDuration:s=Fb,skipDelayDuration:l=300,disableHoverableContent:c=!1,children:d}=n,[h,m]=f.useState(!0),g=f.useRef(!1),v=f.useRef(0);return f.useEffect(()=>{const x=v.current;return()=>window.clearTimeout(x)},[]),i.jsx($b,{scope:r,isOpenDelayed:h,delayDuration:s,onOpen:f.useCallback(()=>{window.clearTimeout(v.current),m(!1)},[]),onClose:f.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>m(!0),l)},[l]),isPointerInTransitRef:g,onPointerInTransitChange:f.useCallback(x=>{g.current=x},[]),disableHoverableContent:c,children:d})};uv.displayName=cv;var yc="Tooltip",[zb,xc]=gc(yc),dv=n=>{const{__scopeTooltip:r,children:s,open:l,defaultOpen:c=!1,onOpenChange:d,disableHoverableContent:h,delayDuration:m}=n,g=Ef(yc,n.__scopeTooltip),v=vc(r),[x,y]=f.useState(null),N=rs(),b=f.useRef(0),E=h??g.disableHoverableContent,S=m??g.delayDuration,j=f.useRef(!1),[A=!1,T]=Yl({prop:l,defaultProp:c,onChange:z=>{z?(g.onOpen(),document.dispatchEvent(new CustomEvent(Od))):g.onClose(),d?.(z)}}),L=f.useMemo(()=>A?j.current?"delayed-open":"instant-open":"closed",[A]),F=f.useCallback(()=>{window.clearTimeout(b.current),b.current=0,j.current=!1,T(!0)},[T]),M=f.useCallback(()=>{window.clearTimeout(b.current),b.current=0,T(!1)},[T]),H=f.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>{j.current=!0,T(!0),b.current=0},S)},[S,T]);return f.useEffect(()=>()=>{b.current&&(window.clearTimeout(b.current),b.current=0)},[]),i.jsx(sv,{...v,children:i.jsx(zb,{scope:r,contentId:N,open:A,stateAttribute:L,trigger:x,onTriggerChange:y,onTriggerEnter:f.useCallback(()=>{g.isOpenDelayed?H():F()},[g.isOpenDelayed,H,F]),onTriggerLeave:f.useCallback(()=>{E?M():(window.clearTimeout(b.current),b.current=0)},[M,E]),onOpen:F,onClose:M,disableHoverableContent:E,children:s})})};dv.displayName=yc;var _d="TooltipTrigger",fv=f.forwardRef((n,r)=>{const{__scopeTooltip:s,...l}=n,c=xc(_d,s),d=Ef(_d,s),h=vc(s),m=f.useRef(null),g=Pt(r,m,c.onTriggerChange),v=f.useRef(!1),x=f.useRef(!1),y=f.useCallback(()=>v.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),i.jsx(iv,{asChild:!0,...h,children:i.jsx(kt.button,{"aria-describedby":c.open?c.contentId:void 0,"data-state":c.stateAttribute,...l,ref:g,onPointerMove:gt(n.onPointerMove,N=>{N.pointerType!=="touch"&&!x.current&&!d.isPointerInTransitRef.current&&(c.onTriggerEnter(),x.current=!0)}),onPointerLeave:gt(n.onPointerLeave,()=>{c.onTriggerLeave(),x.current=!1}),onPointerDown:gt(n.onPointerDown,()=>{v.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:gt(n.onFocus,()=>{v.current||c.onOpen()}),onBlur:gt(n.onBlur,c.onClose),onClick:gt(n.onClick,c.onClose)})})});fv.displayName=_d;var Bb="TooltipPortal",[hE,Ub]=gc(Bb,{forceMount:void 0}),ai="TooltipContent",hv=f.forwardRef((n,r)=>{const s=Ub(ai,n.__scopeTooltip),{forceMount:l=s.forceMount,side:c="top",...d}=n,h=xc(ai,n.__scopeTooltip);return i.jsx(va,{present:l||h.open,children:h.disableHoverableContent?i.jsx(pv,{side:c,...d,ref:r}):i.jsx(Vb,{side:c,...d,ref:r})})}),Vb=f.forwardRef((n,r)=>{const s=xc(ai,n.__scopeTooltip),l=Ef(ai,n.__scopeTooltip),c=f.useRef(null),d=Pt(r,c),[h,m]=f.useState(null),{trigger:g,onClose:v}=s,x=c.current,{onPointerInTransitChange:y}=l,N=f.useCallback(()=>{m(null),y(!1)},[y]),b=f.useCallback((E,S)=>{const j=E.currentTarget,A={x:E.clientX,y:E.clientY},T=Yb(A,j.getBoundingClientRect()),L=Kb(A,T),F=Qb(S.getBoundingClientRect()),M=Jb([...L,...F]);m(M),y(!0)},[y]);return f.useEffect(()=>()=>N(),[N]),f.useEffect(()=>{if(g&&x){const E=j=>b(j,x),S=j=>b(j,g);return g.addEventListener("pointerleave",E),x.addEventListener("pointerleave",S),()=>{g.removeEventListener("pointerleave",E),x.removeEventListener("pointerleave",S)}}},[g,x,b,N]),f.useEffect(()=>{if(h){const E=S=>{const j=S.target,A={x:S.clientX,y:S.clientY},T=g?.contains(j)||x?.contains(j),L=!Xb(A,h);T?N():L&&(N(),v())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[g,x,h,v,N]),i.jsx(pv,{...n,ref:d})}),[Wb,Hb]=gc(yc,{isInside:!1}),pv=f.forwardRef((n,r)=>{const{__scopeTooltip:s,children:l,"aria-label":c,onEscapeKeyDown:d,onPointerDownOutside:h,...m}=n,g=xc(ai,s),v=vc(s),{onClose:x}=g;return f.useEffect(()=>(document.addEventListener(Od,x),()=>document.removeEventListener(Od,x)),[x]),f.useEffect(()=>{if(g.trigger){const y=N=>{N.target?.contains(g.trigger)&&x()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[g.trigger,x]),i.jsx(uc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:y=>y.preventDefault(),onDismiss:x,children:i.jsxs(av,{"data-state":g.stateAttribute,...v,...m,ref:r,style:{...m.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(ef,{children:l}),i.jsx(Wb,{scope:s,isInside:!0,children:i.jsx(Lb,{id:g.contentId,role:"tooltip",children:c||l})})]})})});hv.displayName=ai;var mv="TooltipArrow",Gb=f.forwardRef((n,r)=>{const{__scopeTooltip:s,...l}=n,c=vc(s);return Hb(mv,s).isInside?null:i.jsx(lv,{...c,...l,ref:r})});Gb.displayName=mv;function Yb(n,r){const s=Math.abs(r.top-n.y),l=Math.abs(r.bottom-n.y),c=Math.abs(r.right-n.x),d=Math.abs(r.left-n.x);switch(Math.min(s,l,c,d)){case d:return"left";case c:return"right";case s:return"top";case l:return"bottom";default:throw new Error("unreachable")}}function Kb(n,r,s=5){const l=[];switch(r){case"top":l.push({x:n.x-s,y:n.y+s},{x:n.x+s,y:n.y+s});break;case"bottom":l.push({x:n.x-s,y:n.y-s},{x:n.x+s,y:n.y-s});break;case"left":l.push({x:n.x+s,y:n.y-s},{x:n.x+s,y:n.y+s});break;case"right":l.push({x:n.x-s,y:n.y-s},{x:n.x-s,y:n.y+s});break}return l}function Qb(n){const{top:r,right:s,bottom:l,left:c}=n;return[{x:c,y:r},{x:s,y:r},{x:s,y:l},{x:c,y:l}]}function Xb(n,r){const{x:s,y:l}=n;let c=!1;for(let d=0,h=r.length-1;d<r.length;h=d++){const m=r[d].x,g=r[d].y,v=r[h].x,x=r[h].y;g>l!=x>l&&s<(v-m)*(l-g)/(x-g)+m&&(c=!c)}return c}function Jb(n){const r=n.slice();return r.sort((s,l)=>s.x<l.x?-1:s.x>l.x?1:s.y<l.y?-1:s.y>l.y?1:0),qb(r)}function qb(n){if(n.length<=1)return n.slice();const r=[];for(let l=0;l<n.length;l++){const c=n[l];for(;r.length>=2;){const d=r[r.length-1],h=r[r.length-2];if((d.x-h.x)*(c.y-h.y)>=(d.y-h.y)*(c.x-h.x))r.pop();else break}r.push(c)}r.pop();const s=[];for(let l=n.length-1;l>=0;l--){const c=n[l];for(;s.length>=2;){const d=s[s.length-1],h=s[s.length-2];if((d.x-h.x)*(c.y-h.y)>=(d.y-h.y)*(c.x-h.x))s.pop();else break}s.push(c)}return s.pop(),r.length===1&&s.length===1&&r[0].x===s[0].x&&r[0].y===s[0].y?r:r.concat(s)}var Zb=uv,eS=dv,tS=fv,nS=hv;const rS=Zb,oS=eS,sS=tS,gv=f.forwardRef(({className:n,sideOffset:r=4,...s},l)=>i.jsx(nS,{ref:l,sideOffset:r,className:"z-50 overflow-hidden rounded-md bg-gray-900 px-3 py-1.5 text-sm text-gray-50 shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",...s}));gv.displayName="TooltipContent";const iS=oS,aS=({open:n,onOpenChange:r,item:s=null,onItemChange:l})=>{const[c,d]=f.useState({C:"",D:"",E:5,F:"",G:"",H:""}),[h,m]=f.useState(null),[g,v]=f.useState(!1);f.useEffect(()=>{n&&s&&(s.D!==void 0||s.H!==void 0?(d({C:s.C||"",D:s.D||"",E:s.E||5,F:s.F||"",G:s.G||"",H:s.H||""}),m(null),v(!1)):x(s.A))},[n,s]);const x=async b=>{try{const E=await fetch(`/api/items/${b}`);if(!E.ok)throw new Error("Failed to fetch item details");const S=await E.json();d({C:S.C||"",D:S.D||"",E:S.E||5,F:S.F||"",G:S.G||"",H:S.H||""}),m(null),v(!1)}catch(E){m(`Failed to load item: ${E.message}`),console.error("Fetch item error:",E)}},y=(b,E)=>{d(S=>({...S,[b]:E})),v(!0)},N=async b=>{b.preventDefault();try{const{G:E,...S}=c,j="/api/items",A=s?.A?`${j}/${s.A}`:j,T=await fetch(A,{method:s?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!T.ok){const H=await T.json().catch(()=>null);throw new Error(H?.error||"Failed to save item")}const L=await T.json(),F=!s?.A,M=c.C||"Unnamed Item";if(F)ca("created","item",M);else{ca("updated","item",M);const H=s?.C||"",z=s?.D||"",q=s?.H||"",we=s?.I||"";c.D&&c.D!==z&&id("notes",M),c.H&&c.H!==q&&id("tuning",M),c.I&&c.I!==we&&id("folder_path",M)}l?.(L),r(!1)}catch(E){m(E.message),console.error("Save error:",E)}};return i.jsx(Do,{open:n,onOpenChange:r,children:i.jsxs(Jr,{className:"max-w-2xl bg-gray-800",children:[i.jsxs(qr,{children:[i.jsx(Zr,{children:s?`Edit Item: ${s.C}`:"Create New Item"}),i.jsx(eo,{children:"Edit the details of your practice item"}),h&&i.jsx("div",{className:"mt-2 text-sm text-red-500",children:h})]}),i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(No,{htmlFor:"title",children:"Title"}),i.jsx(xn,{id:"title",value:c.C,onChange:b=>y("C",b.target.value),placeholder:"Enter item title",required:!0,className:"bg-gray-900 text-white",autocomplete:"off"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(No,{htmlFor:"duration",children:"Duration (minutes)"}),i.jsx(xn,{id:"duration",type:"number",min:"1",value:c.E,onChange:b=>y("E",parseInt(b.target.value)||5),required:!0,className:"bg-gray-900 text-white",autocomplete:"off"})]}),tf()&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(No,{htmlFor:"songbook",children:"Songbook Folder"}),i.jsx(xn,{id:"songbook",value:c.F,onChange:b=>y("F",b.target.value),placeholder:"D:\\Users\\Steven\\Documents\\Guitar\\Songbook\\SongName",className:"bg-gray-900 font-mono"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(No,{htmlFor:"tuning",children:"Tuning"}),i.jsx(xn,{id:"tuning",value:c.H,onChange:b=>y("H",b.target.value),placeholder:"e.g. EADGBE",className:"bg-gray-900 text-white",autocomplete:"off"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(No,{htmlFor:"notes",children:"Notes"}),i.jsx(os,{id:"notes",value:c.D,onChange:b=>y("D",b.target.value),placeholder:"Enter any notes",className:"h-24 bg-gray-900 text-white",autocomplete:"off"})]}),i.jsxs("div",{className:"flex justify-end space-x-4",children:[i.jsx(De,{type:"button",variant:"outline",onClick:()=>r(!1),className:"text-gray-300 hover:text-white",children:"Cancel"}),i.jsx(De,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",disabled:!g,children:"Save"})]})]})]})})},lS=({onComplete:n})=>{const[r,s]=f.useState(!1),[l,c]=f.useState(""),[d,h]=f.useState(!1),[m,g]=f.useState(null);if(!tf())return null;const v=async x=>{x.preventDefault(),h(!0);try{const y=await fetch("/api/items/update-songbook-paths",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:l.split(`
`).filter(b=>b.trim())})}),N=await y.json();if(y.ok)g(N),n?.();else throw new Error(N.error||"Failed to update paths")}catch(y){console.error("Update error:",y),g({error:y.message})}finally{h(!1)}};return i.jsxs(i.Fragment,{children:[i.jsx(rS,{children:i.jsxs(iS,{children:[i.jsx(sS,{asChild:!0,children:i.jsx(De,{variant:"ghost",size:"icon",onClick:()=>s(!0),className:"text-gray-400 hover:text-gray-200",children:i.jsx(Xm,{className:"h-4 w-4"})})}),i.jsx(gv,{children:i.jsx("p",{children:"Bulk Update Songbook Paths"})})]})}),i.jsx(Do,{open:r,onOpenChange:s,children:i.jsxs(Jr,{className:"max-w-2xl bg-gray-800",children:[i.jsxs(qr,{children:[i.jsx(Zr,{children:"Bulk Update Songbook Paths"}),i.jsx(eo,{children:"Paste your folder paths, one per line"})]}),i.jsxs("form",{onSubmit:v,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(No,{htmlFor:"paths",children:"Folder Paths"}),i.jsx(os,{id:"paths",value:l,onChange:x=>c(x.target.value),placeholder:"D:\\Path\\To\\Songbook\\Folder",className:"h-64 bg-gray-900 text-white font-mono",disabled:d})]}),m&&i.jsx("div",{className:`text-sm ${m.error?"text-red-500":"text-green-500"}`,children:m.error?m.error:`Updated ${m.updated_count} items successfully!`}),i.jsxs("div",{className:"flex justify-end space-x-4",children:[i.jsx(De,{type:"button",variant:"outline",onClick:()=>s(!1),className:"text-gray-300 hover:text-white",disabled:d,children:"Cancel"}),i.jsx(De,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",disabled:d||!l.trim(),children:d?i.jsxs(i.Fragment,{children:[i.jsx(ma,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Paths"})]})]})]})})]})},cS={strings:6,frets:5,fretSize:1.2,fingerSize:.75,sidePadding:.2,fontFamily:"Arial",width:160,height:220,color:"#ffffff",backgroundColor:"transparent",strokeColor:"#ffffff",textColor:"#ffffff",fretLabelColor:"#ffffff",fingerTextColor:"#000000",fingerTextSize:28},yd=async(n,r={},s=3,l=null)=>{for(let c=0;c<s;c++)try{const d=await fetch(n,r);if(d.status===429){const h=Math.pow(2,c)*1e3,m=`Rate limited. Waiting ${h/1e3}s before retry ${c+1}/${s}`;l&&l(m),await new Promise(g=>setTimeout(g,h));continue}return d}catch(d){if(c===s-1)throw d;const h=Math.pow(2,c)*1e3,m=`Request failed. Waiting ${h/1e3}s before retry ${c+1}/${s}`;l&&l(m),await new Promise(g=>setTimeout(g,h))}throw new Error(`Failed after ${s} attempts`)},vv=({itemId:n,onSave:r,onCancel:s,editingChordId:l=null,insertionContext:c=null,defaultTuning:d="EADGBE"})=>{const[h,m]=f.useState(""),[g,v]=f.useState(1),[x,y]=f.useState(5),[N,b]=f.useState(6),[E,S]=f.useState("dots");f.useEffect(()=>{Se.current=E},[E]);const[j,A]=f.useState(d),[T,L]=f.useState(0),[F,M]=f.useState([]),[H,z]=f.useState([]);f.useEffect(()=>{},[H]);const[q,we]=f.useState(new Set),[ae,ye]=f.useState(new Set),[xe,oe]=f.useState(!1),[be,Te]=f.useState(!1),[je,me]=f.useState(null),[Q,ce]=f.useState(!1),ue=f.useRef(null),D=f.useRef(null),J=f.useRef(null),Se=f.useRef(E),Me=f.useRef(null),Pe=async Z=>{if(!(!Z.trim()||!n))try{oe(!0);const Ie=await yd(`/api/items/${n}/chord-charts`,{},3,1e3);if(!Ie.ok)return;const ge=(await Ie.json()).filter(He=>He.title.toLowerCase()===Z.toLowerCase());let ke;if(ge.length===0)try{await new Promise(tt=>setTimeout(tt,1e3));const He=await yd(`/api/chord-charts/common/search?name=${encodeURIComponent(Z)}`,{},3,1e3);if(He.ok){const tt=await He.json();tt.length>0&&(ke=tt[0])}}catch(He){console.error("Error fetching common chords:",He)}else ge.length===1||ge.sort((He,tt)=>{const xt=parseInt(He.order)||0,Ue=parseInt(tt.order)||0;return xt!==Ue?xt-Ue:(parseInt(He.id)||0)-(parseInt(tt.id)||0)}),ke=ge[0];if(ke){v(ke.startingFret||1),y(ke.numFrets||5),b(ke.numStrings||6),A(ke.tuning||d),L(ke.capo||0);const tt=(ke.fingers||[]).map(Ue=>{if(Array.isArray(Ue)){const[wt,$t,It]=Ue;return[wt,$t,It]}if(Ue&&typeof Ue=="object"&&"string"in Ue&&"fret"in Ue){const wt=Ue.fingerNumber||Ue[2];return[Ue.string,Ue.fret,wt]}const[ot,Vt,Nt]=Array.isArray(Ue)?Ue:[Ue[0],Ue[1],Ue[2]];return[ot,Vt,Nt]});M(tt);const xt=ke.barres||[];z(xt),we(new Set(ke.openStrings||[])),ye(new Set(ke.mutedStrings||[])),ce(!1)}}catch(Ie){console.error("Error during autofill:",Ie)}finally{oe(!1)}};f.useEffect(()=>{l&&n?(async()=>{try{oe(!0);const Ie=await yd(`/api/items/${n}/chord-charts`);if(Ie.ok){const ge=(await Ie.json()).find(ke=>parseInt(ke.id)===parseInt(l));if(ge){console.log("Loading chord for editing:",{id:ge.id,title:ge.title,hasLineBreakAfter:ge.hasLineBreakAfter,editingChordId:l}),m(ge.title||""),v(ge.startingFret||1),y(ge.numFrets||5),b(ge.numStrings||6),A(ge.tuning||d),L(ge.capo||0);const He=(ge.fingers||[]).map(Ue=>{if(Array.isArray(Ue)){const[wt,$t,It]=Ue;return[wt,$t,It]}if(Ue&&typeof Ue=="object"&&"string"in Ue&&"fret"in Ue){const wt=Ue.fingerNumber||Ue[2];return[Ue.string,Ue.fret,wt]}const[ot,Vt,Nt]=Array.isArray(Ue)?Ue:[Ue[0],Ue[1],Ue[2]];return[ot,Vt,Nt]});M(He);const tt=ge.barres||[];z(tt),we(new Set(ge.openStrings||[])),ye(new Set(ge.mutedStrings||[]));const xt=ge.hasLineBreakAfter||!1;console.log("Setting addLineBreak to:",xt,"from hasLineBreakAfter:",ge.hasLineBreakAfter),ce(xt)}}else console.error("Failed to fetch chord charts:",Ie.status)}catch(Ie){console.error("Error loading chord for editing:",Ie)}finally{oe(!1)}})():l||(m(""),v(1),y(5),b(6),A(d),L(0),M([]),z([]),we(new Set),ye(new Set),Te(!1),ce(!1))},[l,n,d]),f.useEffect(()=>{if(window.svguitar)Le();else{const Z=document.createElement("script");Z.src="/static/js/svguitar.es5.js",Z.async=!0,Z.onload=()=>{Le()},document.body.appendChild(Z)}return()=>{se.current&&se.current.svg&&(se.current.svg.removeEventListener("click",se.current.clickHandler),se.current.svg.removeEventListener("mousedown",se.current.mousedownHandler))}},[]);const Le=()=>{try{ue.current=new window.svguitar.SVGuitarChord("#editor-chart"),D.current=new window.svguitar.SVGuitarChord("#result-chart"),ut(),Re()}catch(Z){console.error("Error initializing charts:",Z)}},se=f.useRef(null),Re=()=>{if(!J.current)return;const Z=J.current.querySelector("svg");if(!Z)return;se.current&&se.current.svg&&(se.current.svg.removeEventListener("click",se.current.clickHandler),se.current.svg.removeEventListener("mousedown",se.current.mousedownHandler));const Ie=ge=>{if(ge.detail>1)return ge.preventDefault(),ge.stopPropagation(),!1;ge.preventDefault()},Je=ge=>{ge.stopPropagation(),ge.preventDefault(),K(ge)};Z.style.userSelect="none",Z.style.webkitUserSelect="none",Z.style.mozUserSelect="none",Z.style.msUserSelect="none",Z.addEventListener("mousedown",Ie),Z.addEventListener("click",Je),se.current={svg:Z,clickHandler:Je,mousedownHandler:Ie}},K=Z=>{if(!Z||!Z.currentTarget){console.error("handleEditorClick called with invalid event");return}const Ie=Se.current;if(Ie!=="dots"&&Ie!=="fingers"&&Ie!=="barres")return;const Je=Z.currentTarget,ge=Je.getBoundingClientRect(),ke=Z.clientX-ge.left,He=Z.clientY-ge.top,tt=Je.viewBox.baseVal;if(!tt||tt.width===0||tt.height===0||ge.width===0||ge.height===0)return;const xt=tt.width/ge.width,Ue=tt.height/ge.height;if(!isFinite(xt)||!isFinite(Ue)){console.error("Invalid scale values:",{scaleX:xt,scaleY:Ue});return}const ot=ke*xt,Vt=He*Ue,Nt=tt.width,wt=tt.height,$t=Nt*.15,It=wt*.08,Wt=Nt-$t*2,Cn=wt-It*2;if(ot<$t||ot>Nt-$t)return;const bn=(ot-$t)/Wt,zn=Math.floor(bn*N);if(zn<0||zn>=N)return;const en=N-zn;if(Vt<It){Ke(en);return}if(Vt>wt-It)return;const Sn=Vt-It,sn=Sn/Cn,an=Math.ceil(sn*x);console.log("Click debug:",{rawX:ke,rawY:He,x:ot,y:Vt,svguitarString:en,fretIndex:an,marginX:$t,marginY:It,fretRatio:sn,relativeY:Sn,fretboardHeight:Cn}),!(an<1||an>x)&&(Ie==="dots"?ee(en,an):Ie==="fingers"?Be(en,an):Ie==="barres"&&Qe(en,an))},ee=(Z,Ie)=>{we(Je=>{const ge=new Set(Je);return ge.delete(Z),ge}),ye(Je=>{const ge=new Set(Je);return ge.delete(Z),ge}),M(Je=>{const ge=Je.findIndex(ke=>{const[He,tt]=ke;return He===Z&&tt===Ie});return ge>=0?Je.filter((He,tt)=>tt!==ge):[...Je,[Z,Ie,void 0]]})},Ke=Z=>{const Ie=q.has(Z),Je=ae.has(Z);M(ge=>ge.filter(([ke])=>ke!==Z)),!Ie&&!Je?we(ge=>new Set([...ge,Z])):Ie?(we(ge=>{const ke=new Set(ge);return ke.delete(Z),ke}),ye(ge=>new Set([...ge,Z]))):Je&&ye(ge=>{const ke=new Set(ge);return ke.delete(Z),ke})},Qe=(Z,Ie)=>{z(Je=>{const ge=Je.findIndex(ke=>ke.fret===Ie);if(ge>=0)return Je.filter((He,tt)=>tt!==ge);{const ke={fromString:6,toString:1,fret:Ie,text:"1"};return[...Je,ke]}})},Be=(Z,Ie)=>{F.findIndex(ge=>{const[ke,He]=ge;return ke===Z&&He===Ie})===-1?(we(ge=>{const ke=new Set(ge);return ke.delete(Z),ke}),ye(ge=>{const ke=new Set(ge);return ke.delete(Z),ke}),M(ge=>[...ge,[Z,Ie,void 0]]),me([Z,Ie])):me([Z,Ie])},it=(Z,Ie,Je)=>{M(ge=>ge.map(ke=>{const[He,tt,xt]=ke;return He===Z&&tt===Ie?[He,tt,Je]:ke.length===3?ke:[He,tt,xt]}))},ut=()=>{if(!ue.current||!D.current)return;const Z=document.querySelector("#editor-chart"),Ie=document.querySelector("#result-chart");if(!(!Z||!Ie))try{const Je={...cS,strings:N,frets:x,position:g,tuning:[]},He={fingers:[...F.map(Ue=>{const[ot,Vt,Nt]=Ue;return Nt&&Nt!=="undefined"?[ot,Vt,Nt]:[ot,Vt]}),...Array.from(q).map(Ue=>[Ue,0]),...Array.from(ae).map(Ue=>[Ue,"x"])],barres:H},tt=JSON.stringify({chordData:He,title:h});tt!==Me.current&&(Me.current=tt,ue.current.configure(Je).chord(He).draw(),D.current.configure({...Je,title:h}).chord(He).draw()),setTimeout(()=>{const Ue=document.querySelector("#editor-chart svg"),ot=document.querySelector("#result-chart svg");Ue&&(Ue.style.width="100%",Ue.style.height="100%",Ue.style.maxWidth="160px",Ue.style.maxHeight="224px"),ot&&(ot.style.width="100%",ot.style.height="100%",ot.style.maxWidth="160px",ot.style.maxHeight="224px"),Re()},100)}catch(Je){console.error("Error updating charts:",Je)}};return f.useEffect(()=>{ut()},[h,g,x,N,F,H,j,q,ae]),f.useEffect(()=>{const Z=Ie=>{if(E!=="fingers"||!je)return;const Je=Ie.key;if(["1","2","3","4","5"].includes(Je)){const[ge,ke]=je;it(ge,ke,Je),me(null),Ie.preventDefault()}else Je==="Escape"&&(me(null),Ie.preventDefault())};if(E==="fingers")return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[E,je]),i.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-blue-400 mb-1",children:"Chord Name"}),i.jsxs("div",{className:"relative",children:[i.jsx(xn,{value:h,onChange:Z=>m(Z.target.value),onBlur:()=>Pe(h),onKeyDown:Z=>{Z.key==="Enter"&&(Z.preventDefault(),Pe(h))},placeholder:"Enter chord name (e.g. Am, C7)",className:"bg-gray-900",disabled:xe}),xe&&i.jsx("div",{className:"absolute right-2 top-2 text-yellow-400 text-xs",children:"Loading..."})]})]}),i.jsx("div",{className:"text-sm text-blue-400 hover:underline cursor-pointer",onClick:()=>Te(!be),children:be?"Hide advanced settings...":"Show more settings..."}),be&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-green-400 mb-1",children:"Tuning"}),i.jsx(xn,{value:j,onChange:Z=>A(Z.target.value),placeholder:"EADGBE",className:"bg-gray-900"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-yellow-400 mb-1",children:"Capo"}),i.jsx(xn,{type:"number",min:"0",max:"12",value:T,onChange:Z=>L(parseInt(Z.target.value)||0),className:"bg-gray-900"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-red-400 mb-1",children:"Starting fret"}),i.jsx(xn,{type:"number",min:"1",max:"15",value:g,onChange:Z=>v(parseInt(Z.target.value)||1),className:"bg-gray-900"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-blue-400 mb-1",children:"Number of frets"}),i.jsx(xn,{type:"number",min:"1",max:"10",value:x,onChange:Z=>y(parseInt(Z.target.value)||5),className:"bg-gray-900"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-red-400 mb-1",children:"Number of strings"}),i.jsx(xn,{type:"number",min:"4",max:"12",value:N,onChange:Z=>b(parseInt(Z.target.value)||6),className:"bg-gray-900"})]})]})]}),i.jsxs("div",{className:"flex gap-8 justify-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-serif mb-2",children:"Editor"}),i.jsx("div",{className:"border border-gray-700 rounded-lg px-1 pt-1 pb-0",children:i.jsx("div",{className:"relative w-40 mx-auto flex items-center justify-center overflow-hidden select-none",style:{height:"230px"},children:i.jsx("div",{id:"editor-chart",ref:J,className:"cursor-pointer select-none"})})})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-serif mb-2",children:"Result"}),i.jsx("div",{className:"border border-gray-700 rounded-lg px-1 pt-1 pb-0",children:i.jsx("div",{className:"relative w-40 mx-auto flex items-center justify-center overflow-hidden select-none",style:{height:"230px"},children:i.jsx("div",{id:"result-chart",className:"select-none"})})})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(De,{variant:E==="dots"?"default":"outline",onClick:()=>S("dots"),className:`flex-1 ${E==="dots"?"bg-blue-700 hover:bg-blue-800 text-white":"bg-black hover:bg-gray-800 text-gray-300 border border-gray-600"}`,children:"Edit Dots"}),i.jsx(De,{variant:E==="fingers"?"default":"outline",onClick:()=>{S("fingers")},className:`flex-1 ${E==="fingers"?"!bg-blue-800 hover:!bg-blue-900 !text-white !border !border-blue-600":"!bg-black hover:!bg-gray-800 !text-gray-300 !border !border-gray-600"}`,children:"Edit Fingers"}),i.jsx(De,{variant:E==="barres"?"default":"outline",onClick:()=>S("barres"),className:`flex-1 ${E==="barres"?"!bg-green-700 hover:!bg-green-800 !text-white !border !border-green-600":"!bg-black hover:!bg-gray-800 !text-gray-300 !border !border-gray-600"}`,children:"Edit Barres"})]}),E==="barres"&&i.jsxs("div",{className:"bg-green-900 bg-opacity-50 border border-green-600 rounded-lg p-3 text-sm text-green-200",children:[i.jsx("div",{className:"font-semibold mb-1",children:"Barre Mode Instructions:"}),i.jsx("div",{children:"Click on any fret to add/remove a full barre across all strings at that fret. Perfect for chords like F, B, F#m, etc."})]}),E==="fingers"&&i.jsxs("div",{className:"bg-blue-900 bg-opacity-50 border border-blue-600 rounded-lg p-3 text-sm text-blue-200",children:[i.jsx("div",{className:"font-semibold mb-1",children:"Finger Numbers Mode Instructions:"}),i.jsx("div",{children:"Click on a finger position, then press 1-5 keys to assign finger numbers (5 = thumb). Press Escape to cancel selection."}),je&&i.jsxs("div",{className:"mt-2 text-yellow-300",children:["Selected position: String ",je[0],", Fret ",je[1]," - Press 1, 2, 3, 4, or 5"]})]}),i.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700 rounded-lg p-3",children:[i.jsx("input",{type:"checkbox",id:"addLineBreak",checked:Q,onChange:Z=>ce(Z.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-900 border-gray-600 rounded focus:ring-blue-500 focus:ring-2"}),i.jsx("label",{htmlFor:"addLineBreak",className:"text-sm text-gray-300 cursor-pointer",children:"Line break after "})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(De,{onClick:()=>{const Z={title:h,startingFret:g,numFrets:x,numStrings:N,tuning:j,capo:T,fingers:F,barres:H,openStrings:Array.from(q),mutedStrings:Array.from(ae),startOnNewLine:Q,editingChordId:l,insertionContext:c};console.log("Saving chord with line break data:",{title:h,addLineBreak:Q,startOnNewLine:Q,editingChordId:l}),r(Z)},className:`flex-1 ${h.trim()?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,disabled:!h.trim(),children:l?"Update Chord Chart":"Add Chord Chart"}),s&&i.jsx(De,{onClick:s,variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"})]})]})})},Md=({isOpen:n,onClose:r,error:s})=>{const[l,c]=f.useState(0),[d,h]=f.useState(!1),g=(y=>{const N=y?.message||y||"";return N.includes("529")||N.includes("overloaded")?{type:"overload",title:"API Temporarily Overloaded",message:"The AI servers are experiencing high traffic right now.",waitTime:30,icon:i.jsx(ma,{className:"h-6 w-6 text-yellow-500 animate-spin"})}:N.includes("429")||N.includes("rate limit")?{type:"rate_limit",title:"Rate Limit Reached",message:"You've hit the API rate limit. Please wait before trying again.",waitTime:60,icon:i.jsx(ld,{className:"h-6 w-6 text-orange-500"})}:N.includes("500")||N.includes("502")||N.includes("503")?{type:"server_error",title:"Server Error",message:"The server is experiencing issues. Let's try again in a moment.",waitTime:45,icon:i.jsx(lr,{className:"h-6 w-6 text-red-500"})}:N.includes("timeout")?{type:"timeout",title:"Request Timeout",message:"The analysis took too long. This might work better with smaller files.",waitTime:15,icon:i.jsx(ld,{className:"h-6 w-6 text-blue-500"})}:{type:"generic",title:"Something Went Wrong",message:N||"An unexpected error occurred.",waitTime:10,icon:i.jsx(lr,{className:"h-6 w-6 text-gray-500"})}})(s);f.useEffect(()=>{if(n&&s){c(g.waitTime),h(!1);const y=setInterval(()=>{c(N=>N<=1?(h(!0),clearInterval(y),0):N-1)},1e3);return()=>clearInterval(y)}},[n,s,g.waitTime]);const v=y=>{if(y<60)return`${y}s`;const N=Math.floor(y/60),b=y%60;return`${N}m ${b}s`},x=()=>{h(!1),c(0),r()};return!n||!s?null:i.jsx(Do,{open:n,onOpenChange:y=>y||x(),children:i.jsxs(Jr,{className:"sm:max-w-md",children:[i.jsxs(qr,{children:[i.jsxs(Zr,{className:"flex items-center gap-2",children:[g.icon,g.title]}),i.jsxs(eo,{className:"text-left space-y-3",children:[i.jsx("p",{children:g.message}),l>0?i.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(ld,{className:"h-4 w-4 text-gray-500"}),i.jsxs("span",{children:["Please wait ",v(l)," before trying again"]})]}),i.jsx("div",{className:"w-full bg-gray-300 dark:bg-gray-600 rounded-full h-2 mt-2",children:i.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-1000",style:{width:`${(g.waitTime-l)/g.waitTime*100}%`}})})]}):i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Ready to try again!"})})]})]}),i.jsx("div",{className:"flex justify-end gap-2 mt-4",children:i.jsx(De,{onClick:x,disabled:!d,className:"min-w-20",children:d?"OK":`Wait ${v(l)}`})})]})})},Id=({isOpen:n,onClose:r,autocreateData:s})=>{if(!n||!s)return null;const{itemName:l,chordCount:c,contentType:d,uploadedFileNames:h,isVisionAnalysis:m=!1}=s,g=m||d==="chord_charts"||d==="auto-detected",v=()=>g?i.jsx(N0,{className:"h-6 w-6 text-yellow-500"}):i.jsx(Jd,{className:"h-6 w-6 text-green-500"}),x=()=>g?" Vision Analysis Complete!":"Chord Charts Created!",y=()=>i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"font-medium",children:"Success! Or close to it!"}),i.jsx("p",{children:"We did the best we could. You'll likely need to make a few corrections."}),i.jsx("p",{children:"Click the pencil icon on a chord chart to fix it."}),i.jsxs("p",{children:["Be sure to click the ",i.jsx("code",{className:"px-1 py-0.5 bg-gray-700 text-gray-300 rounded text-sm",children:'"Update chord chart"'})," button after edits"]})]}),N=()=>{const b=[];if(d){const E={chord_charts:"Chord charts",chord_names:"Lyrics with chord names",tablature:"Guitar tablature",mixed:"Mixed content types","auto-detected":g?"Chord charts":"Mixed content"};b.push(E[d]||d)}if(h){const E=h.split(", ").slice(0,3),S=h.split(", ").length-E.length;let j=E.join(", ");S>0&&(j+=` and ${S} more`),b.push(j)}return b};return i.jsx(Do,{open:n,onOpenChange:b=>!b&&r(),children:i.jsxs(Jr,{className:"sm:max-w-md",children:[i.jsxs(qr,{children:[i.jsxs(Zr,{className:"flex items-center gap-2",children:[v(),x()]}),i.jsxs(eo,{className:"text-left space-y-1",children:[y(),i.jsxs("div",{className:"bg-gray-800 px-2 py-1 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-300 mb-1",children:[i.jsx(Jm,{className:"h-4 w-4"}),i.jsx("span",{children:"Processing Details"})]}),i.jsx("ul",{className:"text-sm text-gray-400",children:N().map((b,E)=>i.jsxs("li",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"w-1 h-1 bg-gray-400 rounded-full"}),b]},E))})]})]})]}),i.jsx("div",{className:"flex justify-end gap-2 -mt-2",children:i.jsx(De,{onClick:r,variant:"outline",className:"min-w-20",children:"Show me"})})]})})};let ts=!1,Ld=0,Br=null;const yv=3e4,xa=async(n,r="DEBUG",s={})=>{if(!(ts&&Date.now()-Ld<yv))try{(await fetch("/api/debug/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:n,level:r,context:s})})).ok&&ts&&(ts=!1,jf(),Br&&(clearInterval(Br),Br=null))}catch(l){ts||(ts=!0,Ld=Date.now(),dS(),fS()),wv("Failed to send log to server:",l),xv(`[${r}] ${n}`,s)}},xv=console.log,wv=console.error,uS=console.warn;function dS(){jf();const n=document.createElement("div");n.id="connection-status-modal",n.style.cssText=`
    position: fixed;
    top: 20px;
    right: 20px;
    background: #ef4444;
    color: white;
    padding: 16px 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    z-index: 10000;
    max-width: 400px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 14px;
    line-height: 1.4;
  `,n.innerHTML=`
    <div style="font-weight: 600; margin-bottom: 8px;">Broken string</div>
    <div>...metaphorically speaking, anyway.<br><br>Something's wrong with the connection to the server. Could be your connection, could be a server problem, can't tell from here.<br><br>We'll try again in 30 seconds. Or you can try refreshing the page in a minute or two.<br><br>If the problem continues practice your favorite riff for awhile, or go touch grass, then come back later.</div>
  `,document.body.appendChild(n)}function jf(){const n=document.getElementById("connection-status-modal");n&&n.remove()}function fS(){Br||(Br=setInterval(async()=>{if(!ts){clearInterval(Br),Br=null;return}try{(await fetch("/api/debug/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"reconnection-test",level:"DEBUG",context:{}})})).ok&&(ts=!1,jf(),clearInterval(Br),Br=null)}catch{Ld=Date.now()}},yv))}console.log=function(...n){xv.apply(console,n),xa(n.join(" "),"INFO",{}).catch(()=>{})};console.error=function(...n){wv.apply(console,n),xa(n.join(" "),"ERROR",{}).catch(()=>{})};console.warn=function(...n){uS.apply(console,n),xa(n.join(" "),"WARNING",{}).catch(()=>{})};const un=(n,r)=>xa(n,"DEBUG",r),km=(n,r)=>xa(n,"INFO",r);var Cv="AlertDialog",[hS]=ui(Cv,[Cg]),to=Cg(),bv=n=>{const{__scopeAlertDialog:r,...s}=n,l=to(r);return i.jsx(Lg,{...l,...s,modal:!0})};bv.displayName=Cv;var pS="AlertDialogTrigger",mS=f.forwardRef((n,r)=>{const{__scopeAlertDialog:s,...l}=n,c=to(s);return i.jsx(TC,{...c,...l,ref:r})});mS.displayName=pS;var gS="AlertDialogPortal",Sv=n=>{const{__scopeAlertDialog:r,...s}=n,l=to(r);return i.jsx(Fg,{...l,...s})};Sv.displayName=gS;var vS="AlertDialogOverlay",Nv=f.forwardRef((n,r)=>{const{__scopeAlertDialog:s,...l}=n,c=to(s);return i.jsx(uf,{...c,...l,ref:r})});Nv.displayName=vS;var ri="AlertDialogContent",[yS,xS]=hS(ri),Ev=f.forwardRef((n,r)=>{const{__scopeAlertDialog:s,children:l,...c}=n,d=to(s),h=f.useRef(null),m=Pt(r,h),g=f.useRef(null);return i.jsx(NC,{contentName:ri,titleName:jv,docsSlug:"alert-dialog",children:i.jsx(yS,{scope:s,cancelRef:g,children:i.jsxs(df,{role:"alertdialog",...d,...c,ref:m,onOpenAutoFocus:gt(c.onOpenAutoFocus,v=>{v.preventDefault(),g.current?.focus({preventScroll:!0})}),onPointerDownOutside:v=>v.preventDefault(),onInteractOutside:v=>v.preventDefault(),children:[i.jsx(ef,{children:l}),i.jsx(CS,{contentRef:h})]})})})});Ev.displayName=ri;var jv="AlertDialogTitle",kv=f.forwardRef((n,r)=>{const{__scopeAlertDialog:s,...l}=n,c=to(s);return i.jsx(ff,{...c,...l,ref:r})});kv.displayName=jv;var Tv="AlertDialogDescription",Rv=f.forwardRef((n,r)=>{const{__scopeAlertDialog:s,...l}=n,c=to(s);return i.jsx(hf,{...c,...l,ref:r})});Rv.displayName=Tv;var wS="AlertDialogAction",Av=f.forwardRef((n,r)=>{const{__scopeAlertDialog:s,...l}=n,c=to(s);return i.jsx(pf,{...c,...l,ref:r})});Av.displayName=wS;var Dv="AlertDialogCancel",Pv=f.forwardRef((n,r)=>{const{__scopeAlertDialog:s,...l}=n,{cancelRef:c}=xS(Dv,s),d=to(s),h=Pt(r,c);return i.jsx(pf,{...d,...l,ref:h})});Pv.displayName=Dv;var CS=({contentRef:n})=>{const r=`\`${ri}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ri}\` by passing a \`${Tv}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ri}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{document.getElementById(n.current?.getAttribute("aria-describedby"))||console.warn(r)},[r,n]),null},bS=bv,SS=Sv,Ov=Nv,_v=Ev,Mv=Av,Iv=Pv,Lv=kv,Fv=Rv;const Eo=bS,NS=SS,$v=f.forwardRef(({className:n,...r},s)=>i.jsx(Ov,{className:vt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r,ref:s}));$v.displayName=Ov.displayName;const Ur=f.forwardRef(({className:n,...r},s)=>i.jsxs(NS,{children:[i.jsx($v,{}),i.jsx(_v,{ref:s,className:vt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...r})]}));Ur.displayName=_v.displayName;const Vr=({className:n,...r})=>i.jsx("div",{className:vt("flex flex-col space-y-2 text-center sm:text-left",n),...r});Vr.displayName="AlertDialogHeader";const Wr=({className:n,...r})=>i.jsx("div",{className:vt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...r});Wr.displayName="AlertDialogFooter";const Hr=f.forwardRef(({className:n,...r},s)=>i.jsx(Lv,{ref:s,className:vt("text-lg font-semibold",n),...r}));Hr.displayName=Lv.displayName;const Gr=f.forwardRef(({className:n,...r},s)=>i.jsx(Fv,{ref:s,className:vt("text-sm text-muted-foreground",n),...r}));Gr.displayName=Fv.displayName;const Nr=f.forwardRef(({className:n,...r},s)=>i.jsx(Mv,{ref:s,className:vt("inline-flex h-10 items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground ring-offset-background transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",n),...r}));Nr.displayName=Mv.displayName;const jo=f.forwardRef(({className:n,...r},s)=>i.jsx(Iv,{ref:s,className:vt("mt-2 inline-flex h-10 items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-semibold ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 sm:mt-0",n),...r}));jo.displayName=Iv.displayName;const ES=(n,r)=>{let s;return function(...c){const d=()=>{clearTimeout(s),n(...c)};clearTimeout(s),s=setTimeout(d,r)}},jS=f.memo(({chart:n,onEdit:r,onDelete:s,onInsertAfter:l})=>{const[c,d]=f.useState(!1),h=f.useRef(null),m=f.useRef(null);f.useEffect(()=>{const b=E=>{h.current&&!h.current.contains(E.target)&&d(!1)};if(c)return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[c]),f.useEffect(()=>{if(!m.current)return;(()=>{if(!(!window.svguitar||!m.current))try{const E=n.chordData||n;m.current.innerHTML="";const S=new window.svguitar.SVGuitarChord(m.current),j={strings:E.numStrings||6,frets:E.numFrets||5,position:E.startingFret||1,tuning:[],width:160,height:220,fretSize:1.2,fingerSize:.75,sidePadding:.2,fontFamily:"Arial",color:"#ffffff",backgroundColor:"transparent",strokeColor:"#ffffff",textColor:"#ffffff",fretLabelColor:"#ffffff",fingerTextColor:"#000000",fingerTextSize:28},L={fingers:[...(E.fingers||[]).map(F=>{const[M,H,z]=F;return z&&z!=="undefined"?[M,H,z]:[M,H]}),...(E.openStrings||[]).map(F=>[F,0]),...(E.mutedStrings||[]).map(F=>[F,"x"])],barres:E.barres||[]};S.configure(j).chord(L).draw(),setTimeout(()=>{const F=m.current?.querySelector("svg");F&&(F.style.width="100%",F.style.height="100%",F.style.maxWidth="160px",F.style.maxHeight="224px",F.style.position="relative",F.style.zIndex="1")},50)}catch(E){console.error("Error rendering memoized chord chart:",E)}})()},[n]);const g=b=>{b.preventDefault(),b.stopPropagation(),d(!1),r(n.id,{title:n.title,chord_data:n.chord_data,sectionId:n.sectionId,sectionLabel:n.sectionLabel,sectionRepeatCount:n.sectionRepeatCount})},v=b=>{b.preventDefault(),b.stopPropagation(),d(!1),s(n.id)},x=b=>{b.preventDefault(),b.stopPropagation(),d(!1),l(n.id,{sectionId:n.sectionId,sectionLabel:n.sectionLabel,sectionRepeatCount:n.sectionRepeatCount})},y=b=>{b.preventDefault(),b.stopPropagation(),d(!1);const E={...n.chord_data,hasLineBreakAfter:!n.hasLineBreakAfter};r(n.id,{title:n.title,chord_data:E,sectionId:n.sectionId,sectionLabel:n.sectionLabel,sectionRepeatCount:n.sectionRepeatCount})},N=b=>{b.preventDefault(),b.stopPropagation(),d(!c)};return i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"bg-gray-800 p-1 rounded-lg cursor-pointer relative group",onClick:N,style:{minWidth:"0",maxWidth:"100%",width:"100%",position:"relative"},children:[i.jsx("button",{className:"absolute top-1 right-1 bg-gray-700 text-gray-300 rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity z-10",onClick:N,children:""}),i.jsx("div",{className:"relative w-full h-36 mx-auto flex items-center justify-center overflow-hidden",children:i.jsx("div",{ref:m,className:"w-full h-full"})}),i.jsx("div",{className:"text-center text-white text-sm font-semibold mt-2",children:n.title}),n.hasLineBreakAfter&&i.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-xs",children:""})]}),c&&i.jsxs("div",{ref:h,className:"absolute top-8 right-0 bg-gray-700 border border-gray-600 rounded-lg shadow-lg z-20 min-w-48",children:[i.jsx("button",{onClick:g,className:"w-full text-left px-4 py-2 text-gray-200 hover:bg-gray-600 rounded-t-lg flex items-center",children:" Edit chord"}),i.jsx("button",{onClick:x,className:"w-full text-left px-4 py-2 text-gray-200 hover:bg-gray-600 flex items-center",children:" Insert chord after"}),i.jsx("button",{onClick:y,className:"w-full text-left px-4 py-2 text-gray-200 hover:bg-gray-600 flex items-center",children:n.hasLineBreakAfter?" Remove line break":" Add line break after"}),i.jsx("button",{onClick:v,className:"w-full text-left px-4 py-2 text-red-400 hover:bg-gray-600 rounded-b-lg flex items-center",children:" Delete chord"})]})]})});function zv({isOpen:n,onClose:r,itemId:s,itemTitle:l}){const[c,d]=f.useState({}),[h,m]=f.useState({}),[g,v]=f.useState({}),[x,y]=f.useState(null),[N,b]=f.useState(null),[E,S]=f.useState({}),[j,A]=f.useState(new Set),[T,L]=f.useState({}),[F,M]=f.useState({}),[H,z]=f.useState({}),[q,we]=f.useState({}),[ae,ye]=f.useState({}),[xe,oe]=f.useState({}),[be,Te]=f.useState({}),[je,me]=f.useState({}),Q=[" Claude is making magic happen"," Claude is *still* making magic happen","Yeah, we all love instant gratification, but it'll still be quicker than you could do it from scratch","Are you familiar with the phrase 'A watched pot never boils'? It's kinda like that","Chill, I'm working on it.","You could be stretching or something while you wait, couldn't you?","The pyramids weren't built in a day... ","but hey, at least I'm not going to ask you for an email address to send the chord charts to.","Perfect chord charts take time to craft. These will take less time and they won't be perfect.","Yeah, I could show you a progress bar, but we both know it would just lie to you"],[ce,ue]=f.useState(0),[D,J]=f.useState([]),[Se,Me]=f.useState(!1),[Pe,Le]=f.useState(null),[se,Re]=f.useState(!1),[K,ee]=f.useState(null),[Ke,Qe]=f.useState(!1),[Be,it]=f.useState(null),[ut,Z]=f.useState(!1),[Ie,Je]=f.useState(null),ge=f.useCallback($=>$===s?{C:l,B:s,E:5}:null,[s,l]);f.useEffect(()=>{if(!window.svguitar){const $=document.createElement("script");$.src="https://omnibrain.github.io/svguitar/js/svguitar.umd.js",$.async=!0,document.body.appendChild($)}},[]),f.useEffect(()=>{n&&s&&ke(s)},[n,s]),f.useEffect(()=>{if(Object.values(F).filter(he=>he==="processing").length===0){ue(0),J([]);return}ue(0);const ie=Array.from({length:Q.length-1},(he,ze)=>ze+1).sort(()=>Math.random()-.5);J(ie);const Ee=setInterval(()=>{J(he=>{if(he.length===0){const de=Array.from({length:Q.length},(nt,et)=>et).sort(()=>Math.random()-.5),Ae=de[0],Oe=de.slice(1);return ue(Ae),Oe}else{const ze=he[0],de=he.slice(1);return ue(ze),de}})},1e4);return()=>clearInterval(Ee)},[F,Q]);const ke=async $=>{try{const te=await fetch(`/api/items/${$}/chord-charts`);if(te.ok){const ie=await te.json();d(he=>({...he,[$]:ie}));const Ee=He(ie);m(he=>({...he,[$]:Ee}))}}catch(te){console.error("Error loading chord charts:",te)}},He=$=>{const te=new Map;return $.forEach(ie=>{const Ee=ie.sectionId||"default-section",he=ie.sectionLabel||"Section",ze=ie.sectionRepeatCount||"";te.has(Ee)||te.set(Ee,{id:Ee,label:he,repeatCount:ze,chords:[]}),te.get(Ee).chords.push(ie)}),Array.from(te.values())},tt=$=>{const te=c[$]||[];return He(te)},xt=f.useMemo(()=>ES(async($,te,ie)=>{try{console.log("Debounced section update:",{itemId:$,sectionId:te,updates:ie});const he=(c[$]||[]).filter(de=>(de.sectionId||"default-section")===te);if(he.length===0){console.warn("No charts found for section:",te);return}console.log("Updating section charts:",he.length);const ze=he.map(async de=>{const Ae={...de.chord_data,sectionId:te,sectionLabel:ie.label!==void 0?ie.label:de.sectionLabel||"Section",sectionRepeatCount:ie.repeatCount!==void 0?ie.repeatCount:de.sectionRepeatCount||""},Oe=await fetch(`/api/chord-charts/${de.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:de.title,chord_data:Ae})});if(!Oe.ok)throw new Error(`Failed to update chart ${de.id}: ${Oe.statusText}`);return Oe.json()});await Promise.all(ze),console.log("All section charts updated successfully")}catch(Ee){console.error("Error updating section:",Ee)}},500),[c]),Ue=($,te,ie)=>{console.log("Local section update:",{itemId:$,sectionId:te,updates:ie}),m(Ee=>{const ze=(Ee[$]||[]).map(de=>de.id===te?{...de,...ie}:de);return{...Ee,[$]:ze}}),xt($,te,ie)},ot=async($,te)=>{if(!j.has(te)){A(ie=>new Set(ie).add(te));try{const ie=c[$]||[],he=ie.filter(de=>(de.sectionId||"default-section")===te).map(de=>fetch(`/api/items/${$}/chord-charts/${de.id}`,{method:"DELETE"}));await Promise.all(he);const ze=ie.filter(de=>(de.sectionId||"default-section")!==te);d(de=>({...de,[$]:ze})),m(de=>({...de,[$]:He(ze)}))}catch(ie){console.error("Error deleting section:",ie)}finally{A(ie=>{const Ee=new Set(ie);return Ee.delete(te),Ee})}}},Vt=$=>{const te=`section-${Date.now()}`,ie={id:te,label:"New Section",repeatCount:"",chords:[]};m(Ee=>({...Ee,[$]:[...Ee[$]||[],ie]})),S({itemId:$,scrollPosition:window.scrollY}),v(Ee=>({...Ee,[$]:!0})),b({sectionId:te,sectionLabel:"New Section",sectionRepeatCount:""})},Nt=($,te,ie)=>{y(te),b(null),S({itemId:$,scrollPosition:window.scrollY}),v(Ee=>({...Ee,[$]:!0}))},wt=async($,te)=>{try{if((await fetch(`/api/items/${$}/chord-charts/${te}`,{method:"DELETE"})).ok){d(he=>({...he,[$]:(he[$]||[]).filter(ze=>ze.id!==te)}));const Ee=(c[$]||[]).filter(he=>he.id!==te);m(he=>({...he,[$]:He(Ee)})),br("chord_chart_deleted",{itemId:$})}}catch(ie){console.error("Error deleting chord chart:",ie)}},$t=($,te,ie)=>{y(null),b({afterChordId:te,sectionId:ie.sectionId,sectionLabel:ie.sectionLabel,sectionRepeatCount:ie.sectionRepeatCount}),S({itemId:$,scrollPosition:window.scrollY}),v(Ee=>({...Ee,[$]:!0}))},It=async($,te)=>{try{const ie=!!x,Ee={title:te.title,chord_data:te.chord_data};if(!ie||N){const Ae=h[$]||[];let Oe;N?Oe={id:N.sectionId,label:N.sectionLabel,repeatCount:N.sectionRepeatCount}:Ae.length===0?Oe={id:"section-1",label:"Verse",repeatCount:""}:Oe=Ae[Ae.length-1],Ee.sectionId=Oe.id,Ee.sectionLabel=Oe.label,Ee.sectionRepeatCount=Oe.repeatCount}Ee.hasLineBreakAfter=te.startOnNewLine||!1,un("Setting line break after chord",{title:Ee.title,hasLineBreakAfter:Ee.hasLineBreakAfter}),un("Chord data with section metadata",{chartDataWithSection:Ee});const he=ie?`/api/chord-charts/${x}`:`/api/items/${$}/chord-charts`,ze=ie?"PUT":"POST";un(`${ie?"Updating":"Creating"} chord chart`,{method:ze,url:he});const de=await fetch(he,{method:ze,headers:{"Content-Type":"application/json"},body:JSON.stringify(Ee)});if(!de.ok)throw new Error(`Failed to save chord chart: ${de.statusText}`);if(ie){const Ae=await de.json();d(nt=>({...nt,[$]:(nt[$]||[]).map(et=>et.id===x?Ae:et)}));const Oe=(c[$]||[]).map(nt=>nt.id===x?Ae:nt);m(nt=>({...nt,[$]:He(Oe)})),br("chord_chart_updated",{itemId:$})}else{const Ae=await de.json();d(nt=>({...nt,[$]:[...nt[$]||[],Ae]}));const Oe=[...c[$]||[],Ae];m(nt=>({...nt,[$]:He(Oe)})),br("chord_chart_created",{itemId:$})}v(Ae=>({...Ae,[$]:!1})),y(null),b(null)}catch(ie){console.error("Error saving chord chart:",ie)}},Wt=()=>{E.itemId&&E.scrollPosition!==void 0&&setTimeout(()=>{window.scrollTo({top:E.scrollPosition,behavior:"smooth"}),S({})},100)},Cn=$=>{if((c[$]||[]).length===0)return;const ie=window.open("","_blank");ie.document.write(`
      <html>
        <head>
          <title>Chord Charts - ${l||$}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            h1 { text-align: center; margin-bottom: 30px; }
            .section { margin-bottom: 40px; }
            .section-header { font-size: 18px; font-weight: bold; margin-bottom: 15px; }
            .chord-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 20px; margin-bottom: 20px; }
            .chord-item { text-align: center; }
            .chord-svg { margin-bottom: 5px; }
            .chord-title { font-weight: bold; }
            @media print { body { margin: 0; } }
          </style>
        </head>
        <body>
          <h1>Chord Charts - ${l||$}</h1>
          ${tt($).map(Ee=>`
            <div class="section">
              <div class="section-header">${Ee.label} ${Ee.repeatCount}</div>
              <div class="chord-grid">
                ${Ee.chords.map(he=>`
                  <div class="chord-item">
                    <div class="chord-svg">${he.svg_content||""}</div>
                    <div class="chord-title">${he.title}</div>
                  </div>
                `).join("")}
              </div>
            </div>
          `).join("")}
        </body>
      </html>
    `),ie.document.close(),ie.print()},hr=($,te)=>{if(!$||$.trim().length===0)return oe(de=>({...de,[te]:null})),!0;const ie=$.trim();return/^[A-Za-z0-9#b/\s,\n\r-]+$/.test(ie)?ie.split(/[\n\r]+/).some(de=>{const Ae=de.trim();return Ae.length===0?!1:/^[A-Za-z]+$/.test(Ae)?!0:Ae.split(/[,\s]+/).filter(et=>et.trim().length>0).every(et=>/^[A-Ga-g][A-Za-z0-9#b/]*$/.test(et))})?(oe(de=>({...de,[te]:null})),!0):(oe(de=>({...de,[te]:'Please enter chord names separated by commas, spaces, or section names (e.g., "C, G, Am, F" or "D A G D" or "Intro")'})),!1):(oe(de=>({...de,[te]:"Only chord names (A-G), numbers, #, b, , , /, commas, spaces, and section names are allowed"})),!1)},bn=($,te)=>{if(!(!te||te.length===0)){if(te.length>5){alert("Maximum 5 files allowed. Please select fewer files.");return}z(ie=>({...ie,[$]:Array.from(te)}))}},zn=async $=>{const te=H[$]||[],ie=q[$]?.trim(),Ee=ae[$]?.trim();if(console.log(`[AUTOCREATE] handleProcessFiles called for item ${$}, files:`,te.length,"youtubeUrl:",ie,"manualChords:",Ee),ie){await Sn($,ie);return}if(Ee)if(hr(Ee,$)){await en($,Ee);return}else return;if(te.length===0){alert("Please add at least one file, YouTube URL, or manual chord input before processing.");return}await sn($,te)},en=async($,te)=>{console.log(`[AUTOCREATE] Processing manual chord input for item ${$}:`,te),M(ie=>({...ie,[$]:"processing"}));try{const ie=new AbortController;me(at=>({...at,[$]:ie}));const Ee=new Blob([te],{type:"text/plain"}),he=new File([Ee],"manual-input.txt",{type:"text/plain"}),ze=new FormData;ze.append("file0",he),ze.append("itemId",$),ze.append("userChoice","chord_names"),console.log("[AUTOCREATE] Sending manual input to autocreate endpoint");const de=await fetch("/api/autocreate-chord-charts",{method:"POST",body:ze,signal:ie.signal});if(!de.ok){const at=await de.text();throw new Error(`Failed to process manual input: ${de.status} ${de.statusText} - ${at}`)}const Ae=await de.json();console.log("[AUTOCREATE] Manual input processed successfully:",Ae);const nt=await(await fetch(`/api/items/${$}/chord-charts`)).json();d(at=>({...at,[$]:nt})),m(at=>({...at,[$]:He(nt)})),ye(at=>({...at,[$]:""})),M(at=>({...at,[$]:"complete"}));const et=ge($);ee({itemName:et?.C||`Item ${$}`,chordCount:nt.length,contentType:"chord_names",uploadedFileNames:"Manual entry",isVisionAnalysis:!1}),Re(!0),me(at=>{const Ht={...at};return delete Ht[$],Ht}),setTimeout(()=>{M(at=>({...at,[$]:null})),L(at=>({...at,[$]:!1}))},2e3)}catch(ie){console.error("Error processing manual chord input:",ie),M(Ee=>({...Ee,[$]:"error"})),me(Ee=>{const he={...Ee};return delete he[$],he}),setTimeout(()=>{M(Ee=>({...Ee,[$]:null}))},3e3)}},Sn=async($,te)=>{console.log(`[YOUTUBE] Processing YouTube URL for item ${$}:`,te);const ie=te.trim().replace(/[<>"']/g,"");if(!/^https?:\/\/(www\.)?(youtube\.com\/watch\?v=[\w-]+|youtu\.be\/[\w-]+)(\?.*|&.*)?$/.test(ie)){console.log(`[YOUTUBE] URL validation failed for: ${ie}`),Le({message:"Please enter a valid YouTube URL (e.g., https://youtube.com/watch?v=...)"}),Me(!0);return}console.log("[YOUTUBE] URL validation passed, setting progress state"),M(he=>({...he,[$]:"checking_transcript"}));try{console.log("[YOUTUBE] Fetching transcript from YouTube API");const he=await fetch("/api/youtube/check-transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:ie})});if(!he.ok)throw new Error("Failed to fetch YouTube transcript");const ze=await he.json();if(!ze.hasTranscript||!ze.transcript){Le({message:"This YouTube video does not have a transcript available. Please try a different video or use file upload instead."}),Me(!0);return}console.log(`[YOUTUBE] Transcript fetched successfully, length: ${ze.transcript.length} characters`),M(mn=>({...mn,[$]:"processing"}));const de=new Blob([ze.transcript],{type:"text/plain"}),Ae=new File([de],"youtube_transcript.txt",{type:"text/plain"}),Oe=new FormData;Oe.append("file0",Ae),Oe.append("itemId",$),Oe.append("userChoice","chord_names"),console.log("[AUTOCREATE] Sending transcript to autocreate endpoint");const nt=await fetch("/api/autocreate-chord-charts",{method:"POST",body:Oe});if(!nt.ok){const mn=await nt.text();throw new Error(`Failed to process YouTube transcript: ${nt.status} ${nt.statusText} - ${mn}`)}const et=await nt.json();console.log("[AUTOCREATE] YouTube transcript processed successfully:",et);const Ht=await(await fetch(`/api/items/${$}/chord-charts`)).json();d(mn=>({...mn,[$]:Ht})),m(mn=>({...mn,[$]:He(Ht)})),we(mn=>({...mn,[$]:""}));const no=ge($);ee({itemName:no?.C||`Item ${$}`,chordCount:Ht.length,contentType:"chord_names",uploadedFileNames:"YouTube transcript",isVisionAnalysis:!1}),Re(!0)}catch(he){console.error("Error processing YouTube URL:",he),Le({message:"Failed to process YouTube URL. Please try again."}),Me(!0)}finally{M(he=>{const ze={...he};return delete ze[$],ze})}},sn=async($,te)=>{try{M(de=>({...de,[$]:"uploading"}));const ie=new AbortController;me(de=>({...de,[$]:ie}));const Ee=new FormData;if(te.forEach((de,Ae)=>{Ee.append(`file${Ae}`,de)}),Ee.append("itemId",$),setTimeout(()=>{M(de=>({...de,[$]:"processing"}))},2e3),(await fetch("/api/autocreate-chord-charts",{method:"POST",body:Ee,signal:ie.signal})).ok){M(et=>({...et,[$]:"complete"}));const Ae=await(await fetch(`/api/items/${$}/chord-charts`)).json();d(et=>({...et,[$]:Ae})),m(et=>({...et,[$]:He(Ae)})),z(et=>({...et,[$]:[]})),br("autocreate_completed",{itemId:$,fileCount:te.length});const Oe=ge($),nt=te.map(et=>et.name).join(", ");ee({itemName:Oe?.C||`Item ${$}`,chordCount:Ae.length,contentType:"auto-detected",uploadedFileNames:nt,isVisionAnalysis:!1}),Re(!0),me(et=>{const at={...et};return delete at[$],at}),setTimeout(()=>{M(et=>({...et,[$]:null})),L(et=>({...et,[$]:!1}))},2e3)}else M(de=>({...de,[$]:"error"})),me(de=>{const Ae={...de};return delete Ae[$],Ae}),setTimeout(()=>{M(de=>({...de,[$]:null}))},3e3)}catch(ie){console.error("Error processing files:",ie),M(Ee=>({...Ee,[$]:"error"})),me(Ee=>{const he={...Ee};return delete he[$],he}),setTimeout(()=>{M(Ee=>({...Ee,[$]:null}))},3e3)}},an=$=>{(c[$]||[]).length>0?(Je($),Z(!0)):L(ie=>({...ie,[$]:!0}))},Qn=async()=>{if(Ie)try{const $=c[Ie]||[];for(const te of $)if(!(await fetch(`/api/items/${Ie}/chord-charts/${te.id}`,{method:"DELETE"})).ok)throw new Error(`Failed to delete chord chart ${te.id}`);d(te=>({...te,[Ie]:[]})),m(te=>({...te,[Ie]:[]})),L(te=>({...te,[Ie]:!0})),Z(!1),Je(null)}catch($){console.error("Error deleting existing chord charts:",$)}},Et=$=>{it($),Qe(!0)},yt=$=>{je[$]&&je[$].abort(),M(te=>{const ie={...te};return delete ie[$],ie}),me(te=>{const ie={...te};return delete ie[$],ie}),z(te=>{const ie={...te};return delete ie[$],ie}),we(te=>({...te,[$]:""})),ye(te=>({...te,[$]:""})),L(te=>({...te,[$]:!1}))},zt=$=>{console.log("Open copy from modal for item:",$)},Ot=$=>{console.log("Open copy to modal for item:",$)};if(!n)return null;const Ne=s;return i.jsx(Do,{open:n,onOpenChange:r,children:i.jsxs(Jr,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(qr,{children:[i.jsxs(Zr,{className:"flex items-center gap-2",children:[i.jsx(cc,{className:"h-5 w-5"}),"Chord Charts - ",l||s]}),i.jsx(eo,{className:"sr-only",children:"View and manage chord charts for this practice item"})]}),i.jsx("div",{className:"space-y-4",children:(()=>{const $=h[Ne],te=$?null:tt(Ne),Ee=($||te||[]).map((he,ze)=>i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("input",{type:"text",value:he.label,onChange:de=>{console.log("Updating section label:",he.id,de.target.value),Ue(Ne,he.id,{label:de.target.value})},className:"bg-gray-900 text-white px-2 py-1 rounded text-sm font-semibold border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Section name"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:he.repeatCount,onChange:de=>Ue(Ne,he.id,{repeatCount:de.target.value}),className:"bg-gray-900 text-white px-2 py-1 rounded text-sm w-6 text-center border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"x2",maxLength:"3"}),i.jsx("button",{onClick:()=>ot(Ne,he.id),disabled:j.size>0,className:`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold transition-colors ${j.size>0?"bg-gray-500 cursor-not-allowed":"bg-red-600 hover:bg-red-700 cursor-pointer"} text-white`,title:j.size>0?"Deleting...":"Delete section",children:j.size>0?i.jsx(ma,{className:"h-3 w-3 animate-spin"}):""})]})]}),ze===0&&(()=>{const de=he.chords[0];if(!de)return null;const Ae=de.tuning||"EADGBE",Oe=de.capo||0;return i.jsx("div",{className:"text-center text-white font-bold text-sm mb-3",children:Oe>0?`${Ae} | Capo on ${Oe}`:Ae})})(),he.chords.length>0&&i.jsx("div",{className:"space-y-2",children:(()=>{const de=[];let Ae=[];return he.chords.forEach((Oe,nt)=>{Ae.push(Oe),(Oe.hasLineBreakAfter||Ae.length>=5||nt===he.chords.length-1)&&(de.push([...Ae]),Ae=[])}),de.map((Oe,nt)=>i.jsx("div",{className:"grid grid-cols-5 gap-2",style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"0.5rem"},children:Oe.map(et=>i.jsx(jS,{chart:et,onEdit:(at,Ht)=>Nt(Ne,at),onDelete:at=>wt(Ne,at),onInsertAfter:(at,Ht)=>$t(Ne,at,Ht)},et.id))},nt))})()})]},he.id));return i.jsxs(i.Fragment,{children:[Ee,(c[Ne]||[]).length>0?i.jsx("div",{className:"flex justify-end mb-2",children:i.jsx(De,{variant:"outline",size:"sm",onClick:ze=>{ze.stopPropagation(),Cn(Ne)},className:"p-2 border-gray-600 text-gray-400 hover:text-gray-200 hover:bg-gray-600",title:"Print chord charts",children:i.jsx(qm,{className:"h-4 w-4"})})}):null,(()=>{const he=c[Ne]||[],ze=F[Ne],de=T[Ne];return he.length===0?i.jsxs("div",{className:"w-full mb-4",children:[i.jsxs(De,{onClick:()=>L(Ae=>({...Ae,[Ne]:!Ae[Ne]})),className:"w-full bg-gray-700 text-gray-300 hover:bg-gray-600 mb-2 flex items-center justify-center",children:[i.jsx(ei,{className:"h-4 w-4 mr-2"}),"Autocreate Chord Charts"]}),de&&i.jsxs("div",{className:"border border-gray-600/30 rounded-lg p-4 bg-gray-800/10",children:[i.jsxs("div",{className:"text-sm text-gray-400 mb-6",children:[i.jsx("p",{children:" Upload lyrics with chord names to create charts"}),i.jsx("p",{children:" Upload chord diagrams to import existing charts"})]}),!ze&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6 items-start",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"text-center mb-2",children:i.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Upload Files"})}),i.jsx("div",{className:`flex-1 p-4 border-2 border-dashed rounded-lg transition-colors cursor-pointer ${be[Ne]?"border-gray-500 bg-gray-800/20":"border-gray-600 hover:border-gray-500 bg-gray-800/10"}`,onDragOver:Ae=>{Ae.preventDefault(),Te(Oe=>Oe[Ne]!==!0?{...Oe,[Ne]:!0}:Oe)},onDragLeave:Ae=>{Ae.preventDefault(),Te(Oe=>Oe[Ne]!==!1?{...Oe,[Ne]:!1}:Oe)},onDrop:Ae=>{Ae.preventDefault(),Te(Oe=>({...Oe,[Ne]:!1})),bn(Ne,Ae.dataTransfer.files)},onClick:()=>{const Ae=document.createElement("input");Ae.type="file",Ae.multiple=!0,Ae.accept=".pdf,.png,.jpg,.jpeg",Ae.onchange=Oe=>bn(Ne,Oe.target.files),Ae.click()},children:i.jsxs("div",{className:"text-center",children:[i.jsx(ei,{className:`h-12 w-12 mx-auto mb-2 ${H[Ne]&&H[Ne].length>0?"text-gray-300":"text-gray-400"}`}),i.jsx("p",{className:`text-sm font-medium mb-2 ${H[Ne]&&H[Ne].length>0?"text-gray-200":"text-gray-300"}`,children:"Drop files or click"}),i.jsx("p",{className:"text-gray-400 text-xs mb-2",children:"PDFs, images  5mb max"}),H[Ne]&&H[Ne].length>0?i.jsx("div",{children:i.jsxs("p",{className:"text-gray-300 text-xs font-medium mb-1",children:[H[Ne].length," file(s)"]})}):i.jsx("p",{className:"text-gray-400 text-xs",children:"Lyrics or chord charts"})]})})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"text-center mb-2",children:i.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"YouTube Guitar Lesson"})}),i.jsx("div",{className:"flex-1 flex flex-col justify-center",children:i.jsx("input",{type:"url",placeholder:"YouTube guitar lesson URL (transcript required)",value:q[Ne]||"",onChange:Ae=>{const Oe=Ae.target.value.replace(/[<>"']/g,"");we(nt=>({...nt,[Ne]:Oe}))},maxLength:500,className:"w-full p-3 bg-gray-700 text-white rounded border-2 border-gray-600 focus:border-gray-500 text-sm"})})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"text-center mb-2",children:i.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Manual Entry"})}),i.jsxs("div",{className:"flex-1 flex flex-col justify-center relative",children:[i.jsx("textarea",{placeholder:`Enter song section names and chord names, like this:
Intro
Am7 Em/A E7sus
Verse
C G/B Am (space or comma-separated)`,value:ae[Ne]||"",onChange:Ae=>{const Oe=Ae.target.value;Oe.length<=500&&(ye(nt=>({...nt,[Ne]:Oe})),hr(Oe,Ne))},maxLength:500,className:`w-full p-3 text-white rounded border-2 focus:border-gray-500 text-sm resize-none min-h-[160px] ${xe[Ne]?"bg-red-900/20 border-red-500":"bg-gray-700 border-gray-600"}`}),i.jsxs("div",{className:"absolute bottom-1 right-2 text-xs text-gray-400",children:[(ae[Ne]||"").length,"/500"]}),xe[Ne]&&i.jsx("div",{className:"mt-1 text-xs text-red-400",children:xe[Ne]})]})]})]}),i.jsx("div",{className:"flex justify-center",children:i.jsxs(De,{onClick:()=>zn(Ne),disabled:ze||(H[Ne]||[]).length===0&&!q[Ne]?.trim()&&!ae[Ne]?.trim()||((H[Ne]||[]).length>0?1:0)+(q[Ne]?.trim()?1:0)+(ae[Ne]?.trim()?1:0)>1,className:"px-6",children:[i.jsx(Nd,{className:"h-4 w-4 mr-2"}),"Create Chord Charts"]})})]}),i.jsx("div",{className:"w-full p-6 border-2 border-dashed rounded-lg mt-4 bg-gray-800/10 border-gray-600/50",children:i.jsxs("div",{className:"text-center",children:[ze==="checking_transcripts"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-500"}),i.jsx("span",{className:"text-yellow-400",children:"Checking for transcripts..."})]}),i.jsx("br",{}),i.jsxs(De,{variant:"outline",size:"sm",onClick:()=>Et(Ne),className:"text-gray-400 hover:text-gray-200 border-gray-600",children:[i.jsx(Dn,{className:"h-3 w-3 mr-1"}),"Cancel"]})]}),ze==="reading_transcript"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-500"}),i.jsx("span",{className:"text-gray-400",children:"Reading transcript..."})]}),i.jsx("br",{}),i.jsxs(De,{variant:"outline",size:"sm",onClick:()=>Et(Ne),className:"text-gray-400 hover:text-gray-200 border-gray-600",children:[i.jsx(Dn,{className:"h-3 w-3 mr-1"}),"Cancel"]})]}),ze==="uploading"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-500"}),i.jsx("span",{className:"text-gray-400",children:"Uploading files..."})]}),i.jsx("br",{}),i.jsxs(De,{variant:"outline",size:"sm",onClick:()=>Et(Ne),className:"text-gray-400 hover:text-gray-200 border-gray-600",children:[i.jsx(Dn,{className:"h-3 w-3 mr-1"}),"Cancel"]})]}),ze==="processing_transcript"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-500"}),i.jsx("span",{className:"text-white",children:"Processing transcript..."})]}),i.jsx("br",{}),i.jsxs(De,{variant:"outline",size:"sm",onClick:()=>Et(Ne),className:"text-gray-400 hover:text-gray-200 border-gray-600",children:[i.jsx(Dn,{className:"h-3 w-3 mr-1"}),"Cancel"]})]}),ze==="processing"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-500"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-white",children:Q[ce]}),i.jsx("div",{className:"ml-2 animate-spin",children:""})]})]}),i.jsx("br",{}),i.jsxs(De,{variant:"outline",size:"sm",onClick:()=>Et(Ne),className:"text-gray-400 hover:text-gray-200 border-gray-600",children:[i.jsx(Dn,{className:"h-3 w-3 mr-1"}),"Cancel"]})]}),ze==="complete"&&i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx(sa,{className:"h-4 w-4 text-green-500"}),i.jsx("span",{className:"text-green-400",children:"Chord charts created!"})]}),ze==="error"&&i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx(lr,{className:"h-4 w-4 text-red-500"}),i.jsx("span",{className:"text-red-400",children:"Error processing files. Please try again."})]}),!ze&&i.jsx(i.Fragment,{children:c[Ne]&&c[Ne].length>0?i.jsxs(i.Fragment,{children:[i.jsx(lr,{className:"h-8 w-8 text-orange-400 mx-auto mb-2"}),i.jsx("p",{className:"text-orange-300 font-medium mb-1",children:"Chord charts already exist"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Please delete all chord charts from this song before using autocreate"})]}):i.jsx(i.Fragment,{children:(H[Ne]||[]).length>0?i.jsxs(i.Fragment,{children:[i.jsx(Gl,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-gray-300 font-medium mb-1",children:"Ready to create chord charts"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Click 'Create chord charts'"})]}):i.jsxs(i.Fragment,{children:[i.jsx(Gl,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-gray-300 font-medium mb-1",children:"Add a file above, then click 'Create Chord Charts'"}),i.jsx("p",{className:"text-gray-400 text-xs",children:"(The results will probably contain errors, use the edit icon to make any corrections needed.)"})]})})})]})})]})]}):i.jsxs(De,{variant:"outline",onClick:()=>an(Ne),className:"w-full mb-4 text-orange-300 hover:bg-orange-800 hover:border-orange-600",children:[i.jsx(ei,{className:"h-4 w-4 mr-2"}),"Replace with autocreated charts"]})})(),i.jsx(De,{variant:"default",onClick:()=>{S({itemId:Ne,scrollPosition:window.scrollY}),v(he=>({...he,[Ne]:!0})),setTimeout(()=>{const he=document.querySelector(`[data-editor-for-item="${Ne}"]`);he&&he.scrollIntoView({behavior:"smooth",block:"start"})},100)},className:"w-full mb-4",children:"+ Add New Chord"}),i.jsx(De,{variant:"default",onClick:()=>Vt(Ne),className:"w-full mb-4",children:"+ Add New Section"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4 w-full",children:[i.jsx(De,{variant:"default",onClick:()=>zt(Ne),className:"w-full sm:w-1/2",children:"Copy chord charts from other song"}),i.jsx(De,{variant:"default",onClick:()=>Ot(Ne),disabled:!c[Ne]||c[Ne].length===0,className:"w-full sm:w-1/2 bg-purple-700 text-purple-300 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Copy chord charts to other song"})]}),g[Ne]&&i.jsx("div",{"data-editor-for-item":Ne,children:i.jsx(vv,{itemId:Ne,defaultTuning:ge(Ne)?.H||"EADGBE",editingChordId:x,insertionContext:N,onSave:he=>It(Ne,he),onCancel:()=>{v(he=>({...he,[Ne]:!1})),y(null),b(null),Wt()}})})]})})()}),Se&&i.jsx(Md,{isOpen:Se,onClose:()=>Me(!1),error:Pe}),se&&i.jsx(Id,{isOpen:se,onClose:()=>Re(!1)}),Ke&&i.jsx(Eo,{open:Ke,onOpenChange:Qe,children:i.jsxs(Ur,{children:[i.jsxs(Vr,{children:[i.jsx(Hr,{children:"Cancel processing?"}),i.jsx(Gr,{children:"This will stop the current autocreate operation. Any progress will be lost."})]}),i.jsxs(Wr,{children:[i.jsx(jo,{children:"Continue processing"}),i.jsx(Nr,{onClick:()=>{Be&&yt(Be),Qe(!1),it(null)},children:"Cancel processing"})]})]})}),ut&&i.jsx(Eo,{open:ut,onOpenChange:Z,children:i.jsxs(Ur,{children:[i.jsxs(Vr,{children:[i.jsxs(Hr,{className:"flex items-center space-x-2",children:[i.jsx(lr,{className:"h-5 w-5 text-orange-500"}),i.jsx("span",{children:"Replace Existing Chord Charts"})]}),i.jsx(Gr,{children:"This song already has chord charts. To use autocreate, all existing chord charts must be deleted first. This action cannot be undone."})]}),i.jsxs(Wr,{children:[i.jsx(jo,{onClick:()=>{Z(!1),Je(null)},children:"Cancel"}),i.jsx(Nr,{onClick:Qn,className:"bg-orange-500 hover:bg-orange-600 text-white border-orange-500 shadow-lg font-medium",children:"Delete All & Autocreate"})]})]})}),i.jsx(Md,{isOpen:Se,onClose:()=>{Me(!1),Le(null)},error:Pe}),i.jsx(Id,{isOpen:se,onClose:()=>{Re(!1),ee(null)},autocreateData:K})]})})}function kS(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return f.useMemo(()=>l=>{r.forEach(c=>c(l))},r)}const wc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function hi(n){const r=Object.prototype.toString.call(n);return r==="[object Window]"||r==="[object global]"}function kf(n){return"nodeType"in n}function Pn(n){var r,s;return n?hi(n)?n:kf(n)&&(r=(s=n.ownerDocument)==null?void 0:s.defaultView)!=null?r:window:window}function Tf(n){const{Document:r}=Pn(n);return n instanceof r}function wa(n){return hi(n)?!1:n instanceof Pn(n).HTMLElement}function Bv(n){return n instanceof Pn(n).SVGElement}function pi(n){return n?hi(n)?n.document:kf(n)?Tf(n)?n:wa(n)||Bv(n)?n.ownerDocument:document:document:document}const Tr=wc?f.useLayoutEffect:f.useEffect;function Rf(n){const r=f.useRef(n);return Tr(()=>{r.current=n}),f.useCallback(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];return r.current==null?void 0:r.current(...l)},[])}function TS(){const n=f.useRef(null),r=f.useCallback((l,c)=>{n.current=setInterval(l,c)},[]),s=f.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[r,s]}function fa(n,r){r===void 0&&(r=[n]);const s=f.useRef(n);return Tr(()=>{s.current!==n&&(s.current=n)},r),s}function Ca(n,r){const s=f.useRef();return f.useMemo(()=>{const l=n(s.current);return s.current=l,l},[...r])}function Zl(n){const r=Rf(n),s=f.useRef(null),l=f.useCallback(c=>{c!==s.current&&r?.(c,s.current),s.current=c},[]);return[s,l]}function Fd(n){const r=f.useRef();return f.useEffect(()=>{r.current=n},[n]),r.current}let xd={};function ba(n,r){return f.useMemo(()=>{if(r)return r;const s=xd[n]==null?0:xd[n]+1;return xd[n]=s,n+"-"+s},[n,r])}function Uv(n){return function(r){for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];return l.reduce((d,h)=>{const m=Object.entries(h);for(const[g,v]of m){const x=d[g];x!=null&&(d[g]=x+n*v)}return d},{...r})}}const oi=Uv(1),ha=Uv(-1);function RS(n){return"clientX"in n&&"clientY"in n}function Af(n){if(!n)return!1;const{KeyboardEvent:r}=Pn(n.target);return r&&n instanceof r}function AS(n){if(!n)return!1;const{TouchEvent:r}=Pn(n.target);return r&&n instanceof r}function $d(n){if(AS(n)){if(n.touches&&n.touches.length){const{clientX:r,clientY:s}=n.touches[0];return{x:r,y:s}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:r,clientY:s}=n.changedTouches[0];return{x:r,y:s}}}return RS(n)?{x:n.clientX,y:n.clientY}:null}const Ao=Object.freeze({Translate:{toString(n){if(!n)return;const{x:r,y:s}=n;return"translate3d("+(r?Math.round(r):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:r,scaleY:s}=n;return"scaleX("+r+") scaleY("+s+")"}},Transform:{toString(n){if(n)return[Ao.Translate.toString(n),Ao.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:r,duration:s,easing:l}=n;return r+" "+s+"ms "+l}}}),Tm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function DS(n){return n.matches(Tm)?n:n.querySelector(Tm)}const PS={display:"none"};function OS(n){let{id:r,value:s}=n;return Ct.createElement("div",{id:r,style:PS},s)}function _S(n){let{id:r,announcement:s,ariaLiveType:l="assertive"}=n;const c={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ct.createElement("div",{id:r,style:c,role:"status","aria-live":l,"aria-atomic":!0},s)}function MS(){const[n,r]=f.useState("");return{announce:f.useCallback(l=>{l!=null&&r(l)},[]),announcement:n}}const Vv=f.createContext(null);function IS(n){const r=f.useContext(Vv);f.useEffect(()=>{if(!r)throw new Error("useDndMonitor must be used within a children of <DndContext>");return r(n)},[n,r])}function LS(){const[n]=f.useState(()=>new Set),r=f.useCallback(l=>(n.add(l),()=>n.delete(l)),[n]);return[f.useCallback(l=>{let{type:c,event:d}=l;n.forEach(h=>{var m;return(m=h[c])==null?void 0:m.call(h,d)})},[n]),r]}const FS={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},$S={onDragStart(n){let{active:r}=n;return"Picked up draggable item "+r.id+"."},onDragOver(n){let{active:r,over:s}=n;return s?"Draggable item "+r.id+" was moved over droppable area "+s.id+".":"Draggable item "+r.id+" is no longer over a droppable area."},onDragEnd(n){let{active:r,over:s}=n;return s?"Draggable item "+r.id+" was dropped over droppable area "+s.id:"Draggable item "+r.id+" was dropped."},onDragCancel(n){let{active:r}=n;return"Dragging was cancelled. Draggable item "+r.id+" was dropped."}};function zS(n){let{announcements:r=$S,container:s,hiddenTextDescribedById:l,screenReaderInstructions:c=FS}=n;const{announce:d,announcement:h}=MS(),m=ba("DndLiveRegion"),[g,v]=f.useState(!1);if(f.useEffect(()=>{v(!0)},[]),IS(f.useMemo(()=>({onDragStart(y){let{active:N}=y;d(r.onDragStart({active:N}))},onDragMove(y){let{active:N,over:b}=y;r.onDragMove&&d(r.onDragMove({active:N,over:b}))},onDragOver(y){let{active:N,over:b}=y;d(r.onDragOver({active:N,over:b}))},onDragEnd(y){let{active:N,over:b}=y;d(r.onDragEnd({active:N,over:b}))},onDragCancel(y){let{active:N,over:b}=y;d(r.onDragCancel({active:N,over:b}))}}),[d,r])),!g)return null;const x=Ct.createElement(Ct.Fragment,null,Ct.createElement(OS,{id:l,value:c.draggable}),Ct.createElement(_S,{id:m,announcement:h}));return s?Er.createPortal(x,s):x}var Zt;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Zt||(Zt={}));function ec(){}function li(n,r){return f.useMemo(()=>({sensor:n,options:r??{}}),[n,r])}function Df(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return f.useMemo(()=>[...r].filter(l=>l!=null),[...r])}const dr=Object.freeze({x:0,y:0});function Wv(n,r){return Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2))}function Hv(n,r){let{data:{value:s}}=n,{data:{value:l}}=r;return s-l}function BS(n,r){let{data:{value:s}}=n,{data:{value:l}}=r;return l-s}function Rm(n){let{left:r,top:s,height:l,width:c}=n;return[{x:r,y:s},{x:r+c,y:s},{x:r,y:s+l},{x:r+c,y:s+l}]}function Gv(n,r){if(!n||n.length===0)return null;const[s]=n;return s[r]}function Am(n,r,s){return r===void 0&&(r=n.left),s===void 0&&(s=n.top),{x:r+n.width*.5,y:s+n.height*.5}}const tc=n=>{let{collisionRect:r,droppableRects:s,droppableContainers:l}=n;const c=Am(r,r.left,r.top),d=[];for(const h of l){const{id:m}=h,g=s.get(m);if(g){const v=Wv(Am(g),c);d.push({id:m,data:{droppableContainer:h,value:v}})}}return d.sort(Hv)},US=n=>{let{collisionRect:r,droppableRects:s,droppableContainers:l}=n;const c=Rm(r),d=[];for(const h of l){const{id:m}=h,g=s.get(m);if(g){const v=Rm(g),x=c.reduce((N,b,E)=>N+Wv(v[E],b),0),y=Number((x/4).toFixed(4));d.push({id:m,data:{droppableContainer:h,value:y}})}}return d.sort(Hv)};function VS(n,r){const s=Math.max(r.top,n.top),l=Math.max(r.left,n.left),c=Math.min(r.left+r.width,n.left+n.width),d=Math.min(r.top+r.height,n.top+n.height),h=c-l,m=d-s;if(l<c&&s<d){const g=r.width*r.height,v=n.width*n.height,x=h*m,y=x/(g+v-x);return Number(y.toFixed(4))}return 0}const WS=n=>{let{collisionRect:r,droppableRects:s,droppableContainers:l}=n;const c=[];for(const d of l){const{id:h}=d,m=s.get(h);if(m){const g=VS(m,r);g>0&&c.push({id:h,data:{droppableContainer:d,value:g}})}}return c.sort(BS)};function HS(n,r,s){return{...n,scaleX:r&&s?r.width/s.width:1,scaleY:r&&s?r.height/s.height:1}}function Yv(n,r){return n&&r?{x:n.left-r.left,y:n.top-r.top}:dr}function GS(n){return function(s){for(var l=arguments.length,c=new Array(l>1?l-1:0),d=1;d<l;d++)c[d-1]=arguments[d];return c.reduce((h,m)=>({...h,top:h.top+n*m.y,bottom:h.bottom+n*m.y,left:h.left+n*m.x,right:h.right+n*m.x}),{...s})}}const YS=GS(1);function KS(n){if(n.startsWith("matrix3d(")){const r=n.slice(9,-1).split(/, /);return{x:+r[12],y:+r[13],scaleX:+r[0],scaleY:+r[5]}}else if(n.startsWith("matrix(")){const r=n.slice(7,-1).split(/, /);return{x:+r[4],y:+r[5],scaleX:+r[0],scaleY:+r[3]}}return null}function QS(n,r,s){const l=KS(r);if(!l)return n;const{scaleX:c,scaleY:d,x:h,y:m}=l,g=n.left-h-(1-c)*parseFloat(s),v=n.top-m-(1-d)*parseFloat(s.slice(s.indexOf(" ")+1)),x=c?n.width/c:n.width,y=d?n.height/d:n.height;return{width:x,height:y,top:v,right:g+x,bottom:v+y,left:g}}const XS={ignoreTransform:!1};function mi(n,r){r===void 0&&(r=XS);let s=n.getBoundingClientRect();if(r.ignoreTransform){const{transform:v,transformOrigin:x}=Pn(n).getComputedStyle(n);v&&(s=QS(s,v,x))}const{top:l,left:c,width:d,height:h,bottom:m,right:g}=s;return{top:l,left:c,width:d,height:h,bottom:m,right:g}}function Dm(n){return mi(n,{ignoreTransform:!0})}function JS(n){const r=n.innerWidth,s=n.innerHeight;return{top:0,left:0,right:r,bottom:s,width:r,height:s}}function qS(n,r){return r===void 0&&(r=Pn(n).getComputedStyle(n)),r.position==="fixed"}function ZS(n,r){r===void 0&&(r=Pn(n).getComputedStyle(n));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(c=>{const d=r[c];return typeof d=="string"?s.test(d):!1})}function Cc(n,r){const s=[];function l(c){if(r!=null&&s.length>=r||!c)return s;if(Tf(c)&&c.scrollingElement!=null&&!s.includes(c.scrollingElement))return s.push(c.scrollingElement),s;if(!wa(c)||Bv(c)||s.includes(c))return s;const d=Pn(n).getComputedStyle(c);return c!==n&&ZS(c,d)&&s.push(c),qS(c,d)?s:l(c.parentNode)}return n?l(n):s}function Kv(n){const[r]=Cc(n,1);return r??null}function wd(n){return!wc||!n?null:hi(n)?n:kf(n)?Tf(n)||n===pi(n).scrollingElement?window:wa(n)?n:null:null}function Qv(n){return hi(n)?n.scrollX:n.scrollLeft}function Xv(n){return hi(n)?n.scrollY:n.scrollTop}function zd(n){return{x:Qv(n),y:Xv(n)}}var on;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(on||(on={}));function Jv(n){return!wc||!n?!1:n===document.scrollingElement}function qv(n){const r={x:0,y:0},s=Jv(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},l={x:n.scrollWidth-s.width,y:n.scrollHeight-s.height},c=n.scrollTop<=r.y,d=n.scrollLeft<=r.x,h=n.scrollTop>=l.y,m=n.scrollLeft>=l.x;return{isTop:c,isLeft:d,isBottom:h,isRight:m,maxScroll:l,minScroll:r}}const e1={x:.2,y:.2};function t1(n,r,s,l,c){let{top:d,left:h,right:m,bottom:g}=s;l===void 0&&(l=10),c===void 0&&(c=e1);const{isTop:v,isBottom:x,isLeft:y,isRight:N}=qv(n),b={x:0,y:0},E={x:0,y:0},S={height:r.height*c.y,width:r.width*c.x};return!v&&d<=r.top+S.height?(b.y=on.Backward,E.y=l*Math.abs((r.top+S.height-d)/S.height)):!x&&g>=r.bottom-S.height&&(b.y=on.Forward,E.y=l*Math.abs((r.bottom-S.height-g)/S.height)),!N&&m>=r.right-S.width?(b.x=on.Forward,E.x=l*Math.abs((r.right-S.width-m)/S.width)):!y&&h<=r.left+S.width&&(b.x=on.Backward,E.x=l*Math.abs((r.left+S.width-h)/S.width)),{direction:b,speed:E}}function n1(n){if(n===document.scrollingElement){const{innerWidth:d,innerHeight:h}=window;return{top:0,left:0,right:d,bottom:h,width:d,height:h}}const{top:r,left:s,right:l,bottom:c}=n.getBoundingClientRect();return{top:r,left:s,right:l,bottom:c,width:n.clientWidth,height:n.clientHeight}}function Zv(n){return n.reduce((r,s)=>oi(r,zd(s)),dr)}function r1(n){return n.reduce((r,s)=>r+Qv(s),0)}function o1(n){return n.reduce((r,s)=>r+Xv(s),0)}function s1(n,r){if(r===void 0&&(r=mi),!n)return;const{top:s,left:l,bottom:c,right:d}=r(n);Kv(n)&&(c<=0||d<=0||s>=window.innerHeight||l>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const i1=[["x",["left","right"],r1],["y",["top","bottom"],o1]];class Pf{constructor(r,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const l=Cc(s),c=Zv(l);this.rect={...r},this.width=r.width,this.height=r.height;for(const[d,h,m]of i1)for(const g of h)Object.defineProperty(this,g,{get:()=>{const v=m(l),x=c[d]-v;return this.rect[g]+x},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ia{constructor(r){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var l;return(l=this.target)==null?void 0:l.removeEventListener(...s)})},this.target=r}add(r,s,l){var c;(c=this.target)==null||c.addEventListener(r,s,l),this.listeners.push([r,s,l])}}function a1(n){const{EventTarget:r}=Pn(n);return n instanceof r?n:pi(n)}function Cd(n,r){const s=Math.abs(n.x),l=Math.abs(n.y);return typeof r=="number"?Math.sqrt(s**2+l**2)>r:"x"in r&&"y"in r?s>r.x&&l>r.y:"x"in r?s>r.x:"y"in r?l>r.y:!1}var Kn;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(Kn||(Kn={}));function Pm(n){n.preventDefault()}function l1(n){n.stopPropagation()}var dt;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(dt||(dt={}));const ey={start:[dt.Space,dt.Enter],cancel:[dt.Esc],end:[dt.Space,dt.Enter,dt.Tab]},c1=(n,r)=>{let{currentCoordinates:s}=r;switch(n.code){case dt.Right:return{...s,x:s.x+25};case dt.Left:return{...s,x:s.x-25};case dt.Down:return{...s,y:s.y+25};case dt.Up:return{...s,y:s.y-25}}};class Sa{constructor(r){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=r;const{event:{target:s}}=r;this.props=r,this.listeners=new ia(pi(s)),this.windowListeners=new ia(Pn(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Kn.Resize,this.handleCancel),this.windowListeners.add(Kn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Kn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:r,onStart:s}=this.props,l=r.node.current;l&&s1(l),s(dr)}handleKeyDown(r){if(Af(r)){const{active:s,context:l,options:c}=this.props,{keyboardCodes:d=ey,coordinateGetter:h=c1,scrollBehavior:m="smooth"}=c,{code:g}=r;if(d.end.includes(g)){this.handleEnd(r);return}if(d.cancel.includes(g)){this.handleCancel(r);return}const{collisionRect:v}=l.current,x=v?{x:v.left,y:v.top}:dr;this.referenceCoordinates||(this.referenceCoordinates=x);const y=h(r,{active:s,context:l.current,currentCoordinates:x});if(y){const N=ha(y,x),b={x:0,y:0},{scrollableAncestors:E}=l.current;for(const S of E){const j=r.code,{isTop:A,isRight:T,isLeft:L,isBottom:F,maxScroll:M,minScroll:H}=qv(S),z=n1(S),q={x:Math.min(j===dt.Right?z.right-z.width/2:z.right,Math.max(j===dt.Right?z.left:z.left+z.width/2,y.x)),y:Math.min(j===dt.Down?z.bottom-z.height/2:z.bottom,Math.max(j===dt.Down?z.top:z.top+z.height/2,y.y))},we=j===dt.Right&&!T||j===dt.Left&&!L,ae=j===dt.Down&&!F||j===dt.Up&&!A;if(we&&q.x!==y.x){const ye=S.scrollLeft+N.x,xe=j===dt.Right&&ye<=M.x||j===dt.Left&&ye>=H.x;if(xe&&!N.y){S.scrollTo({left:ye,behavior:m});return}xe?b.x=S.scrollLeft-ye:b.x=j===dt.Right?S.scrollLeft-M.x:S.scrollLeft-H.x,b.x&&S.scrollBy({left:-b.x,behavior:m});break}else if(ae&&q.y!==y.y){const ye=S.scrollTop+N.y,xe=j===dt.Down&&ye<=M.y||j===dt.Up&&ye>=H.y;if(xe&&!N.x){S.scrollTo({top:ye,behavior:m});return}xe?b.y=S.scrollTop-ye:b.y=j===dt.Down?S.scrollTop-M.y:S.scrollTop-H.y,b.y&&S.scrollBy({top:-b.y,behavior:m});break}}this.handleMove(r,oi(ha(y,this.referenceCoordinates),b))}}}handleMove(r,s){const{onMove:l}=this.props;r.preventDefault(),l(s)}handleEnd(r){const{onEnd:s}=this.props;r.preventDefault(),this.detach(),s()}handleCancel(r){const{onCancel:s}=this.props;r.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Sa.activators=[{eventName:"onKeyDown",handler:(n,r,s)=>{let{keyboardCodes:l=ey,onActivation:c}=r,{active:d}=s;const{code:h}=n.nativeEvent;if(l.start.includes(h)){const m=d.activatorNode.current;return m&&n.target!==m?!1:(n.preventDefault(),c?.({event:n.nativeEvent}),!0)}return!1}}];function Om(n){return!!(n&&"distance"in n)}function _m(n){return!!(n&&"delay"in n)}class Of{constructor(r,s,l){var c;l===void 0&&(l=a1(r.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=r,this.events=s;const{event:d}=r,{target:h}=d;this.props=r,this.events=s,this.document=pi(h),this.documentListeners=new ia(this.document),this.listeners=new ia(l),this.windowListeners=new ia(Pn(h)),this.initialCoordinates=(c=$d(d))!=null?c:dr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:r,props:{options:{activationConstraint:s,bypassActivationConstraint:l}}}=this;if(this.listeners.add(r.move.name,this.handleMove,{passive:!1}),this.listeners.add(r.end.name,this.handleEnd),r.cancel&&this.listeners.add(r.cancel.name,this.handleCancel),this.windowListeners.add(Kn.Resize,this.handleCancel),this.windowListeners.add(Kn.DragStart,Pm),this.windowListeners.add(Kn.VisibilityChange,this.handleCancel),this.windowListeners.add(Kn.ContextMenu,Pm),this.documentListeners.add(Kn.Keydown,this.handleKeydown),s){if(l!=null&&l({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(_m(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(Om(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(r,s){const{active:l,onPending:c}=this.props;c(l,r,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:r}=this,{onStart:s}=this.props;r&&(this.activated=!0,this.documentListeners.add(Kn.Click,l1,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Kn.SelectionChange,this.removeTextSelection),s(r))}handleMove(r){var s;const{activated:l,initialCoordinates:c,props:d}=this,{onMove:h,options:{activationConstraint:m}}=d;if(!c)return;const g=(s=$d(r))!=null?s:dr,v=ha(c,g);if(!l&&m){if(Om(m)){if(m.tolerance!=null&&Cd(v,m.tolerance))return this.handleCancel();if(Cd(v,m.distance))return this.handleStart()}if(_m(m)&&Cd(v,m.tolerance))return this.handleCancel();this.handlePending(m,v);return}r.cancelable&&r.preventDefault(),h(g)}handleEnd(){const{onAbort:r,onEnd:s}=this.props;this.detach(),this.activated||r(this.props.active),s()}handleCancel(){const{onAbort:r,onCancel:s}=this.props;this.detach(),this.activated||r(this.props.active),s()}handleKeydown(r){r.code===dt.Esc&&this.handleCancel()}removeTextSelection(){var r;(r=this.document.getSelection())==null||r.removeAllRanges()}}const u1={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Na extends Of{constructor(r){const{event:s}=r,l=pi(s.target);super(r,u1,l)}}Na.activators=[{eventName:"onPointerDown",handler:(n,r)=>{let{nativeEvent:s}=n,{onActivation:l}=r;return!s.isPrimary||s.button!==0?!1:(l?.({event:s}),!0)}}];const d1={move:{name:"mousemove"},end:{name:"mouseup"}};var Bd;(function(n){n[n.RightClick=2]="RightClick"})(Bd||(Bd={}));class f1 extends Of{constructor(r){super(r,d1,pi(r.event.target))}}f1.activators=[{eventName:"onMouseDown",handler:(n,r)=>{let{nativeEvent:s}=n,{onActivation:l}=r;return s.button===Bd.RightClick?!1:(l?.({event:s}),!0)}}];const bd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class h1 extends Of{constructor(r){super(r,bd)}static setup(){return window.addEventListener(bd.move.name,r,{capture:!1,passive:!1}),function(){window.removeEventListener(bd.move.name,r)};function r(){}}}h1.activators=[{eventName:"onTouchStart",handler:(n,r)=>{let{nativeEvent:s}=n,{onActivation:l}=r;const{touches:c}=s;return c.length>1?!1:(l?.({event:s}),!0)}}];var aa;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(aa||(aa={}));var nc;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(nc||(nc={}));function p1(n){let{acceleration:r,activator:s=aa.Pointer,canScroll:l,draggingRect:c,enabled:d,interval:h=5,order:m=nc.TreeOrder,pointerCoordinates:g,scrollableAncestors:v,scrollableAncestorRects:x,delta:y,threshold:N}=n;const b=g1({delta:y,disabled:!d}),[E,S]=TS(),j=f.useRef({x:0,y:0}),A=f.useRef({x:0,y:0}),T=f.useMemo(()=>{switch(s){case aa.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case aa.DraggableRect:return c}},[s,c,g]),L=f.useRef(null),F=f.useCallback(()=>{const H=L.current;if(!H)return;const z=j.current.x*A.current.x,q=j.current.y*A.current.y;H.scrollBy(z,q)},[]),M=f.useMemo(()=>m===nc.TreeOrder?[...v].reverse():v,[m,v]);f.useEffect(()=>{if(!d||!v.length||!T){S();return}for(const H of M){if(l?.(H)===!1)continue;const z=v.indexOf(H),q=x[z];if(!q)continue;const{direction:we,speed:ae}=t1(H,q,T,r,N);for(const ye of["x","y"])b[ye][we[ye]]||(ae[ye]=0,we[ye]=0);if(ae.x>0||ae.y>0){S(),L.current=H,E(F,h),j.current=ae,A.current=we;return}}j.current={x:0,y:0},A.current={x:0,y:0},S()},[r,F,l,S,d,h,JSON.stringify(T),JSON.stringify(b),E,v,M,x,JSON.stringify(N)])}const m1={x:{[on.Backward]:!1,[on.Forward]:!1},y:{[on.Backward]:!1,[on.Forward]:!1}};function g1(n){let{delta:r,disabled:s}=n;const l=Fd(r);return Ca(c=>{if(s||!l||!c)return m1;const d={x:Math.sign(r.x-l.x),y:Math.sign(r.y-l.y)};return{x:{[on.Backward]:c.x[on.Backward]||d.x===-1,[on.Forward]:c.x[on.Forward]||d.x===1},y:{[on.Backward]:c.y[on.Backward]||d.y===-1,[on.Forward]:c.y[on.Forward]||d.y===1}}},[s,r,l])}function v1(n,r){const s=r!=null?n.get(r):void 0,l=s?s.node.current:null;return Ca(c=>{var d;return r==null?null:(d=l??c)!=null?d:null},[l,r])}function y1(n,r){return f.useMemo(()=>n.reduce((s,l)=>{const{sensor:c}=l,d=c.activators.map(h=>({eventName:h.eventName,handler:r(h.handler,l)}));return[...s,...d]},[]),[n,r])}var pa;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(pa||(pa={}));var Ud;(function(n){n.Optimized="optimized"})(Ud||(Ud={}));const Mm=new Map;function x1(n,r){let{dragging:s,dependencies:l,config:c}=r;const[d,h]=f.useState(null),{frequency:m,measure:g,strategy:v}=c,x=f.useRef(n),y=j(),N=fa(y),b=f.useCallback(function(A){A===void 0&&(A=[]),!N.current&&h(T=>T===null?A:T.concat(A.filter(L=>!T.includes(L))))},[N]),E=f.useRef(null),S=Ca(A=>{if(y&&!s)return Mm;if(!A||A===Mm||x.current!==n||d!=null){const T=new Map;for(let L of n){if(!L)continue;if(d&&d.length>0&&!d.includes(L.id)&&L.rect.current){T.set(L.id,L.rect.current);continue}const F=L.node.current,M=F?new Pf(g(F),F):null;L.rect.current=M,M&&T.set(L.id,M)}return T}return A},[n,d,s,y,g]);return f.useEffect(()=>{x.current=n},[n]),f.useEffect(()=>{y||b()},[s,y]),f.useEffect(()=>{d&&d.length>0&&h(null)},[JSON.stringify(d)]),f.useEffect(()=>{y||typeof m!="number"||E.current!==null||(E.current=setTimeout(()=>{b(),E.current=null},m))},[m,y,b,...l]),{droppableRects:S,measureDroppableContainers:b,measuringScheduled:d!=null};function j(){switch(v){case pa.Always:return!1;case pa.BeforeDragging:return s;default:return!s}}}function ty(n,r){return Ca(s=>n?s||(typeof r=="function"?r(n):n):null,[r,n])}function w1(n,r){return ty(n,r)}function C1(n){let{callback:r,disabled:s}=n;const l=Rf(r),c=f.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:d}=window;return new d(l)},[l,s]);return f.useEffect(()=>()=>c?.disconnect(),[c]),c}function bc(n){let{callback:r,disabled:s}=n;const l=Rf(r),c=f.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:d}=window;return new d(l)},[s]);return f.useEffect(()=>()=>c?.disconnect(),[c]),c}function b1(n){return new Pf(mi(n),n)}function Im(n,r,s){r===void 0&&(r=b1);const[l,c]=f.useState(null);function d(){c(g=>{if(!n)return null;if(n.isConnected===!1){var v;return(v=g??s)!=null?v:null}const x=r(n);return JSON.stringify(g)===JSON.stringify(x)?g:x})}const h=C1({callback(g){if(n)for(const v of g){const{type:x,target:y}=v;if(x==="childList"&&y instanceof HTMLElement&&y.contains(n)){d();break}}}}),m=bc({callback:d});return Tr(()=>{d(),n?(m?.observe(n),h?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),h?.disconnect())},[n]),l}function S1(n){const r=ty(n);return Yv(n,r)}const Lm=[];function N1(n){const r=f.useRef(n),s=Ca(l=>n?l&&l!==Lm&&n&&r.current&&n.parentNode===r.current.parentNode?l:Cc(n):Lm,[n]);return f.useEffect(()=>{r.current=n},[n]),s}function E1(n){const[r,s]=f.useState(null),l=f.useRef(n),c=f.useCallback(d=>{const h=wd(d.target);h&&s(m=>m?(m.set(h,zd(h)),new Map(m)):null)},[]);return f.useEffect(()=>{const d=l.current;if(n!==d){h(d);const m=n.map(g=>{const v=wd(g);return v?(v.addEventListener("scroll",c,{passive:!0}),[v,zd(v)]):null}).filter(g=>g!=null);s(m.length?new Map(m):null),l.current=n}return()=>{h(n),h(d)};function h(m){m.forEach(g=>{const v=wd(g);v?.removeEventListener("scroll",c)})}},[c,n]),f.useMemo(()=>n.length?r?Array.from(r.values()).reduce((d,h)=>oi(d,h),dr):Zv(n):dr,[n,r])}function Fm(n,r){r===void 0&&(r=[]);const s=f.useRef(null);return f.useEffect(()=>{s.current=null},r),f.useEffect(()=>{const l=n!==dr;l&&!s.current&&(s.current=n),!l&&s.current&&(s.current=null)},[n]),s.current?ha(n,s.current):dr}function j1(n){f.useEffect(()=>{if(!wc)return;const r=n.map(s=>{let{sensor:l}=s;return l.setup==null?void 0:l.setup()});return()=>{for(const s of r)s?.()}},n.map(r=>{let{sensor:s}=r;return s}))}function k1(n,r){return f.useMemo(()=>n.reduce((s,l)=>{let{eventName:c,handler:d}=l;return s[c]=h=>{d(h,r)},s},{}),[n,r])}function ny(n){return f.useMemo(()=>n?JS(n):null,[n])}const $m=[];function T1(n,r){r===void 0&&(r=mi);const[s]=n,l=ny(s?Pn(s):null),[c,d]=f.useState($m);function h(){d(()=>n.length?n.map(g=>Jv(g)?l:new Pf(r(g),g)):$m)}const m=bc({callback:h});return Tr(()=>{m?.disconnect(),h(),n.forEach(g=>m?.observe(g))},[n]),c}function R1(n){if(!n)return null;if(n.children.length>1)return n;const r=n.children[0];return wa(r)?r:n}function A1(n){let{measure:r}=n;const[s,l]=f.useState(null),c=f.useCallback(v=>{for(const{target:x}of v)if(wa(x)){l(y=>{const N=r(x);return y?{...y,width:N.width,height:N.height}:N});break}},[r]),d=bc({callback:c}),h=f.useCallback(v=>{const x=R1(v);d?.disconnect(),x&&d?.observe(x),l(x?r(x):null)},[r,d]),[m,g]=Zl(h);return f.useMemo(()=>({nodeRef:m,rect:s,setRef:g}),[s,m,g])}const D1=[{sensor:Na,options:{}},{sensor:Sa,options:{}}],P1={current:{}},Hl={draggable:{measure:Dm},droppable:{measure:Dm,strategy:pa.WhileDragging,frequency:Ud.Optimized},dragOverlay:{measure:mi}};class la extends Map{get(r){var s;return r!=null&&(s=super.get(r))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(r=>{let{disabled:s}=r;return!s})}getNodeFor(r){var s,l;return(s=(l=this.get(r))==null?void 0:l.node.current)!=null?s:void 0}}const O1={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new la,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ec},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Hl,measureDroppableContainers:ec,windowRect:null,measuringScheduled:!1},_1={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ec,draggableNodes:new Map,over:null,measureDroppableContainers:ec},Sc=f.createContext(_1),ry=f.createContext(O1);function M1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new la}}}function I1(n,r){switch(r.type){case Zt.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:r.initialCoordinates,active:r.active}};case Zt.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:r.coordinates.x-n.draggable.initialCoordinates.x,y:r.coordinates.y-n.draggable.initialCoordinates.y}}};case Zt.DragEnd:case Zt.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Zt.RegisterDroppable:{const{element:s}=r,{id:l}=s,c=new la(n.droppable.containers);return c.set(l,s),{...n,droppable:{...n.droppable,containers:c}}}case Zt.SetDroppableDisabled:{const{id:s,key:l,disabled:c}=r,d=n.droppable.containers.get(s);if(!d||l!==d.key)return n;const h=new la(n.droppable.containers);return h.set(s,{...d,disabled:c}),{...n,droppable:{...n.droppable,containers:h}}}case Zt.UnregisterDroppable:{const{id:s,key:l}=r,c=n.droppable.containers.get(s);if(!c||l!==c.key)return n;const d=new la(n.droppable.containers);return d.delete(s),{...n,droppable:{...n.droppable,containers:d}}}default:return n}}function L1(n){let{disabled:r}=n;const{active:s,activatorEvent:l,draggableNodes:c}=f.useContext(Sc),d=Fd(l),h=Fd(s?.id);return f.useEffect(()=>{if(!r&&!l&&d&&h!=null){if(!Af(d)||document.activeElement===d.target)return;const m=c.get(h);if(!m)return;const{activatorNode:g,node:v}=m;if(!g.current&&!v.current)return;requestAnimationFrame(()=>{for(const x of[g.current,v.current]){if(!x)continue;const y=DS(x);if(y){y.focus();break}}})}},[l,r,c,h,d]),null}function F1(n,r){let{transform:s,...l}=r;return n!=null&&n.length?n.reduce((c,d)=>d({transform:c,...l}),s):s}function $1(n){return f.useMemo(()=>({draggable:{...Hl.draggable,...n?.draggable},droppable:{...Hl.droppable,...n?.droppable},dragOverlay:{...Hl.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function z1(n){let{activeNode:r,measure:s,initialRect:l,config:c=!0}=n;const d=f.useRef(!1),{x:h,y:m}=typeof c=="boolean"?{x:c,y:c}:c;Tr(()=>{if(!h&&!m||!r){d.current=!1;return}if(d.current||!l)return;const v=r?.node.current;if(!v||v.isConnected===!1)return;const x=s(v),y=Yv(x,l);if(h||(y.x=0),m||(y.y=0),d.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const N=Kv(v);N&&N.scrollBy({top:y.y,left:y.x})}},[r,h,m,l,s])}const oy=f.createContext({...dr,scaleX:1,scaleY:1});var So;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(So||(So={}));const rc=f.memo(function(r){var s,l,c,d;let{id:h,accessibility:m,autoScroll:g=!0,children:v,sensors:x=D1,collisionDetection:y=WS,measuring:N,modifiers:b,...E}=r;const S=f.useReducer(I1,void 0,M1),[j,A]=S,[T,L]=LS(),[F,M]=f.useState(So.Uninitialized),H=F===So.Initialized,{draggable:{active:z,nodes:q,translate:we},droppable:{containers:ae}}=j,ye=z!=null?q.get(z):null,xe=f.useRef({initial:null,translated:null}),oe=f.useMemo(()=>{var yt;return z!=null?{id:z,data:(yt=ye?.data)!=null?yt:P1,rect:xe}:null},[z,ye]),be=f.useRef(null),[Te,je]=f.useState(null),[me,Q]=f.useState(null),ce=fa(E,Object.values(E)),ue=ba("DndDescribedBy",h),D=f.useMemo(()=>ae.getEnabled(),[ae]),J=$1(N),{droppableRects:Se,measureDroppableContainers:Me,measuringScheduled:Pe}=x1(D,{dragging:H,dependencies:[we.x,we.y],config:J.droppable}),Le=v1(q,z),se=f.useMemo(()=>me?$d(me):null,[me]),Re=Et(),K=w1(Le,J.draggable.measure);z1({activeNode:z!=null?q.get(z):null,config:Re.layoutShiftCompensation,initialRect:K,measure:J.draggable.measure});const ee=Im(Le,J.draggable.measure,K),Ke=Im(Le?Le.parentElement:null),Qe=f.useRef({activatorEvent:null,active:null,activeNode:Le,collisionRect:null,collisions:null,droppableRects:Se,draggableNodes:q,draggingNode:null,draggingNodeRect:null,droppableContainers:ae,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Be=ae.getNodeFor((s=Qe.current.over)==null?void 0:s.id),it=A1({measure:J.dragOverlay.measure}),ut=(l=it.nodeRef.current)!=null?l:Le,Z=H?(c=it.rect)!=null?c:ee:null,Ie=!!(it.nodeRef.current&&it.rect),Je=S1(Ie?null:ee),ge=ny(ut?Pn(ut):null),ke=N1(H?Be??Le:null),He=T1(ke),tt=F1(b,{transform:{x:we.x-Je.x,y:we.y-Je.y,scaleX:1,scaleY:1},activatorEvent:me,active:oe,activeNodeRect:ee,containerNodeRect:Ke,draggingNodeRect:Z,over:Qe.current.over,overlayNodeRect:it.rect,scrollableAncestors:ke,scrollableAncestorRects:He,windowRect:ge}),xt=se?oi(se,we):null,Ue=E1(ke),ot=Fm(Ue),Vt=Fm(Ue,[ee]),Nt=oi(tt,ot),wt=Z?YS(Z,tt):null,$t=oe&&wt?y({active:oe,collisionRect:wt,droppableRects:Se,droppableContainers:D,pointerCoordinates:xt}):null,It=Gv($t,"id"),[Wt,Cn]=f.useState(null),hr=Ie?tt:oi(tt,Vt),bn=HS(hr,(d=Wt?.rect)!=null?d:null,ee),zn=f.useRef(null),en=f.useCallback((yt,zt)=>{let{sensor:Ot,options:Ne}=zt;if(be.current==null)return;const $=q.get(be.current);if(!$)return;const te=yt.nativeEvent,ie=new Ot({active:be.current,activeNode:$,event:te,options:Ne,context:Qe,onAbort(he){if(!q.get(he))return;const{onDragAbort:de}=ce.current,Ae={id:he};de?.(Ae),T({type:"onDragAbort",event:Ae})},onPending(he,ze,de,Ae){if(!q.get(he))return;const{onDragPending:nt}=ce.current,et={id:he,constraint:ze,initialCoordinates:de,offset:Ae};nt?.(et),T({type:"onDragPending",event:et})},onStart(he){const ze=be.current;if(ze==null)return;const de=q.get(ze);if(!de)return;const{onDragStart:Ae}=ce.current,Oe={activatorEvent:te,active:{id:ze,data:de.data,rect:xe}};Er.unstable_batchedUpdates(()=>{Ae?.(Oe),M(So.Initializing),A({type:Zt.DragStart,initialCoordinates:he,active:ze}),T({type:"onDragStart",event:Oe}),je(zn.current),Q(te)})},onMove(he){A({type:Zt.DragMove,coordinates:he})},onEnd:Ee(Zt.DragEnd),onCancel:Ee(Zt.DragCancel)});zn.current=ie;function Ee(he){return async function(){const{active:de,collisions:Ae,over:Oe,scrollAdjustedTranslate:nt}=Qe.current;let et=null;if(de&&nt){const{cancelDrop:at}=ce.current;et={activatorEvent:te,active:de,collisions:Ae,delta:nt,over:Oe},he===Zt.DragEnd&&typeof at=="function"&&await Promise.resolve(at(et))&&(he=Zt.DragCancel)}be.current=null,Er.unstable_batchedUpdates(()=>{A({type:he}),M(So.Uninitialized),Cn(null),je(null),Q(null),zn.current=null;const at=he===Zt.DragEnd?"onDragEnd":"onDragCancel";if(et){const Ht=ce.current[at];Ht?.(et),T({type:at,event:et})}})}}},[q]),Sn=f.useCallback((yt,zt)=>(Ot,Ne)=>{const $=Ot.nativeEvent,te=q.get(Ne);if(be.current!==null||!te||$.dndKit||$.defaultPrevented)return;const ie={active:te};yt(Ot,zt.options,ie)===!0&&($.dndKit={capturedBy:zt.sensor},be.current=Ne,en(Ot,zt))},[q,en]),sn=y1(x,Sn);j1(x),Tr(()=>{ee&&F===So.Initializing&&M(So.Initialized)},[ee,F]),f.useEffect(()=>{const{onDragMove:yt}=ce.current,{active:zt,activatorEvent:Ot,collisions:Ne,over:$}=Qe.current;if(!zt||!Ot)return;const te={active:zt,activatorEvent:Ot,collisions:Ne,delta:{x:Nt.x,y:Nt.y},over:$};Er.unstable_batchedUpdates(()=>{yt?.(te),T({type:"onDragMove",event:te})})},[Nt.x,Nt.y]),f.useEffect(()=>{const{active:yt,activatorEvent:zt,collisions:Ot,droppableContainers:Ne,scrollAdjustedTranslate:$}=Qe.current;if(!yt||be.current==null||!zt||!$)return;const{onDragOver:te}=ce.current,ie=Ne.get(It),Ee=ie&&ie.rect.current?{id:ie.id,rect:ie.rect.current,data:ie.data,disabled:ie.disabled}:null,he={active:yt,activatorEvent:zt,collisions:Ot,delta:{x:$.x,y:$.y},over:Ee};Er.unstable_batchedUpdates(()=>{Cn(Ee),te?.(he),T({type:"onDragOver",event:he})})},[It]),Tr(()=>{Qe.current={activatorEvent:me,active:oe,activeNode:Le,collisionRect:wt,collisions:$t,droppableRects:Se,draggableNodes:q,draggingNode:ut,draggingNodeRect:Z,droppableContainers:ae,over:Wt,scrollableAncestors:ke,scrollAdjustedTranslate:Nt},xe.current={initial:Z,translated:wt}},[oe,Le,$t,wt,q,ut,Z,Se,ae,Wt,ke,Nt]),p1({...Re,delta:we,draggingRect:wt,pointerCoordinates:xt,scrollableAncestors:ke,scrollableAncestorRects:He});const an=f.useMemo(()=>({active:oe,activeNode:Le,activeNodeRect:ee,activatorEvent:me,collisions:$t,containerNodeRect:Ke,dragOverlay:it,draggableNodes:q,droppableContainers:ae,droppableRects:Se,over:Wt,measureDroppableContainers:Me,scrollableAncestors:ke,scrollableAncestorRects:He,measuringConfiguration:J,measuringScheduled:Pe,windowRect:ge}),[oe,Le,ee,me,$t,Ke,it,q,ae,Se,Wt,Me,ke,He,J,Pe,ge]),Qn=f.useMemo(()=>({activatorEvent:me,activators:sn,active:oe,activeNodeRect:ee,ariaDescribedById:{draggable:ue},dispatch:A,draggableNodes:q,over:Wt,measureDroppableContainers:Me}),[me,sn,oe,ee,A,ue,q,Wt,Me]);return Ct.createElement(Vv.Provider,{value:L},Ct.createElement(Sc.Provider,{value:Qn},Ct.createElement(ry.Provider,{value:an},Ct.createElement(oy.Provider,{value:bn},v)),Ct.createElement(L1,{disabled:m?.restoreFocus===!1})),Ct.createElement(zS,{...m,hiddenTextDescribedById:ue}));function Et(){const yt=Te?.autoScrollEnabled===!1,zt=typeof g=="object"?g.enabled===!1:g===!1,Ot=H&&!yt&&!zt;return typeof g=="object"?{...g,enabled:Ot}:{enabled:Ot}}}),B1=f.createContext(null),zm="button",U1="Draggable";function V1(n){let{id:r,data:s,disabled:l=!1,attributes:c}=n;const d=ba(U1),{activators:h,activatorEvent:m,active:g,activeNodeRect:v,ariaDescribedById:x,draggableNodes:y,over:N}=f.useContext(Sc),{role:b=zm,roleDescription:E="draggable",tabIndex:S=0}=c??{},j=g?.id===r,A=f.useContext(j?oy:B1),[T,L]=Zl(),[F,M]=Zl(),H=k1(h,r),z=fa(s);Tr(()=>(y.set(r,{id:r,key:d,node:T,activatorNode:F,data:z}),()=>{const we=y.get(r);we&&we.key===d&&y.delete(r)}),[y,r]);const q=f.useMemo(()=>({role:b,tabIndex:S,"aria-disabled":l,"aria-pressed":j&&b===zm?!0:void 0,"aria-roledescription":E,"aria-describedby":x.draggable}),[l,b,S,j,E,x.draggable]);return{active:g,activatorEvent:m,activeNodeRect:v,attributes:q,isDragging:j,listeners:l?void 0:H,node:T,over:N,setNodeRef:L,setActivatorNodeRef:M,transform:A}}function W1(){return f.useContext(ry)}const H1="Droppable",G1={timeout:25};function Y1(n){let{data:r,disabled:s=!1,id:l,resizeObserverConfig:c}=n;const d=ba(H1),{active:h,dispatch:m,over:g,measureDroppableContainers:v}=f.useContext(Sc),x=f.useRef({disabled:s}),y=f.useRef(!1),N=f.useRef(null),b=f.useRef(null),{disabled:E,updateMeasurementsFor:S,timeout:j}={...G1,...c},A=fa(S??l),T=f.useCallback(()=>{if(!y.current){y.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{v(Array.isArray(A.current)?A.current:[A.current]),b.current=null},j)},[j]),L=bc({callback:T,disabled:E||!h}),F=f.useCallback((q,we)=>{L&&(we&&(L.unobserve(we),y.current=!1),q&&L.observe(q))},[L]),[M,H]=Zl(F),z=fa(r);return f.useEffect(()=>{!L||!M.current||(L.disconnect(),y.current=!1,L.observe(M.current))},[M,L]),f.useEffect(()=>(m({type:Zt.RegisterDroppable,element:{id:l,key:d,disabled:s,node:M,rect:N,data:z}}),()=>m({type:Zt.UnregisterDroppable,key:d,id:l})),[l]),f.useEffect(()=>{s!==x.current.disabled&&(m({type:Zt.SetDroppableDisabled,id:l,key:d,disabled:s}),x.current.disabled=s)},[l,d,s,m]),{active:h,rect:N,isOver:g?.id===l,node:M,over:g,setNodeRef:H}}function ci(n,r,s){const l=n.slice();return l.splice(s<0?l.length+s:s,0,l.splice(r,1)[0]),l}function K1(n,r){return n.reduce((s,l,c)=>{const d=r.get(l);return d&&(s[c]=d),s},Array(n.length))}function $l(n){return n!==null&&n>=0}function Q1(n,r){if(n===r)return!0;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s]!==r[s])return!1;return!0}function X1(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const sy=n=>{let{rects:r,activeIndex:s,overIndex:l,index:c}=n;const d=ci(r,l,s),h=r[c],m=d[c];return!m||!h?null:{x:m.left-h.left,y:m.top-h.top,scaleX:m.width/h.width,scaleY:m.height/h.height}},zl={scaleX:1,scaleY:1},oc=n=>{var r;let{activeIndex:s,activeNodeRect:l,index:c,rects:d,overIndex:h}=n;const m=(r=d[s])!=null?r:l;if(!m)return null;if(c===s){const v=d[h];return v?{x:0,y:s<h?v.top+v.height-(m.top+m.height):v.top-m.top,...zl}:null}const g=J1(d,c,s);return c>s&&c<=h?{x:0,y:-m.height-g,...zl}:c<s&&c>=h?{x:0,y:m.height+g,...zl}:{x:0,y:0,...zl}};function J1(n,r,s){const l=n[r],c=n[r-1],d=n[r+1];return l?s<r?c?l.top-(c.top+c.height):d?d.top-(l.top+l.height):0:d?d.top-(l.top+l.height):c?l.top-(c.top+c.height):0:0}const iy="Sortable",ay=Ct.createContext({activeIndex:-1,containerId:iy,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:sy,disabled:{draggable:!1,droppable:!1}});function sc(n){let{children:r,id:s,items:l,strategy:c=sy,disabled:d=!1}=n;const{active:h,dragOverlay:m,droppableRects:g,over:v,measureDroppableContainers:x}=W1(),y=ba(iy,s),N=m.rect!==null,b=f.useMemo(()=>l.map(H=>typeof H=="object"&&"id"in H?H.id:H),[l]),E=h!=null,S=h?b.indexOf(h.id):-1,j=v?b.indexOf(v.id):-1,A=f.useRef(b),T=!Q1(b,A.current),L=j!==-1&&S===-1||T,F=X1(d);Tr(()=>{T&&E&&x(b)},[T,b,E,x]),f.useEffect(()=>{A.current=b},[b]);const M=f.useMemo(()=>({activeIndex:S,containerId:y,disabled:F,disableTransforms:L,items:b,overIndex:j,useDragOverlay:N,sortedRects:K1(b,g),strategy:c}),[S,y,F.draggable,F.droppable,L,b,j,g,N,c]);return Ct.createElement(ay.Provider,{value:M},r)}const q1=n=>{let{id:r,items:s,activeIndex:l,overIndex:c}=n;return ci(s,l,c).indexOf(r)},Z1=n=>{let{containerId:r,isSorting:s,wasDragging:l,index:c,items:d,newIndex:h,previousItems:m,previousContainerId:g,transition:v}=n;return!v||!l||m!==d&&c===h?!1:s?!0:h!==c&&r===g},eN={duration:200,easing:"ease"},ly="transform",tN=Ao.Transition.toString({property:ly,duration:0,easing:"linear"}),nN={roleDescription:"sortable"};function rN(n){let{disabled:r,index:s,node:l,rect:c}=n;const[d,h]=f.useState(null),m=f.useRef(s);return Tr(()=>{if(!r&&s!==m.current&&l.current){const g=c.current;if(g){const v=mi(l.current,{ignoreTransform:!0}),x={x:g.left-v.left,y:g.top-v.top,scaleX:g.width/v.width,scaleY:g.height/v.height};(x.x||x.y)&&h(x)}}s!==m.current&&(m.current=s)},[r,s,l,c]),f.useEffect(()=>{d&&h(null)},[d]),d}function Nc(n){let{animateLayoutChanges:r=Z1,attributes:s,disabled:l,data:c,getNewIndex:d=q1,id:h,strategy:m,resizeObserverConfig:g,transition:v=eN}=n;const{items:x,containerId:y,activeIndex:N,disabled:b,disableTransforms:E,sortedRects:S,overIndex:j,useDragOverlay:A,strategy:T}=f.useContext(ay),L=oN(l,b),F=x.indexOf(h),M=f.useMemo(()=>({sortable:{containerId:y,index:F,items:x},...c}),[y,c,F,x]),H=f.useMemo(()=>x.slice(x.indexOf(h)),[x,h]),{rect:z,node:q,isOver:we,setNodeRef:ae}=Y1({id:h,data:M,disabled:L.droppable,resizeObserverConfig:{updateMeasurementsFor:H,...g}}),{active:ye,activatorEvent:xe,activeNodeRect:oe,attributes:be,setNodeRef:Te,listeners:je,isDragging:me,over:Q,setActivatorNodeRef:ce,transform:ue}=V1({id:h,data:M,attributes:{...nN,...s},disabled:L.draggable}),D=kS(ae,Te),J=!!ye,Se=J&&!E&&$l(N)&&$l(j),Me=!A&&me,Pe=Me&&Se?ue:null,se=Se?Pe??(m??T)({rects:S,activeNodeRect:oe,activeIndex:N,overIndex:j,index:F}):null,Re=$l(N)&&$l(j)?d({id:h,items:x,activeIndex:N,overIndex:j}):F,K=ye?.id,ee=f.useRef({activeId:K,items:x,newIndex:Re,containerId:y}),Ke=x!==ee.current.items,Qe=r({active:ye,containerId:y,isDragging:me,isSorting:J,id:h,index:F,items:x,newIndex:ee.current.newIndex,previousItems:ee.current.items,previousContainerId:ee.current.containerId,transition:v,wasDragging:ee.current.activeId!=null}),Be=rN({disabled:!Qe,index:F,node:q,rect:z});return f.useEffect(()=>{J&&ee.current.newIndex!==Re&&(ee.current.newIndex=Re),y!==ee.current.containerId&&(ee.current.containerId=y),x!==ee.current.items&&(ee.current.items=x)},[J,Re,y,x]),f.useEffect(()=>{if(K===ee.current.activeId)return;if(K&&!ee.current.activeId){ee.current.activeId=K;return}const ut=setTimeout(()=>{ee.current.activeId=K},50);return()=>clearTimeout(ut)},[K]),{active:ye,activeIndex:N,attributes:be,data:M,rect:z,index:F,newIndex:Re,items:x,isOver:we,isSorting:J,isDragging:me,listeners:je,node:q,overIndex:j,over:Q,setNodeRef:D,setActivatorNodeRef:ce,setDroppableNodeRef:ae,setDraggableNodeRef:Te,transform:Be??se,transition:it()};function it(){if(Be||Ke&&ee.current.newIndex===F)return tN;if(!(Me&&!Af(xe)||!v)&&(J||Qe))return Ao.Transition.toString({...v,property:ly})}}function oN(n,r){var s,l;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(s=n?.draggable)!=null?s:r.draggable,droppable:(l=n?.droppable)!=null?l:r.droppable}}function ic(n){if(!n)return!1;const r=n.data.current;return!!(r&&"sortable"in r&&typeof r.sortable=="object"&&"containerId"in r.sortable&&"items"in r.sortable&&"index"in r.sortable)}const sN=[dt.Down,dt.Right,dt.Up,dt.Left],_f=(n,r)=>{let{context:{active:s,collisionRect:l,droppableRects:c,droppableContainers:d,over:h,scrollableAncestors:m}}=r;if(sN.includes(n.code)){if(n.preventDefault(),!s||!l)return;const g=[];d.getEnabled().forEach(y=>{if(!y||y!=null&&y.disabled)return;const N=c.get(y.id);if(N)switch(n.code){case dt.Down:l.top<N.top&&g.push(y);break;case dt.Up:l.top>N.top&&g.push(y);break;case dt.Left:l.left>N.left&&g.push(y);break;case dt.Right:l.left<N.left&&g.push(y);break}});const v=US({collisionRect:l,droppableRects:c,droppableContainers:g});let x=Gv(v,"id");if(x===h?.id&&v.length>1&&(x=v[1].id),x!=null){const y=d.get(s.id),N=d.get(x),b=N?c.get(N.id):null,E=N?.node.current;if(E&&b&&y&&N){const j=Cc(E).some((H,z)=>m[z]!==H),A=cy(y,N),T=iN(y,N),L=j||!A?{x:0,y:0}:{x:T?l.width-b.width:0,y:T?l.height-b.height:0},F={x:b.left,y:b.top};return L.x&&L.y?F:ha(F,L)}}}};function cy(n,r){return!ic(n)||!ic(r)?!1:n.data.current.sortable.containerId===r.data.current.sortable.containerId}function iN(n,r){return!ic(n)||!ic(r)||!cy(n,r)?!1:n.data.current.sortable.index<r.data.current.sortable.index}const aN=Ct.memo(({item:n,onEdit:r,onDelete:s,onOpenChordCharts:l})=>{const{attributes:c,listeners:d,setNodeRef:h,transform:m,transition:g,isDragging:v}=Nc({id:n.B}),x={transform:Ao.Transform.toString(m),transition:g,zIndex:v?1:0},y=async N=>{N.preventDefault(),N.stopPropagation(),await s(n.B)};return i.jsxs("div",{ref:h,style:x,className:`flex items-center justify-between p-5 rounded-lg ${v?"bg-gray-700":"bg-gray-800"}`,children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{...c,...d,children:i.jsx(lc,{className:"h-6 w-6 text-gray-500 mr-4 cursor-move"})}),i.jsx("span",{className:"text-xl",children:n.C})]}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx(De,{variant:"ghost",size:"lg",onClick:()=>r(n),className:"hover:bg-gray-700",children:i.jsx(qd,{className:"h-5 w-5"})}),i.jsx(De,{variant:"ghost",size:"lg",onClick:()=>l(n.B,n.C),className:"text-blue-400 hover:text-blue-300 hover:bg-gray-700",title:"View chord charts",children:i.jsx(cc,{className:"h-5 w-5"})}),i.jsx(De,{variant:"ghost",size:"lg",onClick:y,className:"text-red-500 hover:text-red-400 hover:bg-gray-700",children:i.jsx(S0,{className:"h-5 w-5"})})]})]})}),lN=({items:n=[],onItemsChange:r})=>{const[s,l]=f.useState(""),[c,d]=f.useState(!1),[h,m]=f.useState(!1),[g,v]=f.useState(!1),[x,y]=f.useState(null),[N,b]=f.useState(null),[E,S]=f.useState(!1),[j,A]=f.useState(null),[T,L]=f.useState(""),F=async oe=>{h||b(oe)},M=async()=>{if(N){d(!0);try{if(!(await fetch(`/api/items/${N}`,{method:"DELETE"})).ok)throw new Error("Failed to delete item");const be=n.find(Te=>Te.B===N);if(be){const Te=be.C||`Item ${N}`;ca("deleted","item",Te)}r()}catch(oe){console.error("Delete failed:",oe)}finally{d(!1),b(null)}}},H=oe=>{y(oe),v(!0)},z=(oe,be)=>{A(oe),L(be),S(!0)},q=async()=>{r(),y(null),v(!1)},we=()=>{m(!0)},ae=async({active:oe,over:be})=>{if(m(!1),c||!oe||!be||oe.id===be.id)return;const Te=n.findIndex(me=>me.B===oe.id),je=n.findIndex(me=>me.B===be.id);try{const Q=ci(n,Te,je).map((ue,D)=>({A:ue.B,G:D}));if(!(await fetch("/api/items/order",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)})).ok)throw new Error("Failed to update items");r()}catch(me){console.error("Reorder failed:",me)}},ye=Df(li(Na,{activationConstraint:{delay:100,tolerance:5}}),li(Sa,{coordinateGetter:_f})),xe=n.filter(oe=>{if(!s)return!0;const be=oe?.C||"",Te=Q=>Q.replace(/[''`]/g,"'"),je=Te(be.toLowerCase()),me=Te(s.toLowerCase());return je.includes(me)});return i.jsxs(i.Fragment,{children:[i.jsxs(ss,{className:"w-full max-w-4xl bg-gray-900 text-gray-100",children:[i.jsxs(si,{className:"flex flex-row items-center justify-between",children:[i.jsx(Yr,{className:"text-2xl",children:"Practice Items"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(De,{className:"bg-blue-600 hover:bg-blue-700 text-lg px-4 py-6",onClick:()=>{y(null),v(!0)},children:[i.jsx(ga,{className:"mr-2 h-5 w-5"}),"Add Item"]}),i.jsx(lS,{onComplete:r})]})]}),i.jsxs(is,{children:[i.jsx("div",{className:"mb-6",children:i.jsx(xn,{type:"text",placeholder:"Search items...",value:s,onChange:oe=>l(oe.target.value),className:"w-full text-lg py-6 px-4",autocomplete:"off"})}),i.jsx(rc,{sensors:ye,collisionDetection:tc,onDragStart:we,onDragEnd:ae,children:i.jsx(sc,{items:xe.map(oe=>oe.B),strategy:oc,children:i.jsx("div",{className:"space-y-4",children:xe.map(oe=>i.jsx(aN,{item:oe,onEdit:H,onDelete:F,onOpenChordCharts:z},oe.B))})})})]})]}),g&&i.jsx(aS,{open:g,onOpenChange:oe=>{oe||(y(null),v(!1))},item:x,onItemChange:q}),i.jsx(Eo,{open:!!N,onOpenChange:()=>b(null),children:i.jsxs(Ur,{children:[i.jsxs(Vr,{children:[i.jsx(Hr,{children:"Are you sure?"}),i.jsx(Gr,{children:"This action cannot be undone. This will permanently delete the practice item and remove it from all routines."})]}),i.jsxs(Wr,{children:[i.jsx(jo,{children:"Cancel"}),i.jsx(Nr,{onClick:M,children:"Delete"})]})]})}),i.jsx(zv,{isOpen:E,onClose:()=>S(!1),itemId:j,itemTitle:T})]})},cN=()=>{const[n,r]=f.useState(null),[s,l]=f.useState(!0),[c,d]=f.useState(null),[h,m]=f.useState(0),g=async()=>{try{const x=await fetch("/api/practice/active-routine/lightweight");if(!x.ok)throw new Error("Failed to fetch active routine");const y=await x.json();if(!y.active_id){r(null),d(null),l(!1);return}const N=y.items.sort((b,E)=>parseInt(b.routineEntry.C)-parseInt(E.routineEntry.C));r({id:y.active_id,name:y.name,items:N.map(b=>({...b.routineEntry,minimalDetails:b.itemMinimal}))}),d(null)}catch(x){d(x.message),console.error("Fetch error:",x)}finally{l(!1)}},v=async()=>{m(x=>x+1)};return f.useEffect(()=>{g()},[h]),{routine:n,loading:s,error:c,refreshRoutine:v}},uN=()=>{const[n,r]=f.useState({}),[s,l]=f.useState(new Set),[c,d]=f.useState(null),h=f.useCallback(async x=>{if(n[x])return n[x];if(s.has(x))return null;try{l(b=>new Set([...b,x])),d(null);const y=await fetch(`/api/items/${x}`);if(!y.ok)throw new Error(`Failed to fetch item details: ${y.statusText}`);const N=await y.json();return r(b=>({...b,[x]:N})),N}catch(y){return d(y.message),console.error("Error fetching item details:",y),null}finally{l(y=>{const N=new Set(y);return N.delete(x),N})}},[n,s]),m=f.useCallback(x=>n[x]||null,[n]),g=f.useCallback(x=>s.has(x),[s]),v=f.useCallback(()=>{r({}),l(new Set),d(null)},[]);return{fetchItemDetails:h,getItemDetails:m,isLoadingItem:g,error:c,clearCache:v}},dN=()=>{const[n,r]=f.useState([]),[s,l]=f.useState(!0),[c,d]=f.useState(null),[h,m]=f.useState(0),g=async()=>{try{const E=await fetch("/api/items");if(!E.ok)throw new Error("Failed to fetch items");const S=await E.json();r(S),d(null)}catch(E){d(E.message),console.error("Fetch error:",E)}finally{l(!1)}},v=async()=>{m(E=>E+1)},x=async E=>{try{if(!(await fetch(`/api/items/${E}`,{method:"DELETE"})).ok)throw new Error("Failed to delete item");r(j=>j.filter(A=>A.A!==E)),await v()}catch(S){throw d(S.message),console.error("Delete error:",S),S}},y=async E=>{try{const S=await fetch("/api/items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});if(!S.ok)throw new Error("Failed to add item");const j=await S.json();return r([...n,j]),j}catch(S){throw d(S.message),S}},N=async(E,S)=>{try{const j=await fetch(`/api/items/${E}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!j.ok)throw new Error("Failed to update item");const A=await j.json();return r(n.map(T=>T.A===E?A:T)),A}catch(j){throw d(j.message),j}},b=async E=>{try{const S=await fetch("/api/items/order",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});if(!S.ok)throw new Error("Failed to update items");const j=await S.json();return r(j),await v(),j}catch(S){throw d(S.message),console.error("Update error:",S),S}};return f.useEffect(()=>{g()},[h]),{items:n,loading:s,error:c,addItem:y,updateItem:N,deleteItem:x,updateItems:b,refreshItems:v}},fN=({open:n,onOpenChange:r,itemId:s,currentNote:l="",onNoteSave:c})=>{const[d,h]=f.useState(""),[m,g]=f.useState(null);f.useEffect(()=>{n&&(h(l),g(null))},[n,l]);const v=async x=>{x.preventDefault();try{const y=await fetch(`/api/items/${s}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({notes:d})});if(!y.ok)throw new Error("Failed to save note");const N=await y.json();c?.(d),r(!1)}catch(y){g(y.message),console.error("Save error:",y)}};return i.jsx(Do,{open:n,onOpenChange:r,children:i.jsxs(Jr,{className:"max-w-2xl bg-gray-800",children:[i.jsxs(qr,{children:[i.jsx(Zr,{children:"Edit Note"}),i.jsx(eo,{children:"Add or edit your practice notes"}),m&&i.jsx("div",{className:"mt-2 text-sm text-red-500",children:m})]}),i.jsxs("form",{onSubmit:v,className:"space-y-6",children:[i.jsx(os,{value:d,onChange:x=>h(x.target.value),placeholder:"Enter your notes...",className:"h-48 bg-gray-900 text-white",autoComplete:"off"}),i.jsxs("div",{className:"flex justify-end space-x-4",children:[i.jsx(De,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),i.jsx(De,{type:"submit",variant:"outline",children:"Save Note"})]})]})]})})},hN=(n,r)=>{let s;return function(...c){const d=()=>{clearTimeout(s),n(...c)};clearTimeout(s),s=setTimeout(d,r)}},Bm=({className:n})=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:n,children:i.jsx("path",{d:"M8 5v14l11-7z"})}),Um=({className:n})=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:n,children:i.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}),Vm=({className:n})=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:n,children:i.jsx("path",{d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})}),Wm=n=>{const r=Math.floor(n/60),s=n%60;return`${r}:${s.toString().padStart(2,"0")}`},Hm=n=>{const r=Math.floor(n/60),s=n%60;return`${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},pN=f.memo(({chart:n,onEdit:r,onDelete:s,onInsertAfter:l})=>{const c=f.useRef(null);return f.useEffect(()=>{if(!c.current)return;(()=>{if(!(!window.svguitar||!c.current))try{const h=n.chordData||n;c.current.innerHTML="";const m=new window.svguitar.SVGuitarChord(c.current),g={strings:h.numStrings||6,frets:h.numFrets||5,position:h.startingFret||1,tuning:[],width:220,height:310,fretSize:1.2,fingerSize:.75,sidePadding:.2,fontFamily:"Arial",color:"#ffffff",backgroundColor:"transparent",strokeColor:"#ffffff",textColor:"#ffffff",fretLabelColor:"#ffffff",fingerTextColor:"#000000",fingerTextSize:28},y={fingers:[...(h.fingers||[]).map(N=>{const[b,E,S]=N;return S&&S!=="undefined"?[b,E,S]:[b,E]}),...(h.openStrings||[]).map(N=>[N,0]),...(h.mutedStrings||[]).map(N=>[N,"x"])],barres:h.barres||[]};m.configure(g).chord(y).draw(),setTimeout(()=>{const N=c.current?.querySelector("svg");N&&(N.style.width="100%",N.style.height="100%",N.style.maxWidth="180px",N.style.maxHeight="192px",N.style.position="relative",N.style.zIndex="1")},50)}catch(h){console.error("Error rendering memoized chord chart:",h)}})()},[n]),i.jsxs("div",{className:"bg-gray-800 p-1 rounded-lg relative","data-chord-id":n.id,style:{minWidth:"0",maxWidth:"100%",width:"100%",position:"relative"},children:[i.jsx("button",{onClick:d=>{d.stopPropagation(),r(n.id,n)},className:"absolute bottom-1 left-1 w-6 h-6 text-gray-400 hover:text-gray-200 flex items-center justify-center text-sm transition-colors cursor-pointer z-20 bg-gray-900 bg-opacity-75 rounded shadow-lg",title:"Edit chord chart",style:{position:"absolute",bottom:"4px",left:"4px",zIndex:20},children:""}),i.jsx("button",{onClick:d=>{d.stopPropagation(),s(n.id)},className:"absolute bottom-1 right-1 w-6 h-6 text-red-500 hover:text-red-700 flex items-center justify-center text-lg font-black transition-colors cursor-pointer z-20 bg-gray-900 bg-opacity-75 rounded shadow-lg",title:"Delete chord chart",style:{position:"absolute",bottom:"4px",right:"4px",zIndex:20},children:""}),l&&i.jsx("button",{onClick:d=>{d.stopPropagation(),l(n.id,n)},className:"absolute bottom-1 right-8 w-6 h-6 bg-blue-500 hover:bg-blue-400 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors cursor-pointer z-20 shadow-lg",title:"Insert chord after this one",style:{position:"absolute",bottom:"4px",right:"32px",zIndex:20},children:"+"}),i.jsx("div",{className:"relative w-full h-36 mx-auto flex items-center justify-center overflow-hidden",children:i.jsx("div",{ref:c,className:"w-full h-full"})}),i.jsx("div",{className:"text-sm font-semibold mt-2 text-center text-gray-300",children:n.title})]})}),Zs=n=>n.replace(/[''`"]/g,"'").replace(/[]/g,"-").replace(/\s+/g," ").trim().toLowerCase(),Gm=n=>n.replace(/\s*\([^)]*\)\s*/g,"").trim(),Sd=(n,r,s)=>{const l=Gm(n),c=Zs(l);return console.log("DEBUG: findSimilarSongs - sourceTitle:",n,"-> baseName:",l,"-> normalized:",c),r.filter(d=>{if(d.B===s)return!1;const h=d.C||"",m=Gm(h),g=Zs(m),v=c===g||c.length>3&&g.includes(c)||g.length>3&&c.includes(g);return(h.toLowerCase().includes("feelin")||h.toLowerCase().includes("alright"))&&(console.log("DEBUG: Checking item:",h,"-> itemBaseName:",m,"-> normalized:",g,"-> matches:",v),console.log("  normalizedBaseName:",c),console.log("  normalizedItemBaseName:",g)),v})},mN=()=>{const{routine:n}=cN(),{fetchItemDetails:r,getItemDetails:s,isLoadingItem:l}=uN();Xd();const{items:c}=dN(),[d,h]=f.useState(new Set),[m,g]=f.useState(new Set),[v,x]=f.useState(new Set),[y,N]=f.useState({}),[b,E]=f.useState(!1),[S,j]=f.useState(null),[A,T]=f.useState({}),[L,F]=f.useState(new Set),[M,H]=f.useState({}),[z,q]=f.useState({}),[we,ae]=f.useState({}),[ye,xe]=f.useState(new Set),[oe,be]=f.useState(null),[Te,je]=f.useState(null),[me,Q]=f.useState(null),[ce,ue]=f.useState(!1),[D,J]=f.useState(null),[Se,Me]=f.useState(""),[Pe,Le]=f.useState(new Set),[se,Re]=f.useState(new Set),[K,ee]=f.useState(!1),[Ke,Qe]=f.useState(!1),[Be,it]=f.useState(null),[ut,Z]=f.useState({}),[Ie,Je]=f.useState(null),[ge,ke]=f.useState(!1),[He,tt]=f.useState(""),[xt,Ue]=f.useState(null),[ot,Vt]=f.useState(null),[Nt,wt]=f.useState({}),[$t,It]=f.useState({}),[Wt,Cn]=f.useState({}),[hr,bn]=f.useState(0),[zn,en]=f.useState([]),[Sn,sn]=f.useState(!1),[an,Qn]=f.useState(null),[Et,yt]=f.useState({}),[zt,Ot]=f.useState(!1),[Ne,$]=f.useState(null),[te,ie]=f.useState(!1),[Ee,he]=f.useState(null),[ze,de]=f.useState(!1),[Ae,Oe]=f.useState(null),[nt,et]=f.useState(!1),[at,Ht]=f.useState(null),[no,mn]=f.useState({}),[On,vi]=f.useState({}),[fs,hs]=f.useState({}),[ps,ms]=f.useState(!1),[ja,gs]=f.useState(null),[ro,vs]=f.useState(""),[Tt,ys]=f.useState(!1),oo=[" Claude is making magic happen"," Claude is *still* making magic happen","Yeah, we all love instant gratification, but it'll still be quicker than you could do it from scratch","Are you familiar with the phrase 'A watched pot never boils'? It's kinda like that","Chill, I'm working on it.","You could be stretching or something while you wait, couldn't you?","The pyramids weren't built in a day... ","but hey, at least I'm not going to ask you for an email address to send the chord charts to.","Perfect chord charts take time to craft. These will take less time and they won't be perfect.","Yeah, I could show you a progress bar, but we both know it would just lie to you","This is taking precisely as long as it needs to take","Meanwhile, your guitar is getting dusty just sitting there...","Quality over speed, as they say in the chord chart business. We'll see which this turns out to be","Calculating the optimal finger placement for maximum laziness...","Teaching AI to read guitar tabs is harder than teaching humans, surprisingly","Processing at the speed of artisanal chord crafting","Your patience is being converted into beautiful chord diagrams","Still faster than drawing the chord charts by hand"],yi=w=>{const P=M[w]||[];if(console.log(`[DEBUG] getChordSections for item ${w}:`,P),P.length===0)return[];const _=new Map;return P.forEach(B=>{const G=B.sectionId||"section-1",X=B.sectionLabel||"Verse",ne=B.sectionRepeatCount||"";console.log(`[DEBUG] Processing chord ${B.id} (${B.title}) for section ${G}`,{chordSectionId:B.sectionId,chordSectionLabel:B.sectionLabel,fallbackUsed:!B.sectionId}),_.has(G)||_.set(G,{id:G,label:X,repeatCount:ne,chords:[]}),_.get(G).chords.push(B)}),Array.from(_.values())},_o=w=>{if(w.length===0)return[];const P=new Map;w.forEach(R=>{const B=R.sectionId||"section-1",G=R.sectionLabel||"Verse",X=R.sectionRepeatCount||"";P.has(B)||P.set(B,{id:B,label:G,repeatCount:X,chords:[]}),P.get(B).chords.push(R)});const _=Array.from(P.values()).sort((R,B)=>{const G=Math.min(...R.chords.map(ne=>ne.order||0)),X=Math.min(...B.chords.map(ne=>ne.order||0));return G-X});return _.forEach(R=>{R.chords.sort((B,G)=>(B.order||0)-(G.order||0))}),_},Tc=(w,P="New Section")=>{console.log("Adding new section for item:",w,"with label:",P);const _={id:`section-${Date.now()}`,label:P,repeatCount:"",chords:[]};ae(R=>{const B={...R,[w]:[...R[w]||[],_]};return console.log("Updated chordSections:",B),B})},ka=f.useCallback(hN(async(w,P,_)=>{console.log("Debounced section update:",P,_);try{const R=await fetch(`/api/items/${w}/chord-charts`);if(!R.ok)throw new Error(`Failed to fetch chord charts for item ${w}`);const G=await R.json();console.log(`[DEBUG] Fresh charts for item ${w}:`,G.map(Ge=>({id:Ge.id,title:Ge.title,sectionId:Ge.sectionId||"default-section"})));const X=G.filter(Ge=>(Ge.sectionId||"section-1")===P);if(X.length===0){console.log(`No chord charts to update for section: ${P}. This might be a new section without any chord charts yet.`);return}console.log(`Updating ${X.length} chord charts for section ${P}:`,X.map(Ge=>Ge.id));const ne=X.map(Ge=>{const le={};return _.label!==void 0&&(le.sectionLabel=_.label),_.repeatCount!==void 0&&(le.sectionRepeatCount=_.repeatCount),console.log(`Updating chord chart ${Ge.id} with:`,le),fetch(`/api/chord-charts/${Ge.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(le)}).then(re=>{if(!re.ok)throw new Error(`Failed to update chord chart ${Ge.id}: ${re.status} ${re.statusText}`);return re.json()})});await Promise.all(ne),console.log(`Successfully persisted ${X.length} chord charts for section ${P}`)}catch(R){console.error("Error persisting section updates:",R)}},500),[]),Mo=(w,P,_)=>{ae(R=>({...R,[w]:(R[w]||[]).map(B=>B.id===P?{...B,..._}:B)})),H(R=>({...R,[w]:(R[w]||[]).map(B=>(B.sectionId||"section-1")===P?{...B,sectionLabel:_.label!==void 0?_.label:B.sectionLabel,sectionRepeatCount:_.repeatCount!==void 0?_.repeatCount:B.sectionRepeatCount}:B)})),ka(w,P,_)},Bn=async(w,P)=>{if(!w){console.error("ERROR: deleteSection called with empty itemId",{itemId:w,sectionId:P});return}const _=`${w}-${P}`;if(ye.has(_)){console.log(`Delete already in progress for section ${P}`);return}xe(R=>new Set([...R,_]));try{const R=(M[w]||[]).filter(ne=>(ne.sectionId||"section-1")===P);if(R.length===0){console.log(`No chord charts to delete in section ${P}`),ae(ne=>({...ne,[w]:(ne[w]||[]).filter(Ge=>Ge.id!==P)}));return}const B=R.map(ne=>ne.id);console.log(`Batch deleting ${R.length} chord charts from section ${P}:`,B),console.log(`DEBUG: Sending item_id=${w} to batch-delete endpoint`);const G=await fetch("/api/chord-charts/batch-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chord_ids:B,item_id:w})});if(!G.ok){if(G.status===429){const ne=await G.json();console.warn("Rate limit exceeded, will retry after delay"),alert(`Rate limit exceeded. Please wait a moment and try again. (${ne.error})`);return}throw new Error(`HTTP ${G.status}: Failed to batch delete chord charts`)}const X=await G.json();if(console.log("Batch delete result:",X),X.deleted&&X.deleted.length>0&&console.log(`Successfully deleted ${X.deleted.length} chord charts`),X.not_found&&X.not_found.length>0&&console.warn(`${X.not_found.length} chord charts were already deleted:`,X.not_found),X.failed&&X.failed.length>0&&console.error(`Failed to delete ${X.failed.length} chord charts:`,X.failed),H(ne=>({...ne,[w]:(ne[w]||[]).filter(Ge=>(Ge.sectionId||"section-1")!==P)})),ae(ne=>({...ne,[w]:(ne[w]||[]).filter(Ge=>Ge.id!==P)})),!X.success&&X.failed&&X.failed.length===B.length)throw new Error(X.error||"All chord chart deletions failed")}catch(R){console.error("Error deleting section:",R)}finally{xe(R=>{const B=new Set(R);return B.delete(_),B})}},Ta=f.useCallback(async()=>{if(console.log("[DEBUG BATCH] loadAllChordCharts called"),!n||!n.items)return;const w=n.items.map(_=>_.B),P=w.filter(_=>!M[_]);if(console.log("[DEBUG BATCH] All routine items:",w,"Items needing loading:",P,"Current chordCharts keys:",Object.keys(M)),P.length!==0)try{const _=await fetch("/api/chord-charts/batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_ids:P})});if(_.ok){const B=await _.json();H(G=>({...G,...B})),Object.entries(B).forEach(([G,X])=>{if(X.length===0)ae(ne=>({...ne,[G]:[]}));else{const ne=new Map;X.forEach(le=>{const re=le.sectionId||"section-1",U=le.sectionLabel||"Verse",Fe=le.sectionRepeatCount||"";ne.has(re)||ne.set(re,{id:re,label:U,repeatCount:Fe,chords:[]}),ne.get(re).chords.push(le)});const Ge=Array.from(ne.values());ae(le=>({...le,[G]:Ge}))}})}}catch(_){console.error("Error batch loading chord charts:",_)}},[n]);f.useEffect(()=>{console.log("[DEBUG EFFECT] useEffect triggered for routine/loadAllChordCharts"),n&&n.items&&(Ta(),g0(n.name))},[n,Ta]),f.useEffect(()=>{if(Pe.size>0){const w=new Set;Pe.forEach(P=>{const R=c?.find(G=>G.A===P)?.B;(M[R]||[]).length>0&&w.add(P)}),Re(w)}else Re(new Set)},[Pe,M,c]),f.useEffect(()=>{if(Object.values(ut).filter(B=>B==="processing").length===0){bn(0),en([]);return}bn(0);const _=Array.from({length:oo.length-1},(B,G)=>G+1).sort(()=>Math.random()-.5);en(_);const R=setInterval(()=>{en(B=>{if(B.length===0){const X=Array.from({length:oo.length},(le,re)=>re).sort(()=>Math.random()-.5),ne=X[0],Ge=X.slice(1);return bn(ne),Ge}else{const G=B[0],X=B.slice(1);return bn(G),X}})},1e4);return()=>clearInterval(R)},[ut,oo.length]);const Nn=async w=>{if(!M[w])try{const P=await fetch(`/api/items/${w}/chord-charts`);if(P.ok){const _=await P.json(),R=_;if(H(G=>({...G,[w]:R})),R.length===0){ae(G=>({...G,[w]:[]}));return}const B=new Map;R.forEach(G=>{const X=G.sectionId||"section-1",ne=G.sectionLabel||"Verse",Ge=G.sectionRepeatCount||"";B.has(X)||B.set(X,{id:X,label:ne,repeatCount:Ge,chords:[]}),B.get(X).chords.push(G)}),ae(G=>({...G,[w]:Array.from(B.values())})),console.log("[DEBUG] Loaded chord charts for item:",w,_.length)}}catch(P){console.error("Error loading chord charts for item:",w,P)}},Ra=f.useMemo(()=>n?.items?new Set(n.items.filter(w=>w.D==="TRUE").map(w=>w.A)):new Set,[n]),[xs,xi]=f.useState(new Set),_n=f.useRef(null),Ar=f.useRef(null),Qt=f.useRef(null),so=f.useRef(null);f.useEffect(()=>(_n.current=new(window.AudioContext||window.webkitAudioContext),Ar.current=_n.current.createGain(),Ar.current.gain.value=3,Ar.current.connect(_n.current.destination),fetch("/static/sound/timesUp.mp3").then(w=>w.arrayBuffer()).then(w=>_n.current.decodeAudioData(w)).then(w=>{so.current=w}).catch(w=>console.error("Error loading sound:",w)),()=>{_n.current&&_n.current.close()}),[]),f.useEffect(()=>{const w=setInterval(()=>{T(P=>{const _={...P};let R=!1;return v.forEach(B=>{_[B]>0&&(_[B]=_[B]-1,R=!0,_[B]===0&&(Qt.current&&Qt.current.stop(),so.current&&_n.current&&(Qt.current=_n.current.createBufferSource(),Qt.current.buffer=so.current,Qt.current.connect(Ar.current),Qt.current.start())))}),R?_:P})},1e3);return console.log("Timer effect: Active timers:",Array.from(v)),()=>{clearInterval(w),Qt.current&&(Qt.current.stop(),Qt.current=null)}},[v]),f.useEffect(()=>{xi(Ra)},[Ra]);const wi=f.useCallback(async w=>{try{const P=await fetch(`/api/items/${w}/notes`);if(!P.ok)throw new Error("Failed to fetch notes");const _=await P.json();_.notes&&N(R=>({...R,[w]:_.notes}))}catch(P){console.error("Error fetching notes:",P)}},[]),Ci=f.useMemo(()=>{if(!D||!c)return new Set;const P=c.find(R=>R.B===D)?.C||"",_=c.filter(R=>R.B!==D);return new Set(Sd(P,_,D).map(R=>R.A))},[D,c]),ws=f.useMemo(()=>c?c.filter(w=>{if(w.B===D)return!1;if(Se.trim()){const P=w.C||"",_=Zs(P),R=Zs(Se);return R?(console.log(`DEBUG SEARCH: "${Se}" -> "${R}" searching in "${P}" -> "${_}" -> match: ${_.includes(R)}`),_.includes(R)):!0}return!0}).sort((w,P)=>{if(Se.trim()){const X=w.C||"",ne=P.C||"";return X.localeCompare(ne)}const _=Ci.has(w.A),R=Ci.has(P.A);if(_&&!R)return-1;if(!_&&R)return 1;const B=w.C||"",G=P.C||"";return B.localeCompare(G)}):[],[c,D,Se,Ci]),Cs=f.useMemo(()=>{if(!ot||!c)return new Set;const P=c.find(R=>R.B===ot)?.C||"",_=c.filter(R=>R.B!==ot);return new Set(Sd(P,_,ot).map(R=>R.A))},[ot,c]),bs=f.useMemo(()=>c?c.filter(w=>{if(w.B===ot)return!1;if(He.trim()){const P=w.C||"",_=Zs(P),R=Zs(He);return R?_.includes(R):!0}return!0}).sort((w,P)=>{if(He.trim()){const X=w.C||"",ne=P.C||"";return X.localeCompare(ne)}const _=Cs.has(w.A),R=Cs.has(P.A);if(_&&!R)return-1;if(!_&&R)return 1;const B=w.C||"",G=P.C||"";return B.localeCompare(G)}):[],[c,ot,He,Cs]),[Xn,Aa]=f.useState({});f.useEffect(()=>{ge&&c&&Object.keys(Xn).length===0&&(async()=>{const P={},_=c.map(R=>R.B);try{const R=await fetch("/api/chord-charts/batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_ids:_})});if(R.ok){const B=await R.json();Object.entries(B).forEach(([G,X])=>{P[G]=(X||[]).length}),Aa(P)}}catch(R){console.error("Error loading chord chart counts:",R)}})()},[ge,c,Xn]);const bi=f.useMemo(()=>bs.filter(w=>{const P=w.B;return Xn[P]>0}),[bs,Xn]);f.useEffect(()=>{const w=P=>{P.key==="Escape"&&(ce?$o():ge?gr():Ke?(Qe(!1),it(null)):zt?Ot(!1):te?ie(!1):Sn?sn(!1):ze?de(!1):ps?(ms(!1),gs(null),vs("")):Tt&&ys(!1))};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[ce,ge,Ke,zt,te,Sn,ze,ps,Tt]);const ht=f.useCallback((w,P)=>{console.log(`Initializing timer for item ${w} with duration ${P} minutes`),T(_=>_[w]?_:{..._,[w]:P*60})},[]),Da=async w=>{h(P=>{const _=new Set(P);if(_.has(w))_.delete(w);else{_.add(w);const R=n.items.find(B=>B.A===w);if(R){const B=R.B;r(B).then(G=>{G&&(ht(w,G.E||5),wi(B))})}}return _})},Si=(w,P)=>{P?.stopPropagation();const _=n.items.find(R=>R.A===w);if(_){if(Qt.current&&Qt.current.stop(),A[w])console.log(`Timer ${w} exists with value ${A[w]}`);else{console.log(`Timer ${w} not found, initializing...`);const B=s(_.B)?.E||5;ht(w,B)}x(R=>{const B=new Set(R),G=s(_.B),X=G?.C||`Item ${w}`;if(B.has(w)){console.log(`Deactivating timer ${w}`),B.delete(w);const ne=(G?.E||5)*60,Ge=A[w]||ne,le=ne-Ge;Dl("timer_stopped",X,{time_elapsed_seconds:Math.max(0,le),initial_duration_minutes:G?.E||5})}else console.log(`Activating timer ${w}`),B.add(w),Dl("started_timer",X);return B})}},Ss=async(w,P)=>{P?.stopPropagation();const _=!xs.has(w);try{const R=await fetch(`/api/routines/${n.id}/items/${w}/complete`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({completed:_})});if(!R.ok)throw new Error("Failed to update completion state");(await R.json()).success&&xi(G=>{const X=new Set(G);if(_){X.add(w);const ne=n.items.find(le=>le.A===w);if(ne){const le=s(ne.B),re=le?.C||`Item ${w}`,U=(le?.E||5)*60,Fe=A[w]||U,Xe=U-Fe;Dl("marked_done",re,{time_elapsed_seconds:Math.max(0,Xe),was_timer_active:v.has(w),initial_duration_minutes:le?.E||5})}x(le=>{const re=new Set(le);return re.delete(w),re});const Ge=n.items.findIndex(le=>le.A===w);h(le=>{const re=new Set(le);if(re.delete(w),Ge<n.items.length-1){const U=n.items[Ge+1];re.add(U.A);const Fe=U.B;r(Fe).then(Xe=>{Xe&&(ht(U.A,Xe.E||5),wi(Fe))})}return re})}else X.delete(w);return X})}catch(R){console.error("Error updating completion state:",R)}},Ni=(w,P)=>{P?.stopPropagation(),Qt.current&&Qt.current.stop();const _=n.items.find(R=>R.A===w);if(_){const R=s(_.B),B=R?.E||5,G=R?.C||`Item ${w}`;T(X=>({...X,[w]:B*60})),Dl("timer_reset",G)}},Pa=async(w,P)=>{P?.stopPropagation(),j(w),E(!0)},Oa=async()=>{await wi(S),j(null)},Ei=(w,P)=>{P?.stopPropagation(),g(_=>{const R=new Set(_);return R.has(w)?R.delete(w):R.add(w),R})},Ns=async w=>{w?.stopPropagation();try{if(!(await fetch(`/api/routines/${n.id}/reset`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to reset progress");xi(new Set)}catch(P){console.error("Error resetting progress:",P)}},{totalMinutes:pr,completedMinutes:Jn}=f.useMemo(()=>{if(!n?.items)return{totalMinutes:0,completedMinutes:0};const w=n.items.reduce((_,R)=>{const B=s(R.B),G=parseInt(B?.E)||5;return _+G},0),P=n.items.filter(_=>xs.has(_.A)).reduce((_,R)=>{const B=s(R.B),G=parseInt(B?.E)||5;return _+G},0);return{totalMinutes:w,completedMinutes:P}},[n,xs,s]);f.useEffect(()=>{if(!window.svguitar){const w=document.createElement("script");w.src="https://omnibrain.github.io/svguitar/js/svguitar.umd.js",w.async=!0,document.body.appendChild(w)}},[]);const mr=(w,P)=>{P?.stopPropagation(),F(_=>{const R=new Set(_);if(R.has(w))R.delete(w);else{R.add(w);const B=n.items.find(G=>G.A===w);if(B){const G=B.B;Nn(G)}}return R})},Io=async(w,P)=>{try{km("Saving chord chart for item",{itemId:w,chartData:P});const _=P.editingChordId;let R;if(R={...P},_){const le=(M[w]||[]).find(re=>re.id===P.editingChordId);R.sectionId=le?.sectionId,R.sectionLabel=le?.sectionLabel,R.sectionRepeatCount=le?.sectionRepeatCount,un("Updating chord, preserving section",{originalSection:{id:le?.sectionId,label:le?.sectionLabel,repeatCount:le?.sectionRepeatCount}})}else{const le=we[w]||yi(w);let re;P.insertionContext?re={id:P.insertionContext.sectionId,label:P.insertionContext.sectionLabel,repeatCount:P.insertionContext.sectionRepeatCount}:le.length===0?re={id:"section-1",label:"Verse",repeatCount:""}:re=le[le.length-1],R.sectionId=re.id,R.sectionLabel=re.label,R.sectionRepeatCount=re.repeatCount}R.hasLineBreakAfter=P.startOnNewLine||!1,un("Setting line break after chord",{title:R.title,hasLineBreakAfter:R.hasLineBreakAfter}),un("Chord data with section metadata",{chartDataWithSection:R});const B=_?`/api/chord-charts/${P.editingChordId}`:`/api/items/${w}/chord-charts`,G=_?"PUT":"POST";un(`${_?"Updating":"Creating"} chord chart`,{method:G,url:B});const X=await fetch(B,{method:G,headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(!X.ok)throw new Error(`Failed to save chord chart: ${X.statusText}`);const ne=await X.json();if(km("Chord chart saved successfully",{savedChart:ne}),console.log("DEBUG: Saved chord detailed breakdown:",{id:ne.id,title:ne.title,fingers:ne.fingers,fingersType:typeof ne.fingers,fingersLength:ne.fingers?.length,barres:ne.barres,barresType:typeof ne.barres,tuning:ne.tuning,startingFret:ne.startingFret,numFrets:ne.numFrets,numStrings:ne.numStrings,openStrings:ne.openStrings,mutedStrings:ne.mutedStrings}),H(le=>{const re=le[w]||[];if(_){const U=parseInt(P.editingChordId);un("Updating chordCharts state",{editingId:U,editingChordIdOriginal:P.editingChordId,existingChartIds:re.map(Xe=>({id:Xe.id,type:typeof Xe.id}))});let Fe=re.map(Xe=>{const Xt=parseInt(Xe.id)===U;return Xt&&(un("Found matching chord to update",{chart:Xe.id,editingId:U}),console.log("DEBUG: State update - replacing old chart:",{oldChart:Xe,newChart:ne,fingersOld:Xe.fingers,fingersNew:ne.fingers})),Xt?ne:Xe});return R._lineBreakUpdater&&(un("Applying stored line break updater to preserve line breaks"),Fe=R._lineBreakUpdater(Fe)),un("Updated charts result",{originalCount:re.length,updatedCount:Fe.length,foundMatch:Fe.some(Xe=>parseInt(Xe.id)===U),hasLineBreakUpdater:!!R._lineBreakUpdater}),{...le,[w]:Fe}}else{let U=[...re,ne];return R._lineBreakUpdater&&(un("Applying stored line break updater to preserve line breaks for new chord"),U=R._lineBreakUpdater(U)),{...le,[w]:U}}}),ae(le=>{const re=le[w]||[];if(_){const U=parseInt(P.editingChordId);un("Updating chordSections state",{editingId:U,sectionsCount:re.length});let Fe=re.map(Xe=>{const Xt=Xe.chords.map(bt=>{const st=parseInt(bt.id)===U;return st&&un("Found matching chord in section",{sectionId:Xe.id,sectionLabel:Xe.label,chordId:bt.id,editingId:U}),st?ne:bt});return{...Xe,chords:Xt}});return R._lineBreakUpdater&&(un("Applying line break updater to sections state"),Fe=Fe.map(Xe=>({...Xe,chords:R._lineBreakUpdater(Xe.chords)}))),{...le,[w]:Fe}}else{if(re.length===0){const Fe=[{id:"section-1",label:"Verse",repeatCount:"",chords:[ne]}];return R._lineBreakUpdater&&(un("Applying line break updater to new section"),Fe[0].chords=R._lineBreakUpdater(Fe[0].chords)),{...le,[w]:Fe}}const U=[...re];if(P.insertionContext){const Fe=U.findIndex(Xe=>Xe.id===P.insertionContext.sectionId);if(Fe>=0){const Xe={...U[Fe]},Xt=P.insertionContext.insertOrder,bt=Xe.chords.findIndex(st=>parseInt(st.order)>=Xt);bt>=0?Xe.chords=[...Xe.chords.slice(0,bt),ne,...Xe.chords.slice(bt)]:Xe.chords=[...Xe.chords,ne],U[Fe]=Xe}else{const Xe={...U[U.length-1]};Xe.chords=[...Xe.chords,ne],U[U.length-1]=Xe}}else{const Fe={...U[U.length-1]};Fe.chords=[...Fe.chords,ne],U[U.length-1]=Fe}return R._lineBreakUpdater&&(un("Applying line break updater to updated sections"),U.forEach(Fe=>{Fe.chords=R._lineBreakUpdater(Fe.chords)})),{...le,[w]:U}}}),n.items.find(le=>le.B===w)){const re=s(w)?.C||`Item ${w}`;_?br("edited",re,{chord_name:P.title||"Unknown Chord",section_id:R.sectionId,section_label:R.sectionLabel}):br("added",re,{chord_name:P.title||"Unknown Chord",section_id:R.sectionId,section_label:R.sectionLabel})}q(le=>({...le,[w]:!1})),be(null),je(null),qn()}catch(_){console.error("Error saving chord chart:",_)}},Lo=async(w,P)=>{try{console.log("Deleting chord chart:",P,"for item:",w);const _=await fetch(`/api/items/${w}/chord-charts/${P}`,{method:"DELETE"});if(!_.ok){if(_.status===429){const B=await _.json();console.warn("Rate limit exceeded for individual delete"),alert(`Rate limit exceeded. Please wait a moment and try again. (${B.error})`);return}throw new Error(`Failed to delete chord chart: ${_.statusText}`)}if(console.log("Chord chart deleted successfully"),n.items.find(B=>B.B===w)){const G=s(w)?.C||`Item ${w}`,X=(M[w]||[]).find(ne=>ne.id===P);br("deleted",G,{chord_name:X?.title||"Unknown Chord",chord_id:P})}H(B=>{const G=B[w]||[];return{...B,[w]:G.filter(X=>X.id!==P)}}),ae(B=>{const X=(B[w]||[]).map(ne=>({...ne,chords:ne.chords.filter(Ge=>Ge.id!==P)}));return{...B,[w]:X}})}catch(_){console.error("Error deleting chord chart:",_)}},qn=()=>{me&&(setTimeout(()=>{const w=document.querySelector(`[data-chord-id="${me.chordId}"]`);w?w.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}):window.scrollTo({top:me.scrollPosition,behavior:"smooth"})},100),Q(null))},Rc=(w,P,_)=>{console.log("Edit chord chart:",P,"for item:",w,"with data:",_),Q({itemId:w,chordId:P,scrollPosition:window.scrollY}),q(R=>({...R,[w]:!0})),be(P),setTimeout(()=>{const R=document.querySelector(`[data-editor-for-item="${w}"]`);R&&R.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},_a=(w,P,_)=>{console.log("Insert chord after:",P,"for item:",w,"with data:",_),Q({itemId:w,chordId:P,scrollPosition:window.scrollY}),q(R=>({...R,[w]:!0})),je({afterChordId:P,sectionId:_.sectionId,sectionLabel:_.sectionLabel,sectionRepeatCount:_.sectionRepeatCount,insertOrder:parseInt(_.order)+1}),be(null),setTimeout(()=>{const R=document.querySelector(`[data-editor-for-item="${w}"]`);R&&R.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},Fo=w=>{console.log("Print button clicked for item:",w);const P=document.querySelector(`[data-item-id="${w}"].chord-charts-container`);console.log("Found container:",P),P?(P.classList.add("chord-chart-print-area"),window.print(),setTimeout(()=>{P.classList.remove("chord-chart-print-area")},100)):console.error("Could not find chord charts container for item:",w)},Ac=async w=>{console.log("Opening copy modal for item:",w),J(w);const _=c?.find(G=>G.B===w)?.C||"",R=Sd(_,c,w);console.log("Source:",_),console.log("Found similar songs:",R.map(G=>G.C));const B=[w,...R.map(G=>G.B)];console.log("Loading chord charts for relevant items:",B.length,"items");for(const G of B)try{const X=await fetch(`/api/items/${G}/chord-charts`);if(X.ok){const ne=await X.json();H(Ge=>({...Ge,[G]:ne})),console.log(`Loaded ${ne.length} charts for item ${G}`)}}catch(X){console.error(`Error loading chord charts for item ${G}:`,X)}ue(!0),Me(""),Le(new Set),Je(null)},$o=()=>{ue(!1),J(null),Me(""),Le(new Set),Re(new Set),ee(!1),Je(null)},Es=w=>{Le(P=>{const _=new Set(P);if(_.has(w))_.delete(w);else{_.add(w);const B=c?.find(G=>G.A===w)?.B;B&&Nn(B)}return _})},ji=async()=>{if(console.log("handleConfirmCopy called",{copySourceItemId:D,selectedTargetItems:Array.from(Pe)}),!D||Pe.size===0){console.log("Early return: missing source or targets");return}if(se.size>0&&!K){console.log("Showing overwrite confirmation, items with existing charts:",se.size),ee(!0);return}try{const w=await fetch("/api/chord-charts/copy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source_item_id:D,target_item_ids:Array.from(Pe).map(B=>c?.find(X=>X.A===B)?.B).filter(Boolean)})});if(!w.ok)throw new Error(`Failed to copy chord charts: ${w.statusText}`);const P=await w.json();console.log("Chord charts copied successfully:",P),Je("complete");const _=Array.from(Pe).map(B=>c?.find(X=>X.A===B)?.B).filter(Boolean),R=[D,..._];console.log("[DEBUG COPY] About to refresh chord charts for affected items:",R);for(const B of R)try{const G=await fetch(`/api/items/${B}/chord-charts`);if(G.ok){const X=await G.json();if(console.log("[DEBUG COPY] Updating chordCharts state for item",B,"with",X.length,"charts"),H(ne=>({...ne,[B]:X})),X.length===0)ae(ne=>({...ne,[B]:[]}));else{const ne=new Map;X.forEach(le=>{const re=le.sectionId||"section-1",U=le.sectionLabel||"Verse",Fe=le.sectionRepeatCount||"";ne.has(re)||ne.set(re,{id:re,label:U,repeatCount:Fe,chords:[]}),ne.get(re).chords.push(le)});const Ge=Array.from(ne.values()).sort((le,re)=>{const U=le.chords.length>0&&le.chords[0].order||0,Fe=re.chords.length>0&&re.chords[0].order||0;return U-Fe});console.log("[DEBUG COPY] Updating chordSections state for item",B,"with",Ge.length,"sections"),ae(le=>({...le,[B]:Ge}))}}}catch(G){console.error("Error refreshing chord charts for item",B,G)}$o()}catch(w){console.error("Error copying chord charts:",w)}},Dc=()=>{console.log("Overwrite confirmed, proceeding with copy"),ee(!1),ji()},zo=()=>{console.log("Overwrite cancelled, returning to item selection"),ee(!1)},Bo=w=>{console.log("Opening copy from modal for item:",w),Vt(w),ke(!0),tt(""),Ue(null)},gr=()=>{ke(!1),Vt(null),tt(""),Ue(null),Aa({})},js=async()=>{if(console.log("handleConfirmCopyFrom called",{selectedSourceItem:xt,copyFromTargetItemId:ot}),!xt||!ot){console.log("Early return: missing source or target");return}try{const w=await fetch("/api/chord-charts/copy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source_item_id:xt,target_item_ids:[ot]})});if(!w.ok)throw new Error(`Failed to copy chord charts: ${w.statusText}`);const P=await w.json();console.log("Chord charts copied successfully:",P);const _=await fetch(`/api/items/${ot}/chord-charts`);if(_.ok){const R=await _.json();if(H(B=>({...B,[ot]:R})),R.length===0)ae(B=>({...B,[ot]:[]}));else{const B=new Map;R.forEach(X=>{const ne=X.sectionId||"section-1",Ge=X.sectionLabel||"Verse",le=X.sectionRepeatCount||"";B.has(ne)||B.set(ne,{id:ne,label:Ge,repeatCount:le,chords:[]}),B.get(ne).chords.push(X)});const G=Array.from(B.values()).sort((X,ne)=>{const Ge=X.chords.length>0&&X.chords[0].order||0,le=ne.chords.length>0&&ne.chords[0].order||0;return Ge-le});ae(X=>({...X,[ot]:G}))}}gr()}catch(w){console.error("Error copying chord charts:",w)}},Pc=w=>{(M[w]||[]).length>0&&(it(w),Qe(!0))},Oc=async()=>{if(Be)try{const w=M[Be]||[];for(const P of w)if(!(await fetch(`/api/items/${Be}/chord-charts/${P.id}`,{method:"DELETE"})).ok)throw new Error(`Failed to delete chord chart ${P.id}`);H(P=>({...P,[Be]:[]})),ae(P=>({...P,[Be]:[]})),Qe(!1),it(null)}catch(w){console.error("Error deleting existing chord charts:",w)}},ki=w=>{Wt[w]&&Wt[w].abort(),Z(P=>{const _={...P};return delete _[w],_}),Cn(P=>{const _={...P};return delete _[w],_}),yt(P=>{const _={...P};return delete _[w],_})},vr=w=>{Qn(w),sn(!0)},Ti=()=>{an&&ki(an),sn(!1),Qn(null)},Ma=()=>{sn(!1),Qn(null)},Zn=(w,P)=>{if(!(!P||P.length===0)){if(P.length>5){alert("Maximum 5 files allowed. Please select fewer files.");return}yt(_=>({..._,[w]:Array.from(P)}))}},ks=(w,P)=>{if(!w||w.trim().length===0)return hs(X=>({...X,[P]:null})),!0;const _=w.trim();return/^[A-Za-z0-9#b/\s,\n\r-]+$/.test(_)?_.split(/[\n\r]+/).some(X=>{const ne=X.trim();return ne.length===0?!1:/^[A-Za-z]+$/.test(ne)?!0:ne.split(/[,\s]+/).filter(re=>re.trim().length>0).every(re=>/^[A-Ga-g][A-Za-z0-9#b/]*$/.test(re))})?(hs(X=>({...X,[P]:null})),!0):(hs(X=>({...X,[P]:'Please enter chord names separated by commas, spaces, or section names (e.g., "C, G, Am, F" or "D A G D" or "Intro")'})),!1):(hs(X=>({...X,[P]:"Only chord names (A-G), numbers, #, b, , , /, commas, spaces, and section names are allowed"})),!1)},Ts=async w=>{const P=Et[w]||[],_=no[w]?.trim(),R=On[w]?.trim();if(console.log(`[AUTOCREATE] handleProcessFiles called for item ${w}, files:`,P.length,"youtubeUrl:",_,"manualChords:",R),_){await Rs(w,_);return}if(R)if(ks(R,w)){await Ia(w,R);return}else return;if(P.length===0){alert("Please add at least one file, YouTube URL, or manual chord input before processing.");return}await gn(w,P)},Ia=async(w,P)=>{console.log(`[AUTOCREATE] Processing manual chord input for item ${w}:`,P),Z(_=>({..._,[w]:"processing"}));try{const _=new Blob([P],{type:"text/plain"}),R=new File([_],"manual-input.txt",{type:"text/plain"}),B=new FormData;B.append("file0",R),B.append("itemId",w),B.append("userChoice","chord_names"),console.log("[AUTOCREATE] Sending manual input to autocreate endpoint");const G=await fetch("/api/autocreate-chord-charts",{method:"POST",body:B});if(!G.ok){const re=await G.text();throw new Error(`Failed to process manual input: ${G.status} ${G.statusText} - ${re}`)}const X=await G.json();console.log("[AUTOCREATE] Manual input processed successfully:",X);const Ge=await(await fetch(`/api/items/${w}/chord-charts`)).json();H(re=>({...re,[w]:Ge})),ae(re=>({...re,[w]:_o(Ge)})),vi(re=>({...re,[w]:""}));const le=s(w);Ht({itemTitle:le?.C||`Item ${w}`,chordsCreated:Ge.length,processingMethod:"Manual Entry"}),et(!0)}catch(_){console.error("Error processing manual chord input:",_),Oe({message:"Failed to process manual chord input. Please try again."}),de(!0)}finally{Z(_=>{const R={..._};return delete R[w],R})}},Rs=async(w,P)=>{console.log(`[YOUTUBE] Processing YouTube URL for item ${w}:`,P);const _=P.trim().replace(/[<>"']/g,"");if(!/^https?:\/\/(www\.)?(youtube\.com\/watch\?v=[\w-]+|youtu\.be\/[\w-]+)(\?.*|&.*)?$/.test(_)){Oe({message:"Please enter a valid YouTube URL (e.g., https://youtube.com/watch?v=...)"}),de(!0);return}Z(B=>({...B,[w]:"checking_transcript"}));try{console.log("[YOUTUBE] Fetching transcript from YouTube API");const B=await fetch("/api/youtube/check-transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:_})});if(!B.ok)throw new Error("Failed to fetch YouTube transcript");const G=await B.json();if(!G.hasTranscript||!G.transcript){Oe({message:"This YouTube video does not have a transcript available. Please try a different video or use file upload instead."}),de(!0);return}console.log(`[YOUTUBE] Transcript fetched successfully, length: ${G.transcript.length} characters`),await Uo(w,G.transcript)}catch(B){console.error("Error processing YouTube URL:",B),Oe({message:"Failed to process YouTube URL. Please try again."}),de(!0),Z(G=>{const X={...G};return delete X[w],X})}},Uo=async(w,P)=>{try{Z({[w]:"reading_transcript"});const _=new FormData;_.append("itemId",w);const R=new Blob([P],{type:"text/plain"});_.append("file0",R,"youtube_transcript.txt"),setTimeout(()=>{Z({[w]:"processing"})},2e3);const G=await fetch("/api/autocreate-chord-charts",{method:"POST",headers:{"X-Item-Id":w},body:_});if(!G.ok)throw new Error(`Failed to create chord charts: ${G.statusText}`);const X=await G.json();if(console.log("[YOUTUBE] Chord charts created successfully:",X),X.error&&X.error.includes("No chord names found in this transcript")){ys(!0),Z(le=>{const re={...le};return delete re[w],re}),mn(le=>({...le,[w]:""}));return}if(n.items.find(le=>le.B===w)){const re=s(w)?.C||`Item ${w}`;br("autocreated",re,{content_type:"youtube_transcript",source:"youtube_url"})}const Ge=s(w);Ht({itemName:Ge?.C||`Item ${w}`,chordCount:X.chord_count||0,contentType:"youtube_transcript",uploadedFileNames:"YouTube transcript",isVisionAnalysis:!1}),et(!0);try{const le=await fetch(`/api/items/${w}/chord-charts`);if(le.ok){const U=await le.json();if(H(Fe=>({...Fe,[w]:U})),U.length===0)ae(Fe=>({...Fe,[w]:[]}));else{const Fe=new Map;U.forEach(Xt=>{const bt=Xt.sectionId||"section-1",st=Xt.sectionLabel||"Verse",_t=Xt.sectionRepeatCount||"";Fe.has(bt)||Fe.set(bt,{id:bt,label:st,repeatCount:_t,chords:[]}),Fe.get(bt).chords.push(Xt)});const Xe=Array.from(Fe.values());ae(Xt=>({...Xt,[w]:Xe}))}}}catch(le){console.error("Error refreshing chord charts:",le)}mn(le=>({...le,[w]:""})),Z(le=>{const re={...le};return delete re[w],re})}catch(_){console.error("Error processing YouTube transcript:",_),Oe({message:"Failed to create chord charts from transcript. Please try again."}),de(!0),Z(R=>{const B={...R};return delete B[w],B})}},Ri=async w=>{if(!Ne)return;const{itemId:P,files:_}=Ne;console.log(`[AUTOCREATE] handleMixedContentChoice called with contentType: ${w}, itemId: ${P}, files:`,_.length);try{Z({[P]:"processing"}),Ot(!1),console.log(`[AUTOCREATE] Starting processing for ${w} with ${_.length} files`);const R=new FormData;_.forEach((X,ne)=>{const Ge=atob(X.data),le=Array.from({length:Ge.length});for(let Fe=0;Fe<Ge.length;Fe++)le[Fe]=Ge.charCodeAt(Fe);const re=new Uint8Array(le),U=new File([re],X.name,{type:X.media_type});R.append(`file${ne}`,U)}),R.append("itemId",P),R.append("userChoice",w),console.log("[AUTOCREATE] Sending API request to /api/autocreate-chord-charts");const B=await fetch("/api/autocreate-chord-charts",{method:"POST",body:R});if(console.log(`[AUTOCREATE] API response status: ${B.status} ${B.statusText}`),!B.ok){const X=await B.json();throw new Error(X.error||"Failed to process files")}const G=await B.json();if(console.log("[AUTOCREATE] API response data:",G),G.success){if(console.log("[AUTOCREATE] Processing successful, setting state to complete"),Z({[P]:"complete"}),n.items.find(le=>le.B===P)){const re=s(P)?.C||`Item ${P}`;br("autocreated",re,{file_count:_?.length||0,content_type:w||"mixed",uploaded_file_names:_?.map(U=>U.name).join(", ")||""})}const Ge=s(P)?.C||`Item ${P}`;Ht({itemName:Ge,chordCount:G.chord_count||0,contentType:w||"mixed",uploadedFileNames:_?.map(le=>le.name).join(", ")||"",isVisionAnalysis:w==="chord_charts"||G.used_vision_analysis===!0}),et(!0);try{const le=await fetch(`/api/items/${P}/chord-charts`);if(le.ok){const U=await le.json();if(H(Fe=>({...Fe,[P]:U})),U&&U.length>0){const Fe=_o(U);ae(Xe=>({...Xe,[P]:Fe}))}}}catch(le){console.error("Failed to refresh chord charts after mixed content choice:",le)}setTimeout(()=>{Z(le=>{const re={...le};return delete re[P],re}),yt(le=>{const re={...le};return delete re[P],re}),$(null)},2e3)}}catch(R){console.error("[AUTOCREATE] Error processing mixed content choice:",R),console.error("[AUTOCREATE] Full error details:",{message:R.message,stack:R.stack,name:R.name}),Z({[P]:"error"}),$(null)}},gn=async(w,P)=>{if(!(!P||P.length===0)){if(P.length>5){alert("Maximum 5 files allowed. Please select fewer files.");return}try{Z({[w]:"uploading"});const _=new AbortController;Cn(re=>({...re,[w]:_}));const R=new FormData;Array.from(P).forEach((re,U)=>{R.append(`file${U}`,re)}),R.append("itemId",w),setTimeout(()=>{Z({[w]:"processing"})},2e3);const G=await fetch("/api/autocreate-chord-charts",{method:"POST",body:R,signal:_.signal});if(!G.ok){const re=await G.json();throw new Error(re.error||"Failed to process files")}const X=await G.json();if(X.needs_user_choice){$({itemId:w,options:X.mixed_content_options||[],files:X.files||[]}),Ot(!0),Z(re=>{const U={...re};return delete U[w],U});return}if(X.error==="unsupported_format"){he({message:X.message,title:X.title}),ie(!0),Z(re=>{const U={...re};return delete U[w],U});return}if(Z({[w]:"complete"}),n.items.find(re=>re.B===w)){const U=s(w)?.C||`Item ${w}`;br("autocreated",U,{file_count:X.file_count||0,content_type:X.content_type||"auto-detected",uploaded_file_names:X.uploaded_file_names||""})}const le=s(w)?.C||`Item ${w}`;Ht({itemName:le,chordCount:X.chord_count||0,contentType:X.content_type||"auto-detected",uploadedFileNames:X.uploaded_file_names||"",isVisionAnalysis:X.content_type==="chord_charts"||X.used_vision_analysis===!0||!X.content_type&&X.used_vision_analysis!==!1}),et(!0);try{const re=await fetch(`/api/items/${w}/chord-charts`);if(re.ok){const Fe=await re.json();if(H(Xe=>({...Xe,[w]:Fe})),Fe.length===0)ae(Xe=>({...Xe,[w]:[]}));else{const Xe=new Map;Fe.forEach(bt=>{const st=bt.sectionId||"section-1",_t=bt.sectionLabel||"Verse",Yt=bt.sectionRepeatCount||"";Xe.has(st)||Xe.set(st,{id:st,label:_t,repeatCount:Yt,chords:[]}),Xe.get(st).chords.push(bt)});const Xt=Array.from(Xe.values()).sort((bt,st)=>{const _t=Math.min(...bt.chords.map(ft=>ft.order||0)),Yt=Math.min(...st.chords.map(ft=>ft.order||0));return _t-Yt});Xt.forEach(bt=>{bt.chords.sort((st,_t)=>(st.order||0)-(_t.order||0))}),ae(bt=>({...bt,[w]:Xt}))}}}catch(re){console.error("Failed to refresh chord charts after autocreate:",re)}setTimeout(()=>{Z(re=>{const U={...re};return delete U[w],U}),It(re=>({...re,[w]:!1})),Cn(re=>{const U={...re};return delete U[w],U}),yt(re=>{const U={...re};return delete U[w],U})},5e3)}catch(_){if(_.name==="AbortError"){console.log("Autocreate request was cancelled");return}console.error("Error in autocreate:",_);const R=_.message||_.toString();R.includes("529")||R.includes("overloaded")||R.includes("429")||R.includes("rate limit")||R.includes("500")||R.includes("502")||R.includes("503")||R.includes("timeout")?(Oe(_),de(!0),Z({[w]:"idle"})):Z({[w]:"error"}),R.includes("529")||R.includes("overloaded")||R.includes("429")||R.includes("rate limit")||R.includes("500")||R.includes("502")||R.includes("503")||R.includes("timeout")||setTimeout(()=>{Z(B=>{const G={...B};return delete G[w],G}),Cn(B=>{const G={...B};return delete G[w],G})},5e3)}}};return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold",children:n?.name}),i.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i.jsxs("div",{className:"text-xl font-mono",children:[Hm(Jn)," / ",Hm(pr-Jn)]}),i.jsx(De,{variant:"outline",onClick:Ns,className:"text-gray-300 hover:text-white",children:"Reset Progress"})]})]}),i.jsx("div",{className:"space-y-4",children:n?.items?.map(w=>{const P=d.has(w.A),_=m.has(w.A),R=v.has(w.A),B=xs.has(w.A),G=s(w.B),X=A[w.A]!==void 0?A[w.A]:(G?.E||5)*60,ne=y[w.B]||"",Ge=L.has(w.A),le=w.minimalDetails?.C||"Loading...",re=P&&!G&&l(w.B);return i.jsxs("div",{className:"rounded-lg bg-gray-800 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-5 cursor-pointer hover:bg-gray-700",onClick:()=>Da(w.A),children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${B?"bg-green-500 border-green-500 text-white":"border-gray-400 text-transparent hover:border-gray-300"}`,onClick:U=>Ss(w.A,U),children:i.jsx(sa,{className:"h-4 w-4"})}),P?i.jsx(Bl,{className:"h-5 w-5 text-gray-400"}):i.jsx(ad,{className:"h-5 w-5 text-gray-400"}),i.jsxs("span",{className:`text-xl ${B?"line-through text-gray-500":""}`,children:[le,re&&i.jsx("span",{className:"text-gray-500 ml-2",children:"(Loading details...)"})]})]}),i.jsx("div",{className:"flex items-center space-x-4",children:(G?.E||P)&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(De,{variant:"ghost",size:"sm",className:"text-gray-400",onClick:U=>Si(w.A,U),children:v.has(w.A)?i.jsx(Um,{className:"h-5 w-5"}):i.jsx(Bm,{className:"h-5 w-5"})}),i.jsx(De,{variant:"ghost",size:"sm",className:"text-gray-400",onClick:U=>Ni(w.A,U),children:i.jsx(Vm,{className:"h-5 w-5"})}),i.jsx("span",{className:"text-lg font-mono",children:Wm(X)})]})})]}),P&&i.jsxs("div",{className:"px-8 pb-6",children:[i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-6",children:[i.jsx("button",{onClick:U=>Si(w.A,U),className:"w-48 h-48 rounded-full border-4 border-gray-600 flex items-center justify-center hover:border-gray-500 transition-colors",children:R?i.jsx(Um,{className:"h-24 w-24 text-red-500"}):i.jsx(Bm,{className:"h-24 w-24 text-green-500"})}),i.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[i.jsx("div",{className:"text-5xl font-mono",children:Wm(X)}),!R&&X!==(G?.E||5)*60&&i.jsxs("button",{onClick:U=>Ni(w.A,U),className:"flex items-center space-x-2 text-gray-400 hover:text-gray-300 transition-colors",children:[i.jsx(Vm,{className:"h-4 w-4"}),i.jsx("span",{children:"Reset Timer"})]})]})]}),i.jsxs("div",{className:"space-y-2 px-4",children:[i.jsx("div",{className:"flex items-center justify-between p-2 hover:bg-gray-700 rounded cursor-pointer",onClick:U=>mr(w.A,U),children:i.jsxs("div",{className:"flex items-center",children:[Ge?i.jsx(Bl,{className:"h-5 w-5 text-gray-400 mr-2"}):i.jsx(ad,{className:"h-5 w-5 text-gray-400 mr-2"}),i.jsxs("h3",{className:"text-xl text-gray-300 flex items-center",children:[i.jsx(cc,{className:"h-5 w-5 mr-2"}),"Chord Charts"]})]})}),Ge&&i.jsx("div",{className:"bg-gray-700 rounded-lg p-4 chord-charts-container relative","data-item-id":w.B,children:(()=>{const U=w.B,Fe=we[U],Xe=Fe?null:yi(U),bt=(Fe||Xe||[]).map((st,_t)=>i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("input",{type:"text",value:st.label,onChange:Yt=>{console.log("Updating section label:",st.id,Yt.target.value),Mo(U,st.id,{label:Yt.target.value})},className:"bg-gray-900 text-white px-2 py-1 rounded text-sm font-semibold border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Section name"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:st.repeatCount,onChange:Yt=>Mo(U,st.id,{repeatCount:Yt.target.value}),className:"bg-gray-900 text-white px-2 py-1 rounded text-sm w-6 text-center border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"x2",maxLength:"3"}),i.jsx("button",{onClick:()=>Bn(U,st.id),disabled:ye.size>0,className:`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold transition-colors ${ye.size>0?"bg-gray-500 cursor-not-allowed":"bg-red-600 hover:bg-red-700 cursor-pointer"} text-white`,title:ye.size>0?"Deleting...":"Delete section",children:ye.size>0?i.jsx(ma,{className:"h-3 w-3 animate-spin"}):""})]})]}),_t===0&&(()=>{const Yt=st.chords[0];if(!Yt)return null;const ft=Yt.tuning||"EADGBE",St=Yt.capo||0;return i.jsx("div",{className:"text-center text-white font-bold text-sm mb-3",children:St>0?`${ft} | Capo on ${St}`:ft})})(),st.chords.length>0&&i.jsx("div",{className:"space-y-2",children:(()=>{const Yt=[];let ft=[];return st.chords.forEach((St,Dr)=>{ft.push(St),(St.hasLineBreakAfter||ft.length>=5||Dr===st.chords.length-1)&&(Yt.push([...ft]),ft=[])}),Yt.map((St,Dr)=>i.jsx("div",{className:"grid grid-cols-5 gap-2",style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"0.5rem"},children:St.map(La=>i.jsx(pN,{chart:La,onEdit:(Pr,Ai)=>Rc(U,Pr,Ai),onDelete:Pr=>Lo(U,Pr),onInsertAfter:(Pr,Ai)=>_a(U,Pr,Ai)},La.id))},Dr))})()})]},st.id));return i.jsxs(i.Fragment,{children:[bt,(M[U]||[]).length>0?i.jsx("div",{className:"flex justify-end mb-2",children:i.jsx(De,{variant:"outline",size:"sm",onClick:_t=>{_t.stopPropagation(),Fo(U)},className:"p-2 border-gray-600 text-gray-400 hover:text-gray-200 hover:bg-gray-600",title:"Print chord charts",children:i.jsx(qm,{className:"h-4 w-4"})})}):null,(()=>{const st=M[U]||[],_t=ut[U],Yt=$t[U];return st.length===0?i.jsxs("div",{className:"w-full mb-4",children:[i.jsxs(De,{onClick:()=>It(ft=>({...ft,[U]:!ft[U]})),className:"w-full bg-gray-700 text-gray-300 hover:bg-gray-600 mb-2 flex items-center justify-center",children:[i.jsx(ei,{className:"h-4 w-4 mr-2"}),"Autocreate Chord Charts"]}),Yt&&i.jsxs("div",{className:"border border-gray-600/30 rounded-lg p-4 bg-gray-800/10",children:[i.jsxs("div",{className:"text-sm text-gray-400 mb-6",children:[i.jsx("p",{children:" Upload lyrics with chord names to create charts"}),i.jsx("p",{children:" Upload chord diagrams to import existing charts"})]}),!_t&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6 items-start",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"text-center mb-2",children:i.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Upload Files"})}),i.jsx("div",{className:`flex-1 p-4 border-2 border-dashed rounded-lg transition-colors cursor-pointer ${Nt[U]?"border-gray-500 bg-gray-800/20":"border-gray-600 hover:border-gray-500 bg-gray-800/10"}`,onDragOver:ft=>{ft.preventDefault(),wt(St=>St[U]!==!0?{...St,[U]:!0}:St)},onDragLeave:ft=>{ft.preventDefault(),wt(St=>St[U]!==!1?{...St,[U]:!1}:St)},onDrop:ft=>{ft.preventDefault(),wt(St=>({...St,[U]:!1})),Zn(U,ft.dataTransfer.files)},onClick:()=>{const ft=document.createElement("input");ft.type="file",ft.multiple=!0,ft.accept=".pdf,.png,.jpg,.jpeg",ft.onchange=St=>Zn(U,St.target.files),ft.click()},children:i.jsxs("div",{className:"text-center",children:[i.jsx(ei,{className:`h-12 w-12 mx-auto mb-2 ${Et[U]&&Et[U].length>0?"text-gray-300":"text-gray-400"}`}),i.jsx("p",{className:`text-sm font-medium mb-2 ${Et[U]&&Et[U].length>0?"text-gray-200":"text-gray-300"}`,children:"Drop files or click"}),i.jsx("p",{className:"text-gray-400 text-xs mb-2",children:"PDFs, images  5mb max"}),Et[U]&&Et[U].length>0?i.jsx("div",{children:i.jsxs("p",{className:"text-gray-300 text-xs font-medium mb-1",children:[Et[U].length," file(s)"]})}):i.jsx("p",{className:"text-gray-400 text-xs",children:"Lyrics or chord charts"})]})})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"text-center mb-2",children:i.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"YouTube Guitar Lesson"})}),i.jsx("div",{className:"flex-1 flex flex-col justify-center",children:i.jsx("input",{type:"url",placeholder:"YouTube guitar lesson URL (transcript required)",value:no[U]||"",onChange:ft=>{const St=ft.target.value.replace(/[<>"']/g,"");mn(Dr=>({...Dr,[U]:St}))},maxLength:500,className:"w-full p-3 bg-gray-700 text-white rounded border-2 border-gray-600 focus:border-gray-500 text-sm"})})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"text-center mb-2",children:i.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Manual Entry"})}),i.jsxs("div",{className:"flex-1 flex flex-col justify-center relative",children:[i.jsx("textarea",{placeholder:`Enter song section names and chord names, like this:
Intro
Am7 Em/A E7sus
Verse
C G/B Am (space or comma-separated)`,value:On[U]||"",onChange:ft=>{const St=ft.target.value;St.length<=500&&(vi(Dr=>({...Dr,[U]:St})),ks(St,U))},maxLength:500,className:`w-full p-3 text-white rounded border-2 focus:border-gray-500 text-sm resize-none min-h-[160px] ${fs[U]?"bg-red-900/20 border-red-500":"bg-gray-700 border-gray-600"}`}),i.jsxs("div",{className:"absolute bottom-1 right-2 text-xs text-gray-400",children:[(On[U]||"").length,"/500"]}),fs[U]&&i.jsx("div",{className:"mt-1 text-xs text-red-400",children:fs[U]})]})]})]}),i.jsx("div",{className:"flex justify-center",children:i.jsxs(De,{onClick:()=>Ts(U),disabled:_t||(Et[U]||[]).length===0&&!no[U]?.trim()&&!On[U]?.trim()||((Et[U]||[]).length>0?1:0)+(no[U]?.trim()?1:0)+(On[U]?.trim()?1:0)>1,className:"px-6",children:[i.jsx(Nd,{className:"h-4 w-4 mr-2"}),"Create Chord Charts"]})})]}),i.jsx("div",{className:"w-full p-6 border-2 border-dashed rounded-lg mt-4 bg-gray-800/10 border-gray-600/50",children:i.jsxs("div",{className:"text-center",children:[_t==="checking_transcripts"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-500"}),i.jsx("span",{className:"text-yellow-400",children:"Checking for transcripts..."})]}),i.jsx("br",{}),i.jsxs(De,{variant:"outline",size:"sm",onClick:()=>vr(U),className:"text-gray-400 hover:text-gray-200 border-gray-600",children:[i.jsx(Dn,{className:"h-3 w-3 mr-1"}),"Cancel"]})]}),_t==="reading_transcript"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-500"}),i.jsx("span",{className:"text-gray-400",children:"Reading transcript..."})]}),i.jsx("br",{}),i.jsxs(De,{variant:"outline",size:"sm",onClick:()=>vr(U),className:"text-gray-400 hover:text-gray-200 border-gray-600",children:[i.jsx(Dn,{className:"h-3 w-3 mr-1"}),"Cancel"]})]}),_t==="uploading"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-500"}),i.jsx("span",{className:"text-gray-400",children:"Uploading files..."})]}),i.jsx("br",{}),i.jsxs(De,{variant:"outline",size:"sm",onClick:()=>vr(U),className:"text-gray-400 hover:text-gray-200 border-gray-600",children:[i.jsx(Dn,{className:"h-3 w-3 mr-1"}),"Cancel"]})]}),_t==="processing_transcript"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-500"}),i.jsx("span",{className:"text-white",children:"Processing transcript..."})]}),i.jsx("br",{}),i.jsxs(De,{variant:"outline",size:"sm",onClick:()=>vr(U),className:"text-gray-400 hover:text-gray-200 border-gray-600",children:[i.jsx(Dn,{className:"h-3 w-3 mr-1"}),"Cancel"]})]}),_t==="processing"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-500"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-white",children:oo[hr]}),i.jsx("div",{className:"ml-2 animate-spin",children:""})]})]}),i.jsx("br",{}),i.jsxs(De,{variant:"outline",size:"sm",onClick:()=>vr(U),className:"text-gray-400 hover:text-gray-200 border-gray-600",children:[i.jsx(Dn,{className:"h-3 w-3 mr-1"}),"Cancel"]})]}),_t==="complete"&&i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx(sa,{className:"h-4 w-4 text-green-500"}),i.jsx("span",{className:"text-green-400",children:"Chord charts created!"})]}),_t==="error"&&i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx(lr,{className:"h-4 w-4 text-red-500"}),i.jsx("span",{className:"text-red-400",children:"Error processing files. Please try again."})]}),!_t&&i.jsx(i.Fragment,{children:M[U]&&M[U].length>0?i.jsxs(i.Fragment,{children:[i.jsx(lr,{className:"h-8 w-8 text-orange-400 mx-auto mb-2"}),i.jsx("p",{className:"text-orange-300 font-medium mb-1",children:"Chord charts already exist"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Please delete all chord charts from this song before using autocreate"})]}):i.jsx(i.Fragment,{children:(Et[U]||[]).length>0?i.jsxs(i.Fragment,{children:[i.jsx(Gl,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-gray-300 font-medium mb-1",children:"Ready to create chord charts"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Click 'Create chord charts'"})]}):i.jsxs(i.Fragment,{children:[i.jsx(Gl,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-gray-300 font-medium mb-1",children:"Add a file above, then click 'Create Chord Charts'"}),i.jsx("p",{className:"text-gray-400 text-xs",children:"(The results will probably contain errors, use the edit icon to make any corrections needed.)"})]})})})]})})]})]}):i.jsxs(De,{variant:"outline",onClick:()=>Pc(U),className:"w-full mb-4 text-orange-300 hover:bg-orange-800 hover:border-orange-600",children:[i.jsx(ei,{className:"h-4 w-4 mr-2"}),"Replace with autocreated charts"]})})(),i.jsx(De,{variant:"default",onClick:()=>{Q({itemId:U,scrollPosition:window.scrollY}),q(st=>({...st,[U]:!0})),setTimeout(()=>{const st=document.querySelector(`[data-editor-for-item="${U}"]`);st&&st.scrollIntoView({behavior:"smooth",block:"start"})},100)},className:"w-full mb-4",children:"+ Add New Chord"}),i.jsx(De,{variant:"default",onClick:()=>Tc(U),className:"w-full mb-4",children:"+ Add New Section"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4 w-full",children:[i.jsx(De,{variant:"default",onClick:()=>Bo(U),className:"w-full sm:w-1/2",children:"Copy chord charts from other song"}),i.jsx(De,{variant:"default",onClick:()=>Ac(U),disabled:!M[U]||M[U].length===0,className:"w-full sm:w-1/2 bg-purple-700 text-purple-300 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Copy chord charts to other song"})]}),z[U]&&i.jsx("div",{"data-editor-for-item":U,children:i.jsx(vv,{itemId:U,defaultTuning:G?.H||"EADGBE",editingChordId:oe,insertionContext:Te,onSave:st=>Io(U,st),onCancel:()=>{q(st=>({...st,[U]:!1})),be(null),je(null),qn()}})})]})})()}),i.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-700 rounded cursor-pointer",onClick:U=>Ei(w.A,U),children:[i.jsxs("div",{className:"flex items-center",children:[_?i.jsx(Bl,{className:"h-5 w-5 text-gray-400 mr-2"}):i.jsx(ad,{className:"h-5 w-5 text-gray-400 mr-2"}),i.jsxs("h3",{className:"text-xl text-gray-300 flex items-center",children:[i.jsx(Jm,{className:"h-5 w-5 mr-2"}),"Notes"]})]}),i.jsxs(De,{variant:"outline",size:"sm",className:"text-gray-300",onClick:U=>{U.stopPropagation(),Pa(w.B,U)},children:[i.jsx(ga,{className:"h-4 w-4 mr-2"}),ne?"Edit note":"Add note"]})]}),_&&ne&&i.jsx("div",{className:"px-4",children:i.jsx("div",{className:"bg-gray-700 p-3 rounded",children:i.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:ne})})}),i.jsx("div",{className:"mt-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[G?.F&&tf()&&i.jsxs("button",{onClick:U=>{U.stopPropagation();const Fe=G?.C||`Item ${w.A}`;m0(Fe,G.F),fetch("/api/open-folder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:G.F})}).catch(Xe=>console.error("Error opening folder:",Xe))},className:"text-gray-400 hover:text-gray-300 hover:underline flex items-center",children:[i.jsx(Xm,{className:"h-4 w-4 mr-2"}),"Open Songbook Folder"]}),G?.H&&i.jsx("span",{className:"text-sm font-mono font-bold text-gray-400",children:G.H})]})})]}),i.jsx("div",{className:"mt-8",children:i.jsx(De,{variant:"outline",className:"w-full text-gray-300 hover:text-white",onClick:U=>Ss(w.A,U),children:"Mark as done"})})]}),d.has(w.A)&&i.jsx("div",{className:"px-5 pb-5",children:i.jsx("div",{className:"text-gray-400"})})]},w.A)})}),i.jsx(fN,{open:b,onOpenChange:E,itemId:S,currentNote:S?y[S]:"",onNoteSave:Oa}),ce&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsx("div",{className:`bg-gray-700 rounded-lg p-6 ${K||Ie==="complete"?"max-w-xs":"w-full max-w-md"} max-h-[80vh] flex flex-col`,onWheel:w=>w.stopPropagation(),children:Ie==="complete"?i.jsxs(i.Fragment,{children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Success!"}),i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[i.jsx(sa,{className:"h-6 w-6 text-green-500"}),i.jsx("span",{className:"text-green-400 text-lg",children:"Chord charts copied successfully!"})]}),i.jsx(De,{onClick:$o,className:"w-full bg-green-600 hover:bg-green-700",children:"Done"})]}):K?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Confirm Overwrite"}),i.jsxs("p",{className:"text-gray-300 mb-4",children:[se.size," of the selected songs already have chord charts. Copying will replace all existing chord charts in those songs."]}),i.jsxs("div",{className:"bg-gray-600 rounded p-3 mb-4",children:[i.jsx("p",{className:"text-sm text-gray-200 mb-2 font-medium",children:"Songs that will be overwritten:"}),i.jsx("ul",{className:"text-sm text-gray-300 space-y-1",children:ws.filter(w=>Pe.has(w.A)&&se.has(w.A)).map(w=>i.jsxs("li",{className:"flex items-center",children:[i.jsx("span",{className:"text-yellow-400 mr-2",children:""}),w.C||"Unknown Song"]},w.A))})]}),i.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"This action cannot be undone."}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(De,{variant:"outline",onClick:zo,className:"flex-1",children:"Go Back"}),i.jsx(De,{onClick:Dc,className:"flex-1 bg-red-600 hover:bg-red-700",children:"Yes, Overwrite"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Copy Chord Charts"}),i.jsxs("p",{className:"text-gray-300 mb-2",children:['Copy chord charts from "',c?.find(w=>w.B===D)?.C||"Unknown Song",'" to:']}),i.jsx("input",{type:"text",placeholder:"Search songs...",value:Se,onChange:w=>Me(w.target.value),className:"w-full p-2 mb-4 bg-gray-700 text-white rounded border border-gray-600 focus:border-purple-500"}),i.jsx("div",{className:"flex-1 overflow-y-auto mb-4 min-h-0 modal-scroll",children:ws.map(w=>i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("input",{type:"checkbox",id:`copy-item-${w.A}`,checked:Pe.has(w.A),onChange:()=>Es(w.A),className:"mr-3"}),i.jsxs("label",{htmlFor:`copy-item-${w.A}`,className:"text-white cursor-pointer flex-1 flex items-center",children:[i.jsx("span",{children:w.C||"Untitled"}),se.has(w.A)&&i.jsx("span",{className:"text-yellow-400 ml-2 text-sm",children:" will overwrite"})]})]},w.A))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(De,{variant:"outline",onClick:$o,className:"flex-1",children:"Cancel"}),i.jsx(De,{onClick:ji,disabled:Pe.size===0,style:Pe.size===0?{backgroundColor:"#4b5563",color:"#d1d5db",opacity:"1"}:se.size>0?{backgroundColor:"#dc2626",color:"#ffffff",opacity:"1"}:{backgroundColor:"#5b1f1f",color:"#ffffff",opacity:"1"},className:"flex-1 bg-purple-600 hover:bg-purple-700 disabled:cursor-not-allowed",children:se.size>0?`Copy and Overwrite ${Pe.size} song${Pe.size!==1?"s":""}`:`Copy to ${Pe.size} song${Pe.size!==1?"s":""}`})]})]})})}),ge&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 w-full max-w-md max-h-[80vh] flex flex-col",onWheel:w=>w.stopPropagation(),children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Copy Chord Charts From Other Song"}),i.jsxs("p",{className:"text-gray-300 mb-2",children:['Copy chord charts to "',c?.find(w=>w.B===ot)?.C||"Unknown Song",'" from:']}),i.jsx("input",{type:"text",placeholder:"Search songs with chord charts...",value:He,onChange:w=>tt(w.target.value),className:"w-full p-2 mb-4 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500"}),i.jsx("div",{className:"flex-1 overflow-y-auto mb-4 min-h-0 modal-scroll",children:bi.map(w=>i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("input",{type:"radio",id:`copy-from-item-${w.A}`,name:"copyFromSource",checked:xt===w.B,onChange:()=>Ue(w.B),className:"mr-3"}),i.jsxs("label",{htmlFor:`copy-from-item-${w.A}`,className:"flex-1 cursor-pointer text-white hover:text-gray-300",children:[w.C||"Unknown Song",i.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:["(",Xn[w.B]||0," charts)"]})]})]},w.A))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(De,{variant:"outline",onClick:gr,className:"flex-1",children:"Cancel"}),i.jsx(De,{onClick:js,disabled:!xt,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Copy Chord Charts"})]})]})}),i.jsx(Eo,{open:Ke,onOpenChange:Qe,children:i.jsxs(Ur,{children:[i.jsxs(Vr,{children:[i.jsxs(Hr,{className:"flex items-center space-x-2",children:[i.jsx(lr,{className:"h-5 w-5 text-orange-500"}),i.jsx("span",{children:"Replace Existing Chord Charts"})]}),i.jsx(Gr,{children:"This song already has chord charts. To use autocreate, all existing chord charts must be deleted first. This action cannot be undone."})]}),i.jsxs(Wr,{children:[i.jsx(jo,{onClick:()=>{Qe(!1),it(null)},children:"Cancel"}),i.jsx(Nr,{onClick:Oc,className:"bg-orange-500 hover:bg-orange-600 text-white border-orange-500 shadow-lg font-medium",children:"Delete All & Autocreate"})]})]})}),i.jsx(Eo,{open:zt,onOpenChange:Ot,children:i.jsxs(Ur,{className:"w-80 min-h-[600px]",children:[i.jsxs(Vr,{children:[i.jsxs(Hr,{className:"flex items-center space-x-2",children:[i.jsx(lr,{className:"h-5 w-5 text-blue-500"}),i.jsx("span",{children:"Mixed Content Detected"})]}),i.jsx(Gr,{children:"Your file contains both chord names and chord charts. How would you like to process it?"})]}),i.jsxs("div",{className:"space-y-4 my-8",children:[i.jsxs(Nr,{onClick:()=>Ri("chord_names"),className:"w-full h-auto p-6 flex flex-col items-center bg-slate-700 hover:bg-slate-600 text-white",children:[i.jsx("div",{className:"font-medium",children:"Process Chord Names"}),i.jsx("div",{className:"text-sm text-slate-300 mt-1",children:"(standard tuning)"})]}),i.jsx(Nr,{onClick:()=>Ri("chord_charts"),className:"w-full p-4 bg-slate-700 hover:bg-slate-600 text-white",children:"Import Chord Charts"})]}),i.jsx(Wr,{children:i.jsx(jo,{onClick:()=>{Ot(!1),$(null)},children:"Cancel"})})]})}),i.jsx(Eo,{open:te,onOpenChange:ie,children:i.jsxs(Ur,{children:[i.jsxs(Vr,{children:[i.jsxs(Hr,{className:"flex items-center space-x-2",children:[i.jsx(lr,{className:"h-5 w-5 text-red-500"}),i.jsx("span",{children:Ee?.title||"Format Not Supported"})]}),i.jsx(Gr,{children:Ee?.message||"Sorry, we can only build chord charts. This file format is not supported."})]}),i.jsx(Wr,{children:i.jsx(Nr,{onClick:()=>{ie(!1),he(null)},children:"OK"})})]})}),i.jsx(Eo,{open:Sn,onOpenChange:sn,children:i.jsxs(Ur,{children:[i.jsxs(Vr,{children:[i.jsx(Hr,{children:"Are you sure you wanna do that?"}),i.jsx(Gr,{children:"You'll have to wait just as long next time if you start over"})]}),i.jsxs(Wr,{children:[i.jsx(jo,{onClick:Ma,children:"*sigh* Ok, I'll wait..."}),i.jsx(Nr,{onClick:Ti,children:"Yes, damnit, cancel!"})]})]})}),i.jsx(Md,{isOpen:ze,onClose:()=>{de(!1),Oe(null)},error:Ae}),i.jsx(Id,{isOpen:nt,onClose:()=>{et(!1),Ht(null)},autocreateData:at}),ps&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 w-full max-w-md max-h-[80vh] flex flex-col",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"No Transcripts Available"}),i.jsx("p",{className:"text-gray-300 mb-4",children:"Oh, drag. This YouTube video doesn't have transcripts on it. So, go find a free tool to generate transcripts from YouTube videos, then copy/paste the transcript below:"}),i.jsx("textarea",{value:ro,onChange:w=>vs(w.target.value),placeholder:"Paste the transcript here...",className:"w-full h-32 p-3 bg-gray-800 text-white rounded border border-gray-600 focus:border-red-500 resize-none mb-4",maxLength:25e3}),i.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:[ro.length,"/25,000 characters"]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(De,{variant:"outline",onClick:()=>{ms(!1),gs(null),vs("")},className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-600",children:"Cancel"}),i.jsxs(De,{variant:"outline",onClick:async()=>{if(!ro.trim()){alert("Please paste a transcript before proceeding.");return}const{itemId:w}=ja;ms(!1),gs(null),await Uo(w,ro),vs("")},disabled:!ro.trim(),className:`flex-1 ${ro.trim()?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-600 text-gray-500 cursor-not-allowed"}`,children:[i.jsx(Nd,{className:"h-4 w-4 mr-2"})," Create chord charts"]})]})]})}),i.jsx(Do,{open:Tt,onOpenChange:w=>!w&&ys(!1),children:i.jsxs(Jr,{className:"sm:max-w-md",children:[i.jsxs(qr,{children:[i.jsxs(Zr,{className:"flex items-center gap-2",children:[i.jsx(lr,{className:"h-6 w-6 text-orange-500"}),"No Chord Names Found"]}),i.jsx(eo,{className:"text-left space-y-1",children:i.jsx("p",{children:"So, um, we can't find any chord names mentioned in this video. Sorry, we can't create tablature yet, just chord charts."})})]}),i.jsx("div",{className:"flex justify-end gap-2 -mt-2",children:i.jsx(De,{onClick:()=>ys(!1),className:"min-w-20",children:"Ok"})})]})})]})},uy=()=>{const[n,r]=f.useState(!1),[s,l]=f.useState(!1),[c,d]=f.useState(!0),[h,m]=f.useState(null),g=f.useCallback(async()=>{try{const y=await fetch("/api/auth/status");if(!y.ok)throw new Error("Auth check failed");const N=await y.json();r(N.authenticated),l(N.hasSpreadsheetAccess),m(null)}catch(y){console.error("Auth check failed:",y),r(!1),l(!1),m(y.message)}finally{d(!1)}},[]);return f.useEffect(()=>{g();const y=setInterval(g,900*1e3);return()=>clearInterval(y)},[g]),{isAuthenticated:n,hasSpreadsheetAccess:s,checking:c,error:h,handleLogin:()=>{window.location.href="/authorize"},handleLogout:()=>{window.location.href="/logout"},checkAuth:g}},gN=()=>{const{isAuthenticated:n,hasSpreadsheetAccess:r,checking:s,error:l,handleLogin:c,handleLogout:d}=uy();return i.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[n&&!r&&i.jsx("span",{className:"text-sm text-red-400",children:"Log in with gmail acct instead"}),i.jsx(De,{onClick:n?d:c,variant:n?"ghost":"default",className:n?"text-gray-400 hover:text-gray-200":"bg-blue-600 hover:bg-blue-700 text-gray-100",disabled:s,children:s?i.jsxs(i.Fragment,{children:[i.jsx(ma,{className:"mr-2 h-4 w-4 animate-spin"}),"Checking auth..."]}):l?"Auth Error - Click to retry":n?"logout":i.jsxs(i.Fragment,{children:[i.jsx(C0,{className:"mr-2 h-4 w-4"}),"Let me in"]})})]})},vN=({className:n})=>{const{activePage:r,setActivePage:s}=Xd(),l=["Practice","Routines","Items"];return i.jsxs("nav",{className:vt("flex flex-wrap items-center gap-4",n),children:[i.jsx("div",{className:"flex flex-wrap gap-4",children:l.map(c=>i.jsx(De,{variant:r===c?"secondary":"ghost",className:vt("text-xl py-6 px-8",r===c?"bg-secondary hover:bg-secondary/90":"hover:bg-accent"),onClick:()=>s(c),children:c},c))}),i.jsx(gN,{})]})},yN=(n=null,r=null,s=[])=>{const[l,c]=f.useState([]),[d,h]=f.useState({}),[m,g]=f.useState(""),[v,x]=f.useState(!0),[y,N]=f.useState(null);f.useEffect(()=>{r?.items?(c(r.items),x(!1)):n?b():(c([]),x(!1))},[n,r]);const b=async()=>{try{const T=await fetch(`/api/routines/${n}/details`);if(!T.ok)throw new Error("Failed to fetch routine");const F=(await T.json()).items.sort((M,H)=>parseInt(M.routineEntry.C)-parseInt(H.routineEntry.C));c(F),N(null)}catch(T){N(T.message),console.error("Fetch error:",T)}finally{x(!1)}};return{availableItems:f.useMemo(()=>{const T=new Set(l.map(F=>F.itemDetails?.B||F.routineEntry?.B));return s.filter(F=>{const M=T.has(F.B),H=ye=>ye.replace(/[''`]/g,"'"),z=F.C||"",q=H(z.toLowerCase()),we=H(m.toLowerCase()),ae=q.includes(we);return!M&&ae})},[s,l,m]),selectedItems:l,setSelectedItems:c,searchQuery:m,setSearchQuery:g,loading:v,error:y,addToRoutine:async(T,L)=>{try{if(!(await fetch(`/api/routines/${T}/items`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemId:L})})).ok)throw new Error("Failed to add item to routine");return await b(),!0}catch(F){return console.error("Error adding item:",F),!1}},removeFromRoutine:async(T,L)=>{try{const F=await fetch(`/api/routines/${T}/items/${L}`,{method:"DELETE"});if(!F.ok){const M=await F.json().catch(()=>({}));throw new Error(M.message||"Failed to remove item from routine")}return c(M=>M.filter(H=>H.routineEntry.A!==L)),!0}catch(F){return console.error("Error removing item:",F),!1}},updateRoutineOrder:async(T,L)=>{try{const F=L.map(z=>({A:z.A,C:z.C})),M=`/api/routines/${T}/order`,H=await fetch(M,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!H.ok){const z=await H.json().catch(()=>({}));throw console.error("Order update failed:",z),new Error(z.message||"Failed to update routine order")}return await b(),!0}catch(F){return console.error("Error updating routine order:",F),!1}}}},xN=Ct.memo(({item:n,onAdd:r})=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800 rounded-lg",children:[i.jsx("span",{className:"text-lg",children:n.C}),i.jsx(De,{variant:"ghost",size:"sm",onClick:()=>r(n),className:"text-blue-500 hover:text-blue-400",children:i.jsx(ga,{className:"h-4 w-4"})})]})),wN=Ct.memo(({item:n,onRemove:r})=>{const{attributes:s,listeners:l,setNodeRef:c,transform:d,transition:h,isDragging:m}=Nc({id:n.routineEntry?.A||n.A}),g={transform:Ao.Transform.toString(d),transition:h,zIndex:m?1:0};return i.jsxs("div",{ref:c,style:g,className:`flex items-center justify-between p-4 ${m?"bg-gray-700":"bg-gray-800"} rounded-lg`,children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{...s,...l,children:i.jsx(lc,{className:"h-5 w-5 text-gray-500 mr-4 cursor-move"})}),i.jsx("span",{className:"text-lg",children:n.itemDetails?.C||"Loading..."})]}),i.jsx(De,{variant:"ghost",size:"sm",onClick:()=>r(n.routineEntry?.A||n.A),className:"text-red-500 hover:text-red-400",children:i.jsx(Dn,{className:"h-4 w-4"})})]})}),CN=({open:n,onOpenChange:r,routine:s=null,onRoutineChange:l,items:c=[]})=>{const{availableItems:d,selectedItems:h,setSelectedItems:m,searchQuery:g,setSearchQuery:v,loading:x,error:y,addToRoutine:N,removeFromRoutine:b,updateRoutineOrder:E}=yN(s?.id,s?.details,c),[S,j]=f.useState(s?.name||""),[A,T]=f.useState(null);f.useEffect(()=>{n&&T(null)},[n]),f.useEffect(()=>{},[s]);const L=Df(li(Na,{activationConstraint:{delay:100,tolerance:5}}),li(Sa,{coordinateGetter:_f})),F=async({active:z,over:q})=>{if(z.id!==q?.id){const we=h.findIndex(oe=>(oe.routineEntry?.A||oe.A)===z.id),ae=h.findIndex(oe=>(oe.routineEntry?.A||oe.A)===q.id),ye=ci(h,we,ae),xe=ye.map((oe,be)=>({A:oe.routineEntry?.A||oe.A,C:be.toString()}));if(m(ye),s?.id)try{await E(s.id,xe),l&&l()}catch(oe){console.error("Failed to update routine order:",oe),m(h)}}},M=async z=>{try{if(T(null),!s?.id)m(q=>[...q,{routineEntry:{A:z.A,B:z.B,C:q.length.toString(),D:"FALSE"},itemDetails:z}]);else{if(!await N(s.id,z.B))throw new Error("Failed to add item to routine");l?.()}}catch(q){T(q.message),console.error("Error adding item:",q)}},H=async z=>{try{if(T(null),!s?.id)m(q=>q.filter(we=>we.routineEntry.A!==z));else{if(!await b(s.id,z))throw new Error("Failed to remove item from routine");l?.()}}catch(q){T(q.message),console.error("Error removing item:",q)}};return x?i.jsx("div",{className:"text-2xl text-center p-8",children:"Loading..."}):y?i.jsx("div",{className:"text-2xl text-red-500 text-center p-8",children:y}):i.jsx(Do,{open:n,onOpenChange:r,children:i.jsxs(Jr,{className:"max-w-4xl max-h-[80vh]",children:[i.jsxs(qr,{children:[i.jsx(Zr,{children:s?`Edit Routine: ${s.name}`:"Create New Routine"}),i.jsx(eo,{children:"Add or remove items and arrange them in your preferred order"}),A&&i.jsx("div",{className:"mt-2 text-sm text-red-500",children:A})]}),i.jsxs("div",{className:"flex gap-8 h-[60vh]",children:[i.jsxs(ss,{className:"w-1/2 bg-gray-900",children:[i.jsxs(si,{children:[i.jsx(Yr,{children:"Selected Items"}),!s?.name&&i.jsx(xn,{placeholder:"Enter routine name...",value:S,onChange:z=>j(z.target.value),className:"mt-2",autocomplete:"off"})]}),i.jsx(is,{className:"space-y-4 overflow-y-auto h-[calc(100%-100px)]",children:i.jsx(rc,{sensors:L,collisionDetection:tc,onDragEnd:F,children:i.jsx(sc,{items:h.map(z=>z.routineEntry?.A||z.A).filter(z=>z!=null),strategy:oc,children:i.jsx("div",{className:"space-y-4",children:h.filter(z=>(z.routineEntry?.A||z.A)!=null).map(z=>i.jsx(wN,{item:z,onRemove:H},z.routineEntry?.A||z.A))})})})})]}),i.jsxs(ss,{className:"w-1/2 bg-gray-900",children:[i.jsxs(si,{children:[i.jsx(Yr,{children:"Available Items"}),i.jsxs("div",{className:"relative",children:[i.jsx(b0,{className:"absolute left-3 top-3 h-4 w-4 text-gray-500"}),i.jsx(xn,{className:"pl-9",placeholder:"Search items...",value:g,onChange:z=>v(z.target.value),autocomplete:"off"})]})]}),i.jsx(is,{className:"space-y-4 overflow-y-auto h-[calc(100%-100px)]",children:d.map(z=>i.jsx(xN,{item:z,onAdd:M},z.A))})]})]})]})})},bN=Ct.memo(({item:n,itemDetails:r,handleOpenChordCharts:s})=>{const{attributes:l,listeners:c,setNodeRef:d,transform:h,transition:m,isDragging:g}=Nc({id:n.routineEntry?.A||n.A}),v={transform:Ao.Transform.toString(h),transition:m,zIndex:g?1:0};return i.jsxs("div",{ref:d,style:v,className:`flex items-center justify-between p-4 rounded-lg ${g?"bg-gray-700":"bg-gray-800"}`,children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{...l,...c,children:i.jsx(lc,{className:"h-5 w-5 text-gray-500 mr-4 cursor-move"})}),i.jsx("span",{className:"text-lg",children:r?.C||`Item ${n.routineEntry?.B||n.B}`})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(cc,{className:"h-5 w-5 text-blue-400 cursor-pointer hover:text-blue-300",onClick:()=>s(n.routineEntry?.B||n.B,r?.C||`Item ${n.routineEntry?.B||n.B}`),title:"View chord charts"}),(n.routineEntry?.D||n.D)==="TRUE"&&i.jsx(Jd,{className:"h-5 w-5 text-green-500"})]})]})}),SN=Ct.memo(({routine:n,handleActivateRoutine:r,handleEditClick:s,handleDeleteClick:l})=>{const{attributes:c,listeners:d,setNodeRef:h,transform:m,transition:g,isDragging:v}=Nc({id:n.ID}),x={transform:Ao.Transform.toString(m),transition:g,zIndex:v?1:0};return i.jsxs("div",{ref:h,style:x,className:`flex items-center justify-between p-3 ${v?"bg-gray-700":"bg-gray-800"} rounded-lg`,children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{...c,...d,children:i.jsx(lc,{className:"h-5 w-5 text-gray-500 mr-4 cursor-move"})}),i.jsx("span",{children:n.name})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(De,{variant:"ghost",size:"sm",onClick:()=>r(n.ID),className:"text-green-500 hover:text-green-400",children:i.jsx(ga,{className:"h-4 w-4"})}),i.jsx(De,{variant:"ghost",size:"sm",onClick:()=>s(n),className:"text-blue-500 hover:text-blue-400",children:i.jsx(qd,{className:"h-4 w-4"})}),i.jsx(De,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-400",onClick:()=>l(n.ID),children:i.jsx(Dn,{className:"h-4 w-4"})})]})]})}),NN=()=>{const{isAuthenticated:n,checking:r}=uy(),[s,l]=f.useState([]),[c,d]=f.useState(""),[h,m]=f.useState([]),[g,v]=f.useState(!0),[x,y]=f.useState(null),[N,b]=f.useState(!1),[E,S]=f.useState(null),[j,A]=f.useState(null),[T,L]=f.useState([]),[F,M]=f.useState(!1),[H,z]=f.useState(null),[q,we]=f.useState(""),ae=f.useRef(null),ye=f.useRef(null),xe=f.useMemo(()=>h.find(K=>K.active),[h]),oe=f.useMemo(()=>h.filter(K=>!K.active).sort((K,ee)=>Number(K.order)-Number(ee.order)),[h]),be=Df(li(Na,{activationConstraint:{delay:100,tolerance:5}}),li(Sa,{coordinateGetter:_f})),Te=f.useCallback(async()=>{if(!n){v(!1);return}try{A(null);const K=await fetch("/api/routines");if(!K.ok)throw new Error("Failed to fetch routines");const ee=await K.json();m(ee)}catch(K){console.error("Error:",K),A(K.message)}finally{v(!1)}},[n]),je=f.useCallback(async()=>{if(s.length===0)try{const K=await fetch("/api/items");if(!K.ok)throw new Error("Failed to fetch items");const ee=await K.json();l(ee)}catch(K){console.error("Error fetching items:",K),A(K.message)}},[s.length]),me=f.useCallback(async K=>{try{if(!(await fetch(`/api/routines/${K}/active`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:!0})})).ok)throw new Error("Failed to activate routine");await Te()}catch(ee){console.error("Error:",ee),A(ee.message)}},[Te]),Q=f.useCallback(async K=>{try{if(!(await fetch(`/api/routines/${K}/active`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:!1})})).ok)throw new Error("Failed to deactivate routine");await Te()}catch(ee){console.error("Error:",ee),A(ee.message)}},[Te]),ce=f.useCallback(K=>{y(h.find(ee=>ee.ID===K))},[h]),ue=f.useCallback((K,ee)=>{z(K),we(ee),M(!0)},[]),D=f.useCallback(async()=>{if(x)try{if(!(await fetch(`/api/routines/${x.ID}`,{method:"DELETE"})).ok)throw new Error("Failed to delete routine");ca("deleted","routine",x.Name),await Te()}catch(K){console.error("Failed to delete routine:",K),A(K.message)}finally{y(null)}},[x,Te]),J=f.useCallback(async()=>{if(c.trim())try{if(!(await fetch("/api/routines",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({routineName:c.trim()})})).ok)throw new Error("Failed to create routine");ca("created","routine",c.trim()),await Te(),d("")}catch(K){console.error("Failed to create routine:",K),A(K.message)}},[c,Te]),Se=f.useCallback(async K=>{await je();const ee=K.active?{id:K.ID,name:K.name,items:T.map(Ke=>({routineEntry:Ke.routineEntry||Ke,itemDetails:Ke.itemDetails}))}:null;S({id:K.ID,name:K.name,details:ee}),b(!0)},[T,je]),Me=f.useCallback(async()=>{await Te();const K=h.find(Ke=>Ke.active);if(!K){L([]);return}const ee=await fetch(`/api/routines/${K.ID}`);if(ee.ok){const Qe=(await ee.json()).items.sort((Be,it)=>parseInt(Be.routineEntry.C)-parseInt(it.routineEntry.C)).map(Be=>({...Be,itemDetails:Be.itemDetails||Be}));L(Qe)}},[Te,h]),Pe=f.useCallback(async()=>{try{const K=h.find(Be=>Be.active);if(!K){L([]);return}const ee=await fetch(`/api/routines/${K.ID}`);if(!ee.ok)throw new Error("Failed to fetch routine details");const Qe=(await ee.json()).items.sort((Be,it)=>parseInt(Be.routineEntry.C)-parseInt(it.routineEntry.C)).map(Be=>({...Be,itemDetails:Be.itemDetails||Be}));L(Qe),fetch("/api/debug/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:`LOAD: Active routine items loaded: ${Qe.length} items`,level:"info"})}),Qe.length>0&&fetch("/api/debug/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:`LOAD: Sortable IDs: ${Qe.map(Be=>Be.routineEntry?.A||Be.A).join(", ")}`,level:"info"})})}catch(K){console.error("Error fetching routine items:",K),A(K.message)}},[h]);f.useEffect(()=>{Pe()},[Pe]);const Le=async({active:K,over:ee})=>{if(fetch("/api/debug/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:`ACTIVE ROUTINE handleDragEnd called: active=${K?.id}, over=${ee?.id}`,level:"info"})}),!K||!ee||K.id===ee.id){fetch("/api/debug/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"ACTIVE ROUTINE Drag end early return - no valid drag",level:"info"})});return}const Ke=T.findIndex(Be=>(Be.routineEntry?.A||Be.A)===K.id),Qe=T.findIndex(Be=>(Be.routineEntry?.A||Be.A)===ee.id);fetch("/api/debug/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:`ACTIVE ROUTINE Indices: old=${Ke}, new=${Qe}, activeId=${K.id}, overId=${ee.id}`,level:"info"})});try{const Be=await fetch("/api/routines/active");if(!Be.ok)throw new Error("Failed to fetch active routine");const ut=(await Be.json()).A;if(!ut)throw new Error("No active routine found");const Z=ci(T,Ke,Qe),Ie=Z.map((ke,He)=>({A:ke.routineEntry?.A||ke.A,C:He.toString()}));L(Z);const Je=`/api/routines/${ut}/order`,ge=await fetch(Je,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ie)});if(!ge.ok){const ke=await ge.text();throw new Error(`Failed to update routine order: ${ke}`)}await Pe()}catch(Be){console.error("Reorder failed:",Be),await Pe()}},se=f.useCallback(async K=>{try{const ee=await fetch("/api/routines/order",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)});if(!ee.ok){const Ke=await ee.text();throw new Error(`Failed to update routine order: ${Ke}`)}}catch(ee){console.error("Failed to save routine order:",ee),A("Failed to save routine order. Please refresh the page."),await Te()}},[Te]),Re=({active:K,over:ee})=>{if(fetch("/api/debug/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:`INACTIVE ROUTINES handleDragEnd called: active=${K?.id}, over=${ee?.id}`,level:"info"})}),!K||!ee||K.id===ee.id)return;const Ke=oe.findIndex(ut=>ut.ID===K.id),Qe=oe.findIndex(ut=>ut.ID===ee.id),it=ci(oe,Ke,Qe).map((ut,Z)=>({A:ut.ID,D:Z.toString()}));m(ut=>{const Z=ut.find(Je=>Je.active),Ie=it.map(Je=>({...ut.find(ke=>ke.ID===Je.A),order:Je.D}));return Z?[Z,...Ie]:Ie}),ye.current=it,ae.current&&clearTimeout(ae.current),ae.current=setTimeout(()=>{ye.current&&(se(ye.current),ye.current=null)},500)};return f.useEffect(()=>{r||(v(!0),Te())},[r,Te]),f.useEffect(()=>()=>{ae.current&&(clearTimeout(ae.current),ye.current&&se(ye.current))},[se]),r?i.jsx("div",{className:"text-center p-8",children:i.jsx("h2",{className:"text-2xl mb-4",children:"Checking authentication..."})}):g?i.jsx("div",{className:"text-center p-8",children:i.jsx("h2",{className:"text-2xl mb-4",children:"Loading routines..."})}):j?i.jsxs("div",{className:"text-center p-8",children:[i.jsxs("h2",{className:"text-2xl text-red-500 mb-4",children:["Error: ",j]}),i.jsx(De,{onClick:Te,className:"bg-blue-600 hover:bg-blue-700",children:"Retry"})]}):n?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(ss,{className:"bg-gray-900 text-gray-100",children:[i.jsx(si,{children:i.jsx(Yr,{children:"Current Active Routine"})}),i.jsx(is,{children:n?xe?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center",children:[i.jsx(Jd,{className:"h-5 w-5 text-green-500 mr-2"}),xe.name]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(De,{variant:"ghost",size:"sm",onClick:()=>Se(xe),className:"text-blue-500 hover:text-blue-400",children:i.jsx(qd,{className:"h-4 w-4"})}),i.jsx(De,{variant:"ghost",size:"sm",onClick:()=>Q(xe.ID),className:"text-gray-400 hover:text-gray-200",children:i.jsx(Dn,{className:"h-4 w-4"})})]})]}),i.jsx(rc,{sensors:be,collisionDetection:tc,onDragStart:K=>{fetch("/api/debug/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:`ACTIVE ROUTINE Drag started: ${K.active.id}`,level:"info"})})},onDragEnd:Le,children:i.jsx(sc,{items:T.map(K=>K.routineEntry?.A||K.A),strategy:oc,children:i.jsx("div",{className:"space-y-2 mt-4",children:T.map(K=>i.jsx(bN,{item:K,itemDetails:K.itemDetails,handleOpenChordCharts:ue},K.routineEntry?.A||K.A))})})})]}):i.jsx("div",{className:"text-gray-400",children:"No active routine selected"}):i.jsx("div",{className:"text-gray-400",children:"Please log in to manage routines"})})]}),i.jsxs(ss,{className:"bg-gray-900 text-gray-100",children:[i.jsx(si,{children:i.jsx(Yr,{children:"Inactive Routines"})}),i.jsx(is,{children:n?i.jsx(i.Fragment,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"mb-4 flex space-x-2",children:[i.jsx(xn,{placeholder:"New Routine Name",value:c,onChange:K=>d(K.target.value),onKeyPress:K=>K.key==="Enter"&&J(),className:"flex-grow"}),i.jsxs(De,{onClick:J,className:"bg-blue-600 hover:bg-blue-700",disabled:!c.trim(),children:[i.jsx(ga,{className:"h-5 w-5 mr-2"}),"Add"]})]}),i.jsx(rc,{sensors:be,collisionDetection:tc,onDragEnd:Re,children:i.jsx(sc,{items:oe.map(K=>K.ID).filter(K=>K!=null),strategy:oc,children:i.jsx("div",{className:"space-y-2",children:oe.filter(K=>K.ID!=null).map(K=>i.jsx(SN,{routine:K,handleActivateRoutine:me,handleEditClick:Se,handleDeleteClick:ce},K.ID))})})})]})}):i.jsx("div",{className:"text-gray-400",children:"Please log in to manage routines"})})]}),i.jsx(Eo,{open:!!x,onOpenChange:K=>{K||y(null)},children:i.jsxs(Ur,{children:[i.jsxs(Vr,{children:[i.jsx(Hr,{children:"Delete Routine"}),i.jsxs(Gr,{children:['Are you sure you want to delete "',x?.name,'"? This action cannot be undone.']})]}),i.jsxs(Wr,{children:[i.jsx(jo,{children:"Cancel"}),i.jsx(Nr,{onClick:D,className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})})]}),i.jsx(CN,{open:N,onOpenChange:b,routine:E,onRoutineChange:Me,items:s}),i.jsx(zv,{isOpen:F,onClose:()=>M(!1),itemId:H,itemTitle:q})]}):i.jsx("div",{className:"text-center p-8",children:i.jsx("h2",{className:"text-2xl mb-4",children:"Please log in to manage routines"})})},EN=()=>{const[n,r]=f.useState([]),[s,l]=f.useState(null),[c,d]=f.useState(!0),[h,m]=f.useState(null),g=async()=>{try{d(!0);const N=await fetch("/api/routines");if(!N.ok)throw new Error("Failed to fetch routines");const b=await N.json();r(b),m(null)}catch(N){console.error("Fetch routines error:",N),m(N.message)}finally{d(!1)}},v=async N=>{try{if(!(await fetch("/api/routines",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({routineName:N})})).ok)throw new Error("Failed to create routine");return await g(),!0}catch(b){return console.error("Create routine error:",b),m(b.message),!1}},x=async N=>{try{if(!(await fetch(`/api/routines/${N}`,{method:"DELETE"})).ok)throw new Error("Failed to delete routine");return await g(),!0}catch(b){return console.error("Delete routine error:",b),m(b.message),!1}},y=async N=>{l(N)};return f.useEffect(()=>{g()},[]),{routines:n,activeRoutine:s,loading:c,error:h,createRoutine:v,deleteRoutine:x,activateRoutine:y,refreshRoutines:g}};function Ym(n,[r,s]){return Math.min(s,Math.max(r,n))}function jN(n){const r=n+"CollectionProvider",[s,l]=ui(r),[c,d]=s(r,{collectionRef:{current:null},itemMap:new Map}),h=b=>{const{scope:E,children:S}=b,j=Ct.useRef(null),A=Ct.useRef(new Map).current;return i.jsx(c,{scope:E,itemMap:A,collectionRef:j,children:S})};h.displayName=r;const m=n+"CollectionSlot",g=Ct.forwardRef((b,E)=>{const{scope:S,children:j}=b,A=d(m,S),T=Pt(E,A.collectionRef);return i.jsx(as,{ref:T,children:j})});g.displayName=m;const v=n+"CollectionItemSlot",x="data-radix-collection-item",y=Ct.forwardRef((b,E)=>{const{scope:S,children:j,...A}=b,T=Ct.useRef(null),L=Pt(E,T),F=d(v,S);return Ct.useEffect(()=>(F.itemMap.set(T,{ref:T,...A}),()=>void F.itemMap.delete(T))),i.jsx(as,{[x]:"",ref:L,children:j})});y.displayName=v;function N(b){const E=d(n+"CollectionConsumer",b);return Ct.useCallback(()=>{const j=E.collectionRef.current;if(!j)return[];const A=Array.from(j.querySelectorAll(`[${x}]`));return Array.from(E.itemMap.values()).sort((F,M)=>A.indexOf(F.ref.current)-A.indexOf(M.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:h,Slot:g,ItemSlot:y},N,l]}var kN=f.createContext(void 0);function TN(n){const r=f.useContext(kN);return n||r||"ltr"}function RN(n){const r=f.useRef({value:n,previous:n});return f.useMemo(()=>(r.current.value!==n&&(r.current.previous=r.current.value,r.current.value=n),r.current.previous),[n])}var AN=[" ","Enter","ArrowUp","ArrowDown"],DN=[" ","Enter"],Ea="Select",[Ec,jc,PN]=jN(Ea),[gi]=ui(Ea,[PN,mc]),kc=mc(),[ON,Po]=gi(Ea),[_N,MN]=gi(Ea),dy=n=>{const{__scopeSelect:r,children:s,open:l,defaultOpen:c,onOpenChange:d,value:h,defaultValue:m,onValueChange:g,dir:v,name:x,autoComplete:y,disabled:N,required:b,form:E}=n,S=kc(r),[j,A]=f.useState(null),[T,L]=f.useState(null),[F,M]=f.useState(!1),H=TN(v),[z=!1,q]=Yl({prop:l,defaultProp:c,onChange:d}),[we,ae]=Yl({prop:h,defaultProp:m,onChange:g}),ye=f.useRef(null),xe=j?E||!!j.closest("form"):!0,[oe,be]=f.useState(new Set),Te=Array.from(oe).map(je=>je.props.value).join(";");return i.jsx(sv,{...S,children:i.jsxs(ON,{required:b,scope:r,trigger:j,onTriggerChange:A,valueNode:T,onValueNodeChange:L,valueNodeHasChildren:F,onValueNodeHasChildrenChange:M,contentId:rs(),value:we,onValueChange:ae,open:z,onOpenChange:q,dir:H,triggerPointerDownPosRef:ye,disabled:N,children:[i.jsx(Ec.Provider,{scope:r,children:i.jsx(_N,{scope:n.__scopeSelect,onNativeOptionAdd:f.useCallback(je=>{be(me=>new Set(me).add(je))},[]),onNativeOptionRemove:f.useCallback(je=>{be(me=>{const Q=new Set(me);return Q.delete(je),Q})},[]),children:s})}),xe?i.jsxs(_y,{"aria-hidden":!0,required:b,tabIndex:-1,name:x,autoComplete:y,value:we,onChange:je=>ae(je.target.value),disabled:N,form:E,children:[we===void 0?i.jsx("option",{value:""}):null,Array.from(oe)]},Te):null]})})};dy.displayName=Ea;var fy="SelectTrigger",hy=f.forwardRef((n,r)=>{const{__scopeSelect:s,disabled:l=!1,...c}=n,d=kc(s),h=Po(fy,s),m=h.disabled||l,g=Pt(r,h.onTriggerChange),v=jc(s),x=f.useRef("touch"),[y,N,b]=My(S=>{const j=v().filter(L=>!L.disabled),A=j.find(L=>L.value===h.value),T=Iy(j,S,A);T!==void 0&&h.onValueChange(T.value)}),E=S=>{m||(h.onOpenChange(!0),b()),S&&(h.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return i.jsx(iv,{asChild:!0,...d,children:i.jsx(kt.button,{type:"button",role:"combobox","aria-controls":h.contentId,"aria-expanded":h.open,"aria-required":h.required,"aria-autocomplete":"none",dir:h.dir,"data-state":h.open?"open":"closed",disabled:m,"data-disabled":m?"":void 0,"data-placeholder":Oy(h.value)?"":void 0,...c,ref:g,onClick:gt(c.onClick,S=>{S.currentTarget.focus(),x.current!=="mouse"&&E(S)}),onPointerDown:gt(c.onPointerDown,S=>{x.current=S.pointerType;const j=S.target;j.hasPointerCapture(S.pointerId)&&j.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(E(S),S.preventDefault())}),onKeyDown:gt(c.onKeyDown,S=>{const j=y.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&N(S.key),!(j&&S.key===" ")&&AN.includes(S.key)&&(E(),S.preventDefault())})})})});hy.displayName=fy;var py="SelectValue",my=f.forwardRef((n,r)=>{const{__scopeSelect:s,className:l,style:c,children:d,placeholder:h="",...m}=n,g=Po(py,s),{onValueNodeHasChildrenChange:v}=g,x=d!==void 0,y=Pt(r,g.onValueNodeChange);return wn(()=>{v(x)},[v,x]),i.jsx(kt.span,{...m,ref:y,style:{pointerEvents:"none"},children:Oy(g.value)?i.jsx(i.Fragment,{children:h}):d})});my.displayName=py;var IN="SelectIcon",gy=f.forwardRef((n,r)=>{const{__scopeSelect:s,children:l,...c}=n;return i.jsx(kt.span,{"aria-hidden":!0,...c,ref:r,children:l||""})});gy.displayName=IN;var LN="SelectPortal",vy=n=>i.jsx(rf,{asChild:!0,...n});vy.displayName=LN;var us="SelectContent",yy=f.forwardRef((n,r)=>{const s=Po(us,n.__scopeSelect),[l,c]=f.useState();if(wn(()=>{c(new DocumentFragment)},[]),!s.open){const d=l;return d?Er.createPortal(i.jsx(xy,{scope:n.__scopeSelect,children:i.jsx(Ec.Slot,{scope:n.__scopeSelect,children:i.jsx("div",{children:n.children})})}),d):null}return i.jsx(wy,{...n,ref:r})});yy.displayName=us;var ar=10,[xy,Oo]=gi(us),FN="SelectContentImpl",wy=f.forwardRef((n,r)=>{const{__scopeSelect:s,position:l="item-aligned",onCloseAutoFocus:c,onEscapeKeyDown:d,onPointerDownOutside:h,side:m,sideOffset:g,align:v,alignOffset:x,arrowPadding:y,collisionBoundary:N,collisionPadding:b,sticky:E,hideWhenDetached:S,avoidCollisions:j,...A}=n,T=Po(us,s),[L,F]=f.useState(null),[M,H]=f.useState(null),z=Pt(r,se=>F(se)),[q,we]=f.useState(null),[ae,ye]=f.useState(null),xe=jc(s),[oe,be]=f.useState(!1),Te=f.useRef(!1);f.useEffect(()=>{if(L)return xg(L)},[L]),ug();const je=f.useCallback(se=>{const[Re,...K]=xe().map(Qe=>Qe.ref.current),[ee]=K.slice(-1),Ke=document.activeElement;for(const Qe of se)if(Qe===Ke||(Qe?.scrollIntoView({block:"nearest"}),Qe===Re&&M&&(M.scrollTop=0),Qe===ee&&M&&(M.scrollTop=M.scrollHeight),Qe?.focus(),document.activeElement!==Ke))return},[xe,M]),me=f.useCallback(()=>je([q,L]),[je,q,L]);f.useEffect(()=>{oe&&me()},[oe,me]);const{onOpenChange:Q,triggerPointerDownPosRef:ce}=T;f.useEffect(()=>{if(L){let se={x:0,y:0};const Re=ee=>{se={x:Math.abs(Math.round(ee.pageX)-(ce.current?.x??0)),y:Math.abs(Math.round(ee.pageY)-(ce.current?.y??0))}},K=ee=>{se.x<=10&&se.y<=10?ee.preventDefault():L.contains(ee.target)||Q(!1),document.removeEventListener("pointermove",Re),ce.current=null};return ce.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",K,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",K,{capture:!0})}}},[L,Q,ce]),f.useEffect(()=>{const se=()=>Q(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[Q]);const[ue,D]=My(se=>{const Re=xe().filter(Ke=>!Ke.disabled),K=Re.find(Ke=>Ke.ref.current===document.activeElement),ee=Iy(Re,se,K);ee&&setTimeout(()=>ee.ref.current.focus())}),J=f.useCallback((se,Re,K)=>{const ee=!Te.current&&!K;(T.value!==void 0&&T.value===Re||ee)&&(we(se),ee&&(Te.current=!0))},[T.value]),Se=f.useCallback(()=>L?.focus(),[L]),Me=f.useCallback((se,Re,K)=>{const ee=!Te.current&&!K;(T.value!==void 0&&T.value===Re||ee)&&ye(se)},[T.value]),Pe=l==="popper"?Vd:Cy,Le=Pe===Vd?{side:m,sideOffset:g,align:v,alignOffset:x,arrowPadding:y,collisionBoundary:N,collisionPadding:b,sticky:E,hideWhenDetached:S,avoidCollisions:j}:{};return i.jsx(xy,{scope:s,content:L,viewport:M,onViewportChange:H,itemRefCallback:J,selectedItem:q,onItemLeave:Se,itemTextRefCallback:Me,focusSelectedItem:me,selectedItemText:ae,position:l,isPositioned:oe,searchRef:ue,children:i.jsx(of,{as,allowPinchZoom:!0,children:i.jsx(nf,{asChild:!0,trapped:T.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:gt(c,se=>{T.trigger?.focus({preventScroll:!0}),se.preventDefault()}),children:i.jsx(uc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:i.jsx(Pe,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:se=>se.preventDefault(),...A,...Le,onPlaced:()=>be(!0),ref:z,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:gt(A.onKeyDown,se=>{const Re=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!Re&&se.key.length===1&&D(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let ee=xe().filter(Ke=>!Ke.disabled).map(Ke=>Ke.ref.current);if(["ArrowUp","End"].includes(se.key)&&(ee=ee.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const Ke=se.target,Qe=ee.indexOf(Ke);ee=ee.slice(Qe+1)}setTimeout(()=>je(ee)),se.preventDefault()}})})})})})})});wy.displayName=FN;var $N="SelectItemAlignedPosition",Cy=f.forwardRef((n,r)=>{const{__scopeSelect:s,onPlaced:l,...c}=n,d=Po(us,s),h=Oo(us,s),[m,g]=f.useState(null),[v,x]=f.useState(null),y=Pt(r,z=>x(z)),N=jc(s),b=f.useRef(!1),E=f.useRef(!0),{viewport:S,selectedItem:j,selectedItemText:A,focusSelectedItem:T}=h,L=f.useCallback(()=>{if(d.trigger&&d.valueNode&&m&&v&&S&&j&&A){const z=d.trigger.getBoundingClientRect(),q=v.getBoundingClientRect(),we=d.valueNode.getBoundingClientRect(),ae=A.getBoundingClientRect();if(d.dir!=="rtl"){const Ke=ae.left-q.left,Qe=we.left-Ke,Be=z.left-Qe,it=z.width+Be,ut=Math.max(it,q.width),Z=window.innerWidth-ar,Ie=Ym(Qe,[ar,Math.max(ar,Z-ut)]);m.style.minWidth=it+"px",m.style.left=Ie+"px"}else{const Ke=q.right-ae.right,Qe=window.innerWidth-we.right-Ke,Be=window.innerWidth-z.right-Qe,it=z.width+Be,ut=Math.max(it,q.width),Z=window.innerWidth-ar,Ie=Ym(Qe,[ar,Math.max(ar,Z-ut)]);m.style.minWidth=it+"px",m.style.right=Ie+"px"}const ye=N(),xe=window.innerHeight-ar*2,oe=S.scrollHeight,be=window.getComputedStyle(v),Te=parseInt(be.borderTopWidth,10),je=parseInt(be.paddingTop,10),me=parseInt(be.borderBottomWidth,10),Q=parseInt(be.paddingBottom,10),ce=Te+je+oe+Q+me,ue=Math.min(j.offsetHeight*5,ce),D=window.getComputedStyle(S),J=parseInt(D.paddingTop,10),Se=parseInt(D.paddingBottom,10),Me=z.top+z.height/2-ar,Pe=xe-Me,Le=j.offsetHeight/2,se=j.offsetTop+Le,Re=Te+je+se,K=ce-Re;if(Re<=Me){const Ke=ye.length>0&&j===ye[ye.length-1].ref.current;m.style.bottom="0px";const Qe=v.clientHeight-S.offsetTop-S.offsetHeight,Be=Math.max(Pe,Le+(Ke?Se:0)+Qe+me),it=Re+Be;m.style.height=it+"px"}else{const Ke=ye.length>0&&j===ye[0].ref.current;m.style.top="0px";const Be=Math.max(Me,Te+S.offsetTop+(Ke?J:0)+Le)+K;m.style.height=Be+"px",S.scrollTop=Re-Me+S.offsetTop}m.style.margin=`${ar}px 0`,m.style.minHeight=ue+"px",m.style.maxHeight=xe+"px",l?.(),requestAnimationFrame(()=>b.current=!0)}},[N,d.trigger,d.valueNode,m,v,S,j,A,d.dir,l]);wn(()=>L(),[L]);const[F,M]=f.useState();wn(()=>{v&&M(window.getComputedStyle(v).zIndex)},[v]);const H=f.useCallback(z=>{z&&E.current===!0&&(L(),T?.(),E.current=!1)},[L,T]);return i.jsx(BN,{scope:s,contentWrapper:m,shouldExpandOnScrollRef:b,onScrollButtonChange:H,children:i.jsx("div",{ref:g,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:F},children:i.jsx(kt.div,{...c,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...c.style}})})})});Cy.displayName=$N;var zN="SelectPopperPosition",Vd=f.forwardRef((n,r)=>{const{__scopeSelect:s,align:l="start",collisionPadding:c=ar,...d}=n,h=kc(s);return i.jsx(av,{...h,...d,ref:r,align:l,collisionPadding:c,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Vd.displayName=zN;var[BN,Mf]=gi(us,{}),Wd="SelectViewport",by=f.forwardRef((n,r)=>{const{__scopeSelect:s,nonce:l,...c}=n,d=Oo(Wd,s),h=Mf(Wd,s),m=Pt(r,d.onViewportChange),g=f.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),i.jsx(Ec.Slot,{scope:s,children:i.jsx(kt.div,{"data-radix-select-viewport":"",role:"presentation",...c,ref:m,style:{position:"relative",flex:1,overflow:"hidden auto",...c.style},onScroll:gt(c.onScroll,v=>{const x=v.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:N}=h;if(N?.current&&y){const b=Math.abs(g.current-x.scrollTop);if(b>0){const E=window.innerHeight-ar*2,S=parseFloat(y.style.minHeight),j=parseFloat(y.style.height),A=Math.max(S,j);if(A<E){const T=A+b,L=Math.min(E,T),F=T-L;y.style.height=L+"px",y.style.bottom==="0px"&&(x.scrollTop=F>0?F:0,y.style.justifyContent="flex-end")}}}g.current=x.scrollTop})})})]})});by.displayName=Wd;var Sy="SelectGroup",[UN,VN]=gi(Sy),WN=f.forwardRef((n,r)=>{const{__scopeSelect:s,...l}=n,c=rs();return i.jsx(UN,{scope:s,id:c,children:i.jsx(kt.div,{role:"group","aria-labelledby":c,...l,ref:r})})});WN.displayName=Sy;var Ny="SelectLabel",Ey=f.forwardRef((n,r)=>{const{__scopeSelect:s,...l}=n,c=VN(Ny,s);return i.jsx(kt.div,{id:c.id,...l,ref:r})});Ey.displayName=Ny;var ac="SelectItem",[HN,jy]=gi(ac),ky=f.forwardRef((n,r)=>{const{__scopeSelect:s,value:l,disabled:c=!1,textValue:d,...h}=n,m=Po(ac,s),g=Oo(ac,s),v=m.value===l,[x,y]=f.useState(d??""),[N,b]=f.useState(!1),E=Pt(r,T=>g.itemRefCallback?.(T,l,c)),S=rs(),j=f.useRef("touch"),A=()=>{c||(m.onValueChange(l),m.onOpenChange(!1))};if(l==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(HN,{scope:s,value:l,disabled:c,textId:S,isSelected:v,onItemTextChange:f.useCallback(T=>{y(L=>L||(T?.textContent??"").trim())},[]),children:i.jsx(Ec.ItemSlot,{scope:s,value:l,disabled:c,textValue:x,children:i.jsx(kt.div,{role:"option","aria-labelledby":S,"data-highlighted":N?"":void 0,"aria-selected":v&&N,"data-state":v?"checked":"unchecked","aria-disabled":c||void 0,"data-disabled":c?"":void 0,tabIndex:c?void 0:-1,...h,ref:E,onFocus:gt(h.onFocus,()=>b(!0)),onBlur:gt(h.onBlur,()=>b(!1)),onClick:gt(h.onClick,()=>{j.current!=="mouse"&&A()}),onPointerUp:gt(h.onPointerUp,()=>{j.current==="mouse"&&A()}),onPointerDown:gt(h.onPointerDown,T=>{j.current=T.pointerType}),onPointerMove:gt(h.onPointerMove,T=>{j.current=T.pointerType,c?g.onItemLeave?.():j.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:gt(h.onPointerLeave,T=>{T.currentTarget===document.activeElement&&g.onItemLeave?.()}),onKeyDown:gt(h.onKeyDown,T=>{g.searchRef?.current!==""&&T.key===" "||(DN.includes(T.key)&&A(),T.key===" "&&T.preventDefault())})})})})});ky.displayName=ac;var oa="SelectItemText",Ty=f.forwardRef((n,r)=>{const{__scopeSelect:s,className:l,style:c,...d}=n,h=Po(oa,s),m=Oo(oa,s),g=jy(oa,s),v=MN(oa,s),[x,y]=f.useState(null),N=Pt(r,A=>y(A),g.onItemTextChange,A=>m.itemTextRefCallback?.(A,g.value,g.disabled)),b=x?.textContent,E=f.useMemo(()=>i.jsx("option",{value:g.value,disabled:g.disabled,children:b},g.value),[g.disabled,g.value,b]),{onNativeOptionAdd:S,onNativeOptionRemove:j}=v;return wn(()=>(S(E),()=>j(E)),[S,j,E]),i.jsxs(i.Fragment,{children:[i.jsx(kt.span,{id:g.textId,...d,ref:N}),g.isSelected&&h.valueNode&&!h.valueNodeHasChildren?Er.createPortal(d.children,h.valueNode):null]})});Ty.displayName=oa;var Ry="SelectItemIndicator",Ay=f.forwardRef((n,r)=>{const{__scopeSelect:s,...l}=n;return jy(Ry,s).isSelected?i.jsx(kt.span,{"aria-hidden":!0,...l,ref:r}):null});Ay.displayName=Ry;var Hd="SelectScrollUpButton",GN=f.forwardRef((n,r)=>{const s=Oo(Hd,n.__scopeSelect),l=Mf(Hd,n.__scopeSelect),[c,d]=f.useState(!1),h=Pt(r,l.onScrollButtonChange);return wn(()=>{if(s.viewport&&s.isPositioned){let m=function(){const v=g.scrollTop>0;d(v)};const g=s.viewport;return m(),g.addEventListener("scroll",m),()=>g.removeEventListener("scroll",m)}},[s.viewport,s.isPositioned]),c?i.jsx(Dy,{...n,ref:h,onAutoScroll:()=>{const{viewport:m,selectedItem:g}=s;m&&g&&(m.scrollTop=m.scrollTop-g.offsetHeight)}}):null});GN.displayName=Hd;var Gd="SelectScrollDownButton",YN=f.forwardRef((n,r)=>{const s=Oo(Gd,n.__scopeSelect),l=Mf(Gd,n.__scopeSelect),[c,d]=f.useState(!1),h=Pt(r,l.onScrollButtonChange);return wn(()=>{if(s.viewport&&s.isPositioned){let m=function(){const v=g.scrollHeight-g.clientHeight,x=Math.ceil(g.scrollTop)<v;d(x)};const g=s.viewport;return m(),g.addEventListener("scroll",m),()=>g.removeEventListener("scroll",m)}},[s.viewport,s.isPositioned]),c?i.jsx(Dy,{...n,ref:h,onAutoScroll:()=>{const{viewport:m,selectedItem:g}=s;m&&g&&(m.scrollTop=m.scrollTop+g.offsetHeight)}}):null});YN.displayName=Gd;var Dy=f.forwardRef((n,r)=>{const{__scopeSelect:s,onAutoScroll:l,...c}=n,d=Oo("SelectScrollButton",s),h=f.useRef(null),m=jc(s),g=f.useCallback(()=>{h.current!==null&&(window.clearInterval(h.current),h.current=null)},[]);return f.useEffect(()=>()=>g(),[g]),wn(()=>{m().find(x=>x.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[m]),i.jsx(kt.div,{"aria-hidden":!0,...c,ref:r,style:{flexShrink:0,...c.style},onPointerDown:gt(c.onPointerDown,()=>{h.current===null&&(h.current=window.setInterval(l,50))}),onPointerMove:gt(c.onPointerMove,()=>{d.onItemLeave?.(),h.current===null&&(h.current=window.setInterval(l,50))}),onPointerLeave:gt(c.onPointerLeave,()=>{g()})})}),KN="SelectSeparator",Py=f.forwardRef((n,r)=>{const{__scopeSelect:s,...l}=n;return i.jsx(kt.div,{"aria-hidden":!0,...l,ref:r})});Py.displayName=KN;var Yd="SelectArrow",QN=f.forwardRef((n,r)=>{const{__scopeSelect:s,...l}=n,c=kc(s),d=Po(Yd,s),h=Oo(Yd,s);return d.open&&h.position==="popper"?i.jsx(lv,{...c,...l,ref:r}):null});QN.displayName=Yd;function Oy(n){return n===""||n===void 0}var _y=f.forwardRef((n,r)=>{const{value:s,...l}=n,c=f.useRef(null),d=Pt(r,c),h=RN(s);return f.useEffect(()=>{const m=c.current,g=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(g,"value").set;if(h!==s&&x){const y=new Event("change",{bubbles:!0});x.call(m,s),m.dispatchEvent(y)}},[h,s]),i.jsx(Nf,{asChild:!0,children:i.jsx("select",{...l,ref:d,defaultValue:s})})});_y.displayName="BubbleSelect";function My(n){const r=Kr(n),s=f.useRef(""),l=f.useRef(0),c=f.useCallback(h=>{const m=s.current+h;r(m),(function g(v){s.current=v,window.clearTimeout(l.current),v!==""&&(l.current=window.setTimeout(()=>g(""),1e3))})(m)},[r]),d=f.useCallback(()=>{s.current="",window.clearTimeout(l.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(l.current),[]),[s,c,d]}function Iy(n,r,s){const c=r.length>1&&Array.from(r).every(v=>v===r[0])?r[0]:r,d=s?n.indexOf(s):-1;let h=XN(n,Math.max(d,0));c.length===1&&(h=h.filter(v=>v!==s));const g=h.find(v=>v.textValue.toLowerCase().startsWith(c.toLowerCase()));return g!==s?g:void 0}function XN(n,r){return n.map((s,l)=>n[(r+l)%n.length])}var JN=dy,Ly=hy,qN=my,ZN=gy,eE=vy,Fy=yy,tE=by,$y=Ey,zy=ky,nE=Ty,rE=Ay,By=Py;const oE=JN,sE=qN,Uy=f.forwardRef(({className:n,children:r,...s},l)=>i.jsxs(Ly,{ref:l,className:vt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...s,children:[r,i.jsx(ZN,{asChild:!0,children:i.jsx(Bl,{className:"h-4 w-4 opacity-50"})})]}));Uy.displayName=Ly.displayName;const Vy=f.forwardRef(({className:n,children:r,position:s="popper",...l},c)=>i.jsx(eE,{children:i.jsx(Fy,{ref:c,className:vt("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:s,...l,children:i.jsx(tE,{className:vt("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r})})}));Vy.displayName=Fy.displayName;const iE=f.forwardRef(({className:n,...r},s)=>i.jsx($y,{ref:s,className:vt("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...r}));iE.displayName=$y.displayName;const Wy=f.forwardRef(({className:n,children:r,...s},l)=>i.jsxs(zy,{ref:l,className:vt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...s,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(rE,{children:i.jsx(sa,{className:"h-4 w-4"})})}),i.jsx(nE,{children:r})]}));Wy.displayName=zy.displayName;const aE=f.forwardRef(({className:n,...r},s)=>i.jsx(By,{ref:s,className:vt("-mx-1 my-1 h-px bg-muted",n),...r}));aE.displayName=By.displayName;function lE(){const[n,r]=f.useState(""),[s,l]=f.useState(""),[c,d]=f.useState(""),[h,m]=f.useState(""),{routines:g,loading:v}=EN(),x=async()=>{try{const b=JSON.parse(n);if(!(await fetch("/api/items/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)throw new Error("Failed to import items");r("")}catch(b){console.error("Import error:",b)}},y=async()=>{try{const b=JSON.parse(s);if(!(await fetch("/api/routines/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)throw new Error("Failed to import routines");l("")}catch(b){console.error("Import error:",b)}},N=async()=>{try{if(!h)throw new Error("Please select a routine first");const b=JSON.parse(c);if(!(await fetch(`/api/routines/${h}/items/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)throw new Error("Failed to import routine items");d("")}catch(b){console.error("Import error:",b)}};return i.jsx(ss,{className:"w-full max-w-4xl bg-gray-900 text-gray-100",children:i.jsxs(is,{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(Yr,{className:"text-2xl mb-4",children:"Import Items"}),i.jsx("p",{className:"text-gray-300 mb-4",children:"Import practice items from other sources. Items will be appended to your existing items."}),i.jsx(os,{value:n,onChange:b=>r(b.target.value),placeholder:"Paste your JSON data here...",className:"h-48 font-mono bg-gray-800 mb-2"}),i.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Expected format: Array of objects with 'title' and 'duration' fields"}),i.jsx(De,{onClick:x,className:"bg-blue-600 hover:bg-blue-700",children:"Import Items"})]}),i.jsxs("div",{children:[i.jsx(Yr,{className:"text-2xl mb-4",children:"Import Routine Items"}),i.jsx("p",{className:"text-gray-300 mb-4",children:"Import items into an existing routine. Items will be matched by title with existing items."}),i.jsxs("div",{className:"mb-4",children:[i.jsx(No,{htmlFor:"routine-select",className:"block mb-2",children:"Select Routine"}),i.jsxs(oE,{value:h,onValueChange:m,disabled:v,children:[i.jsx(Uy,{className:"w-full bg-gray-800",children:i.jsx(sE,{placeholder:"Select a routine"})}),i.jsx(Vy,{className:"bg-gray-800",children:g.map(b=>i.jsx(Wy,{value:b.ID,className:"text-gray-100 hover:bg-gray-700",children:b.name},b.ID))})]})]}),i.jsx(os,{value:c,onChange:b=>d(b.target.value),placeholder:"Paste your JSON data here...",className:"h-48 font-mono bg-gray-800 mb-2"}),i.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Expected format: Array of objects with 'title' field"}),i.jsx(De,{onClick:N,className:"bg-blue-600 hover:bg-blue-700",children:"Import Routine Items"})]}),i.jsxs("div",{children:[i.jsx(Yr,{className:"text-2xl mb-4",children:"Import Routines"}),i.jsx("p",{className:"text-gray-300 mb-4",children:"Import practice routines. Each routine will be created as a new routine."}),i.jsx(os,{value:s,onChange:b=>l(b.target.value),placeholder:"Paste your JSON data here...",className:"h-48 font-mono bg-gray-800 mb-2"}),i.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Expected format: Array of objects with 'name' field"}),i.jsx(De,{onClick:y,className:"bg-blue-600 hover:bg-blue-700",children:"Import Routines"})]})]})})}const cE=()=>{const[n,r]=f.useState([]),[s,l]=f.useState(!0),[c,d]=f.useState(null),[h,m]=f.useState(0),g=async()=>{try{const x=await fetch("/api/items");if(!x.ok)throw new Error("Failed to fetch items");const y=await x.json();r(y),d(null)}catch(x){d(x.message),console.error("Fetch error:",x)}finally{l(!1)}},v=f.useCallback(async()=>{m(x=>x+1)},[]);return f.useEffect(()=>{g()},[h]),{items:n,loading:s,error:c,refreshItems:v}},uE=()=>{const{items:n,refreshItems:r}=cE();return i.jsx(lN,{items:n,onItemsChange:r})},dE=()=>{const{activePage:n}=Xd();switch(n){case"Practice":return i.jsx(mN,{});case"Routines":return i.jsx(NN,{});case"Items":return i.jsx(uE,{});case"Imports":return i.jsx(lE,{});default:return i.jsx("div",{children:"Page not implemented yet"})}},fE=()=>{const n=f.useRef(null),[r,s]=f.useState(160);return f.useEffect(()=>{const l=()=>{if(n.current){const c=n.current.offsetHeight;s(c+20)}};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),i.jsxs("div",{className:"min-h-screen",children:[i.jsx("div",{ref:n,className:"fixed top-0 left-0 right-0 z-50 bg-gray-900",children:i.jsxs("div",{className:"container mx-auto px-4 pt-4 pb-1",children:[i.jsx("h1",{className:"text-2xl sm:text-4xl font-bold text-orange-500 mb-2",children:"Guitar Practice Routine App"}),i.jsx(vN,{className:"mb-0"})]})}),i.jsx("div",{className:"pb-4 px-4 container mx-auto",style:{paddingTop:`${r}px`},children:i.jsx(dE,{})})]})};p0.createRoot(document.getElementById("root")).render(i.jsx(Ct.StrictMode,{children:i.jsx(v0,{children:i.jsx(fE,{})})}));
//# sourceMappingURL=main.js.map
